var ui=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var yc=ui((ae,Ce)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var hi=1e-6,Qe=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function di(){var t=new Qe(9);return Qe!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gi(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],c=e[5],h=e[6],u=e[7],l=e[8],s=e[9],f=e[10],b=e[11],m=e[12],g=e[13],_=e[14],x=e[15],C=n*c-r*a,E=n*h-i*a,A=n*u-o*a,y=r*h-i*c,v=r*u-o*c,k=i*u-o*h,w=l*g-s*m,S=l*_-f*m,T=l*x-b*m,I=s*_-f*g,z=s*x-b*g,O=f*x-b*_,p=C*O-E*z+A*I+y*T-v*S+k*w;return p?(p=1/p,t[0]=(c*O-h*z+u*I)*p,t[1]=(h*T-a*O-u*S)*p,t[2]=(a*z-c*T+u*w)*p,t[3]=(i*z-r*O-o*I)*p,t[4]=(n*O-i*T+o*S)*p,t[5]=(r*T-n*z-o*w)*p,t[6]=(g*k-_*v+x*y)*p,t[7]=(_*A-m*k-x*E)*p,t[8]=(m*v-g*A+x*C)*p,t):null}function ze(){var t=new Qe(16);return Qe!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function it(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],c=e[4],h=e[5],u=e[6],l=e[7],s=e[8],f=e[9],b=e[10],m=e[11],g=e[12],_=e[13],x=e[14],C=e[15],E=n[0],A=n[1],y=n[2],v=n[3];return t[0]=E*r+A*c+y*s+v*g,t[1]=E*i+A*h+y*f+v*_,t[2]=E*o+A*u+y*b+v*x,t[3]=E*a+A*l+y*m+v*C,E=n[4],A=n[5],y=n[6],v=n[7],t[4]=E*r+A*c+y*s+v*g,t[5]=E*i+A*h+y*f+v*_,t[6]=E*o+A*u+y*b+v*x,t[7]=E*a+A*l+y*m+v*C,E=n[8],A=n[9],y=n[10],v=n[11],t[8]=E*r+A*c+y*s+v*g,t[9]=E*i+A*h+y*f+v*_,t[10]=E*o+A*u+y*b+v*x,t[11]=E*a+A*l+y*m+v*C,E=n[12],A=n[13],y=n[14],v=n[15],t[12]=E*r+A*c+y*s+v*g,t[13]=E*i+A*h+y*f+v*_,t[14]=E*o+A*u+y*b+v*x,t[15]=E*a+A*l+y*m+v*C,t}function vn(t,e,n){var r=n[0],i=n[1],o=n[2],a,c,h,u,l,s,f,b,m,g,_,x;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],c=e[1],h=e[2],u=e[3],l=e[4],s=e[5],f=e[6],b=e[7],m=e[8],g=e[9],_=e[10],x=e[11],t[0]=a,t[1]=c,t[2]=h,t[3]=u,t[4]=l,t[5]=s,t[6]=f,t[7]=b,t[8]=m,t[9]=g,t[10]=_,t[11]=x,t[12]=a*r+l*i+m*o+e[12],t[13]=c*r+s*i+g*o+e[13],t[14]=h*r+f*i+_*o+e[14],t[15]=u*r+b*i+x*o+e[15]),t}function yn(t,e,n,r){var i=r[0],o=r[1],a=r[2],c=Math.hypot(i,o,a),h,u,l,s,f,b,m,g,_,x,C,E,A,y,v,k,w,S,T,I,z,O,p,M;return c<hi?null:(c=1/c,i*=c,o*=c,a*=c,h=Math.sin(n),u=Math.cos(n),l=1-u,s=e[0],f=e[1],b=e[2],m=e[3],g=e[4],_=e[5],x=e[6],C=e[7],E=e[8],A=e[9],y=e[10],v=e[11],k=i*i*l+u,w=o*i*l+a*h,S=a*i*l-o*h,T=i*o*l-a*h,I=o*o*l+u,z=a*o*l+i*h,O=i*a*l+o*h,p=o*a*l-i*h,M=a*a*l+u,t[0]=s*k+g*w+E*S,t[1]=f*k+_*w+A*S,t[2]=b*k+x*w+y*S,t[3]=m*k+C*w+v*S,t[4]=s*T+g*I+E*z,t[5]=f*T+_*I+A*z,t[6]=b*T+x*I+y*z,t[7]=m*T+C*I+v*z,t[8]=s*O+g*p+E*M,t[9]=f*O+_*p+A*M,t[10]=b*O+x*p+y*M,t[11]=m*O+C*p+v*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function bi(t,e,n,r,i){var o=1/Math.tan(e/2),a;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}var pi=bi;function dt(){var t=new Qe(3);return Qe!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}(function(){var t=dt();return function(e,n,r,i,o,a){var c,h;for(n||(n=3),r||(r=0),i?h=Math.min(i*n+r,e.length):h=e.length,c=r;c<h;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],o(t,t,a),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();function Wt(t,e,n,r){if(r<=n)return n;const i=Math.floor(n+(r-n)/2),o=e-t[i].value,a=e-t[i+1].value;return o<0?Wt(t,e,n,i-1):a<0?i:Wt(t,e,i+1,r)}const Ai=(t,e,n)=>{const r=(t-e)/(n-e);return[1-r,r]};function mi(t){return t.value!==void 0&&t.mapped!==void 0}function vi(t){return t.length>0&&mi(t[0])}function _n(t,e,n,r){return[t*e[0]+n*r[0],t*e[1]+n*r[1],t*e[2]+n*r[2]]}function xn(t){return t||Ai}function yi(t,e,n){return!Array.isArray(t)||t.length<1?wi:vi(t)?_i(t,e,xn(n),_n):xi(t,e,xn(n),_n)}function _i(t,e,n,r){const i=t.sort((o,a)=>o.value<a.value?-1:1);return function(o){const a=e(o),c=Wt(i,a,0,i.length-1);if(c==0&&a<i[0].value)return i[c].mapped;if(c==i.length-1)return i[c].mapped;const[h,u]=n(a,i[c].value,i[c+1].value);return r(h,i[c].mapped,u,i[c+1].mapped)}}function xi(t,e,n,r){return function(i){const o=e(i),a=(t.length-1)*o;if(a<=0)return t[0];if(a>=t.length-1)return t[t.length-1];const c=Math.floor(a),[h,u]=n(a,c,c+1);return r(h,t[c],u,t[c+1])}}function wi(t){return[0,0,0]}function Ei(t,e){let[n,r]=t;const[i,o]=e;return Math.abs(n-r)<Number.EPSILON&&(r=n+1),function(a){return i+(o-i)*((a-n)/(r-n))}}const Ci=[[.001462,466e-6,.013866],[.002267,.00127,.01857],[.003299,.002249,.024239],[.004547,.003392,.030909],[.006006,.004692,.038558],[.007676,.006136,.046836],[.009561,.007713,.055143],[.011663,.009417,.06346],[.013995,.011225,.071862],[.016561,.013136,.080282],[.019373,.015133,.088767],[.022447,.017199,.097327],[.025793,.019331,.10593],[.029432,.021503,.114621],[.033385,.023702,.123397],[.037668,.025921,.132232],[.042253,.028139,.141141],[.046915,.030324,.150164],[.051644,.032474,.159254],[.056449,.034569,.168414],[.06134,.03659,.177642],[.066331,.038504,.186962],[.071429,.040294,.196354],[.076637,.041905,.205799],[.081962,.043328,.215289],[.087411,.044556,.224813],[.09299,.045583,.234358],[.098702,.046402,.243904],[.104551,.047008,.25343],[.110536,.047399,.262912],[.116656,.047574,.272321],[.122908,.047536,.281624],[.129285,.047293,.290788],[.135778,.046856,.299776],[.142378,.046242,.308553],[.149073,.045468,.317085],[.15585,.044559,.325338],[.162689,.043554,.333277],[.169575,.042489,.340874],[.176493,.041402,.348111],[.183429,.040329,.354971],[.190367,.039309,.361447],[.197297,.0384,.367535],[.204209,.037632,.373238],[.211095,.03703,.378563],[.217949,.036615,.383522],[.224763,.036405,.388129],[.231538,.036405,.3924],[.238273,.036621,.396353],[.244967,.037055,.400007],[.25162,.037705,.403378],[.258234,.038571,.406485],[.26481,.039647,.409345],[.271347,.040922,.411976],[.27785,.042353,.414392],[.284321,.043933,.416608],[.290763,.045644,.418637],[.297178,.04747,.420491],[.303568,.049396,.422182],[.309935,.051407,.423721],[.316282,.05349,.425116],[.32261,.055634,.426377],[.328921,.057827,.427511],[.335217,.06006,.428524],[.3415,.062325,.429425],[.347771,.064616,.430217],[.354032,.066925,.430906],[.360284,.069247,.431497],[.366529,.071579,.431994],[.372768,.073915,.4324],[.379001,.076253,.432719],[.385228,.078591,.432955],[.391453,.080927,.433109],[.397674,.083257,.433183],[.403894,.08558,.433179],[.410113,.087896,.433098],[.416331,.090203,.432943],[.422549,.092501,.432714],[.428768,.09479,.432412],[.434987,.097069,.432039],[.441207,.099338,.431594],[.447428,.101597,.43108],[.453651,.103848,.430498],[.459875,.106089,.429846],[.4661,.108322,.429125],[.472328,.110547,.428334],[.478558,.112764,.427475],[.484789,.114974,.426548],[.491022,.117179,.425552],[.497257,.119379,.424488],[.503493,.121575,.423356],[.50973,.123769,.422156],[.515967,.12596,.420887],[.522206,.12815,.419549],[.528444,.130341,.418142],[.534683,.132534,.416667],[.54092,.134729,.415123],[.547157,.136929,.413511],[.553392,.139134,.411829],[.559624,.141346,.410078],[.565854,.143567,.408258],[.572081,.145797,.406369],[.578304,.148039,.404411],[.584521,.150294,.402385],[.590734,.152563,.40029],[.59694,.154848,.398125],[.603139,.157151,.395891],[.60933,.159474,.393589],[.615513,.161817,.391219],[.621685,.164184,.388781],[.627847,.166575,.386276],[.633998,.168992,.383704],[.640135,.171438,.381065],[.64626,.173914,.378359],[.652369,.176421,.375586],[.658463,.178962,.372748],[.66454,.181539,.369846],[.670599,.184153,.366879],[.676638,.186807,.363849],[.682656,.189501,.360757],[.688653,.192239,.357603],[.694627,.195021,.354388],[.700576,.197851,.351113],[.7065,.200728,.347777],[.712396,.203656,.344383],[.718264,.206636,.340931],[.724103,.20967,.337424],[.729909,.212759,.333861],[.735683,.215906,.330245],[.741423,.219112,.326576],[.747127,.222378,.322856],[.752794,.225706,.319085],[.758422,.229097,.315266],[.76401,.232554,.311399],[.769556,.236077,.307485],[.775059,.239667,.303526],[.780517,.243327,.299523],[.785929,.247056,.295477],[.791293,.250856,.29139],[.796607,.254728,.287264],[.801871,.258674,.283099],[.807082,.262692,.278898],[.812239,.266786,.274661],[.817341,.270954,.27039],[.822386,.275197,.266085],[.827372,.279517,.26175],[.832299,.283913,.257383],[.837165,.288385,.252988],[.841969,.292933,.248564],[.846709,.297559,.244113],[.851384,.30226,.239636],[.855992,.307038,.235133],[.860533,.311892,.230606],[.865006,.316822,.226055],[.869409,.321827,.221482],[.873741,.326906,.216886],[.878001,.33206,.212268],[.882188,.337287,.207628],[.886302,.342586,.202968],[.890341,.347957,.198286],[.894305,.353399,.193584],[.898192,.358911,.18886],[.902003,.364492,.184116],[.905735,.37014,.17935],[.90939,.375856,.174563],[.912966,.381636,.169755],[.916462,.387481,.164924],[.919879,.393389,.16007],[.923215,.399359,.155193],[.92647,.405389,.150292],[.929644,.411479,.145367],[.932737,.417627,.140417],[.935747,.423831,.13544],[.938675,.430091,.130438],[.941521,.436405,.125409],[.944285,.442772,.120354],[.946965,.449191,.115272],[.949562,.45566,.110164],[.952075,.462178,.105031],[.954506,.468744,.099874],[.956852,.475356,.094695],[.959114,.482014,.089499],[.961293,.488716,.084289],[.963387,.495462,.079073],[.965397,.502249,.073859],[.967322,.509078,.068659],[.969163,.515946,.063488],[.970919,.522853,.058367],[.97259,.529798,.053324],[.974176,.53678,.048392],[.975677,.543798,.043618],[.977092,.55085,.03905],[.978422,.557937,.034931],[.979666,.565057,.031409],[.980824,.572209,.028508],[.981895,.579392,.02625],[.982881,.586606,.024661],[.983779,.593849,.02377],[.984591,.601122,.023606],[.985315,.608422,.024202],[.985952,.61575,.025592],[.986502,.623105,.027814],[.986964,.630485,.030908],[.987337,.63789,.034916],[.987622,.64532,.039886],[.987819,.652773,.045581],[.987926,.66025,.05175],[.987945,.667748,.058329],[.987874,.675267,.065257],[.987714,.682807,.072489],[.987464,.690366,.07999],[.987124,.697944,.087731],[.986694,.70554,.095694],[.986175,.713153,.103863],[.985566,.720782,.112229],[.984865,.728427,.120785],[.984075,.736087,.129527],[.983196,.743758,.138453],[.982228,.751442,.147565],[.981173,.759135,.156863],[.980032,.766837,.166353],[.978806,.774545,.176037],[.977497,.782258,.185923],[.976108,.789974,.196018],[.974638,.797692,.206332],[.973088,.805409,.216877],[.971468,.813122,.227658],[.969783,.820825,.238686],[.968041,.828515,.249972],[.966243,.836191,.261534],[.964394,.843848,.273391],[.962517,.851476,.285546],[.960626,.859069,.29801],[.95872,.866624,.31082],[.956834,.874129,.323974],[.954997,.881569,.337475],[.953215,.888942,.351369],[.951546,.896226,.365627],[.950018,.903409,.380271],[.948683,.910473,.395289],[.947594,.917399,.410665],[.946809,.924168,.426373],[.946392,.930761,.442367],[.946403,.937159,.458592],[.946903,.943348,.47497],[.947937,.949318,.491426],[.949545,.955063,.50786],[.95174,.960587,.524203],[.954529,.965896,.540361],[.957896,.971003,.556275],[.961812,.975924,.571925],[.966249,.980678,.587206],[.971162,.985282,.602154],[.976511,.989753,.61676],[.982257,.994109,.631017],[.988362,.998364,.644924]];class Ii{constructor(e,n,r,i){for(const[o,a]of Object.entries(e))o=="color"||o=="size"||o=="position"||o=="outlineColor"||o=="outlineWidth"||(this[o]=a);this._network=i,this.ID=n,this.index=r}set color(e){let n=this.index;this._network.colors[n*4+0]=e[0],this._network.colors[n*4+1]=e[1],this._network.colors[n*4+2]=e[2],e.length>3&&(this._network.colors[n*4+3]=e[3])}get color(){let e=this.index;return[this._network.colors[e*4+0],this._network.colors[e*4+1],this._network.colors[e*4+2],this._network.colors[e*4+3]]}set opacity(e){let n=this.index;this._network.colors[n*4+3]=e}get opacity(){let e=this.index;return this._network.colors[e*4+3]}set size(e){this._network.sizes[this.index]=e}get size(){return this._network.sizes[this.index]}set outlineColor(e){let n=this.index;this._network.outlineColors[n*4+0]=e[0],this._network.outlineColors[n*4+1]=e[1],this._network.outlineColors[n*4+2]=e[2],e.length>3&&(this._network.outlineColors[n*4+3]=e[3])}get outlineColor(){let e=this.index;return[this._network.outlineColors[e*4+0],this._network.outlineColors[e*4+1],this._network.outlineColors[e*4+2],this._network.outlineColors[e*4+3]]}set outlineWidth(e){this._network.outlineWidths[this.index]=e}get outlineWidth(){return this._network.outlineWidths[this.index]}get network(){return this._network}set position(e){let n=this.index;this._network.positions[n*3+0]=e[0],this._network.positions[n*3+1]=e[1],this._network.positions[n*3+2]=e[2]}get position(){let e=this.index;return[this._network.positions[e*3+0],this._network.positions[e*3+1],this._network.positions[e*3+2]]}}class Bi{constructor(e,n,r){this.ID2index=new Object,this.index2Node=[];for(const[a,c]of Object.entries(e))if(!this.ID2index.hasOwnProperty(a)){let h=this.index2Node.length;this.ID2index[a]=h,c.index=h,c.ID=a,this.index2Node.push(c),c.neighbors=[],c.edges=[]}this.indexedEdges=new Int32Array(n.length*2);for(let a=0;a<n.length;a++){const c=n[a];let h=this.ID2index[c.source],u=this.ID2index[c.target];this.index2Node[h],this.index2Node[u],this.indexedEdges[a*2]=h,this.indexedEdges[a*2+1]=u}this.positions=new Float32Array(3*this.index2Node.length),this.colors=new Float32Array(4*this.index2Node.length),this.sizes=new Float32Array(this.index2Node.length),this.outlineColors=new Float32Array(4*this.index2Node.length);for(let a=0;a<this.index2Node.length;a++)this.colors[a*4+3]=1,this.outlineColors[a*4+3]=1;this.outlineWidths=new Float32Array(this.index2Node.length),this.edgePositions=null,this.edgeColors=null,this.edgeSizes=null,this.nodes={};let i=Ei([0,this.index2Node.length],[0,1]),o=yi(Ci,i);for(let a=0;a<this.index2Node.length;a++){let c=this.index2Node[a];if(c.hasOwnProperty("position")?(this.positions[a*3]=c.position[0],this.positions[a*3+1]=c.position[1],this.positions[a*3+2]=c.position[2]):(this.positions[a*3+0]=(Math.random()-.5)*2*200,this.positions[a*3+1]=(Math.random()-.5)*2*200,this.positions[a*3+2]=(Math.random()-.5)*2*200),c.hasOwnProperty("color"))a==0&&console.log("NODE COLOR:",c.color),this.colors[a*4+0]=c.color[0],this.colors[a*4+1]=c.color[1],this.colors[a*4+2]=c.color[2],c.color.length>3?this.colors[a*4+3]=c.color[3]:this.colors[a*4+3]=1;else{let u=o(a);this.colors[a*4+0]=u[0],this.colors[a*4+1]=u[1],this.colors[a*4+2]=u[2],u.length>3?this.colors[a*4+3]=u[3]:this.colors[a*4+3]=1}c.hasOwnProperty("size")?this.sizes[a]=c.size:this.sizes[a]=1,c.hasOwnProperty("outlineColor")?(this.outlineColors[a*4+0]=c.outlineColor[0],this.outlineColors[a*4+1]=c.outlineColor[1],this.outlineColors[a*4+2]=c.outlineColor[2],c.outlineColor.length>3?this.outlineColors[a*4+3]=c.outlineColor[3]:this.outlineColors[a*4+3]=1):(this.outlineColors[a*4+0]=1,this.outlineColors[a*4+1]=1,this.outlineColors[a*4+2]=1,this.outlineColors[a*4+3]=1),c.hasOwnProperty("outlineWidth")?this.outlineWidths[a]=c.outlineWidth:this.outlineWidths[a]=0;let h=new Ii(c,c.ID,a,this);this.index2Node[a]=h,this.nodes[c.ID]=h}for(let a=0;a<n.length;a++){const c=n[a];let h=this.ID2index[c.source],u=this.ID2index[c.target],l=this.index2Node[h],s=this.index2Node[u];l.neighbors.push(s),s.neighbors.push(l),l.edges.push(a),s.edges.push(a)}}get nodeCount(){return this.index2Node.length}updateEdgePositions(){this.edgePositions==null&&(this.edgePositions=new Float32Array(3*this.indexedEdges.length));for(let e=0;e<this.indexedEdges.length/2;e++){let n=this.indexedEdges[e*2],r=this.indexedEdges[e*2+1];this.edgePositions[e*2*3]=this.positions[n*3],this.edgePositions[e*2*3+1]=this.positions[n*3+1],this.edgePositions[e*2*3+2]=this.positions[n*3+2],this.edgePositions[(e*2+1)*3]=this.positions[r*3],this.edgePositions[(e*2+1)*3+1]=this.positions[r*3+1],this.edgePositions[(e*2+1)*3+2]=this.positions[r*3+2]}}updateEdgeColors(e){this.edgeColors==null&&(this.edgeColors=new Float32Array(4*this.indexedEdges.length)),typeof e>"u"&&(e=!0);for(let n=0;n<this.indexedEdges.length/2;n++){let r=this.indexedEdges[n*2],i=this.indexedEdges[n*2+1];this.edgeColors[n*2*4]=this.colors[r*4],this.edgeColors[n*2*4+1]=this.colors[r*4+1],this.edgeColors[n*2*4+2]=this.colors[r*4+2],this.edgeColors[(n*2+1)*4]=this.colors[i*4],this.edgeColors[(n*2+1)*4+1]=this.colors[i*4+1],this.edgeColors[(n*2+1)*4+2]=this.colors[i*4+2],e&&(this.edgeColors[n*2*4+3]=this.colors[r*4+3],this.edgeColors[(n*2+1)*4+3]=this.colors[i*4+3])}}updateEdgeSizes(){this.edgeSizes==null&&(this.edgeSizes=new Float32Array(this.indexedEdges.length));for(let e=0;e<this.indexedEdges.length/2;e++){let n=this.indexedEdges[e*2],r=this.indexedEdges[e*2+1];this.edgeSizes[e*2]=this.sizes[n],this.edgeSizes[e*2+1]=this.sizes[r]}}updateEdgeOpacity(e){this.edgeColors==null&&(this.edgeColors=new Float32Array(4*this.indexedEdges.length));for(let n=0;n<this.indexedEdges.length/2;n++){let r=this.indexedEdges[n*2],i=this.indexedEdges[n*2+1];this.edgeColors[n*2*4+3]=this.colors[r*4+3],this.edgeColors[(n*2+1)*4+3]=this.colors[i*4+3]}}}function ki(t,e){let n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null;for(let i=0;i<n.length;++i){try{r=t.getContext(n[i],e)}catch{}if(r)break}return r}function he(t,e,n){let r;return r=t.createShader(n),t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log("ERROR with script: ",e),console.log(t.getShaderInfoLog(r)),null)}function Oe(t,e,n,r,i){let o=i.createProgram();if(i.attachShader(o,t),i.attachShader(o,e),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS)){alert("Shader Compilation Error."+i.getProgramInfoLog(o));return}if(this.ID=o,this.uniforms=new Object,this.attributes=new Object,n)for(let a=0;a<n.length;a++)this.uniforms[n[a]]=i.getUniformLocation(this.ID,n[a]);if(this.attributes.enable=function(a){i.enableVertexAttribArray(this[a])},this.attributes.disable=function(a){i.disableVertexAttribArray(this[a])},r)for(let a=0;a<r.length;a++)this.attributes[r[a]]=i.getAttribLocation(this.ID,r[a]);this.use=function(a){a.useProgram(this.ID)}}function Mi(t,e=!0,n=!0){let r=[-1,1,0,-1,-1,0,1,1,0,1,-1,0],i=[0,0,1,0,0,1,0,0,1,0,0,1],o=[0,1,0,1,0,0,1,1,0,0,0,0],a={};return n&&(a.texCoordObject=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.texCoordObject),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW)),e&&(a.normalObject=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.normalObject),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW)),a.vertexObject=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.vertexObject),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),a.numIndices=4,a}function wn(t){return t*Math.PI/180}let Si=t=>{let e=t.split(/\s/);return e.length<2?null:[+e[0],+e[1]]},Ri=t=>{let e=t.split(/\s/);return e.length<3?null:[+e[0],+e[1],+e[2]]},Ni=t=>isNaN(t)?0:+t,Fi=/#([ve]) \"(.+)\" ([sn]|v2|v3)/,zi={s:String,n:Ni,v2:Si,v3:Ri},Oi=t=>{for(;t.lineIndex+1<t.lines.length&&t.lines[t.lineIndex].length==0;)t.lineIndex++;let n=t.lines[t.lineIndex].split(/\s/),r=0;if(n.length==0||n[0].toLowerCase()!="#vertices"||isNaN(n[1])||!Number.isInteger(+n[1]))throw`Malformed xnet data (Reading Vertices Header)[line: ${t.lineIndex}]
	> ${t.lines[t.lineIndex]}`;return r=+n[1],t.lineIndex++,r},Ti=t=>{let e=[];for(;t.lineIndex<t.lines.length;){let r=t.lines[t.lineIndex],i=r.length;if(i==0){t.lineIndex++;continue}if(r[0]=="#")break;var n=r;r[0]=='"'&&r[i-1]=='"'&&(n=r.slice(1,-1)),e.push(n),t.lineIndex++}return e},Di=t=>{for(;t.lineIndex+1<t.lines.length&&t.lines[t.lineIndex].length==0;)t.lineIndex++;let n=t.lines[t.lineIndex].split(/\s/),r=!1,i=!1;if(n.length==0||n[0].toLowerCase()!="#edges")throw`Malformed xnet data (Reading Edges Header)[line: ${t.lineIndex}]
	> ${t.lines[t.lineIndex]}`;return n.forEach(o=>{o.toLowerCase()=="weighted"&&(r=!0),o.toLowerCase()=="nonweighted"&&(r=!1),o.toLowerCase()=="directed"&&(i=!0),o.toLowerCase()=="undirected"&&(i=!1)}),t.lineIndex++,{weighted:r,directed:i}},Pi=t=>{let e=[],n=[];for(;t.lineIndex<t.lines.length;){let r=t.lines[t.lineIndex];if(r.length==0){t.lineIndex++;continue}if(r[0]=="#")break;let o=r.split(/\s/),a=1;if(o.length<2)throw`Malformed xnet data (Reading Edges)[line: ${t.lineIndex}]
	> ${t.lines[t.lineIndex]}`;o.length>2&&(a=+o[2]),e.push([+o[0],+o[1]]),n.push(a),t.lineIndex++}return{edges:e,weights:n}},Qi=t=>{for(;t.lineIndex+1<t.lines.length&&t.lines[t.lineIndex].length==0;)t.lineIndex++;let e=Fi.exec(t.lines[t.lineIndex]);if(e.length!=4)throw`Malformed xnet data [line: ${t.lineIndex}]
	> ${t.lines[t.lineIndex]}`;let n=e[1],r=e[2],i=e[3];return t.lineIndex++,{type:n,key:r,format:i}},Gi=(t,e)=>{let n=[],r=zi[e.format];for(;t.lineIndex<t.lines.length;){let i=t.lines[t.lineIndex],o=i.length;if(o==0){t.lineIndex++;continue}if(i[0]=="#")break;let a=i;a[0]=='"'&&a[o-1]=='"'&&(a=a.slice(1,-1)),n.push(r(a)),t.lineIndex++}return n},Li=t=>{let e={lineIndex:0,lines:t.split(`
`)},n=Oi(e),r=Ti(e),i={nodesCount:n,verticesProperties:{},edgesProperties:{}};if(r.length>0){if(r.length<n)throw`Malformed xnet data [line: ${e.lineIndex}]
	> ${e.lines[e.lineIndex]}`;i.labels=r}let o=Di(e);i.directed=o.directed,i.weighted=o.weighted;let a=Pi(e);i.edges=a.edges,i.weighted&&(i.weights=a.weights);do{for(;e.lineIndex<e.lines.length&&e.lines[e.lineIndex].length==0;)e.lineIndex++;if(!(e.lineIndex<e.lines.length))break;let c=Qi(e),h=Gi(e,c);c.type=="e"?i.edgesProperties[c.key]=h:c.type=="v"&&(i.verticesProperties[c.key]=h)}while(e.lineIndex<e.lines.length);return i};async function Ui(t){let e=await fetch(t).then(n=>n.text());return Li(e)}var Ht="http://www.w3.org/1999/xhtml";const En={svg:"http://www.w3.org/2000/svg",xhtml:Ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),En.hasOwnProperty(e)?{space:En[e],local:t}:t}function Wi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ht&&e.documentElement.namespaceURI===Ht?e.createElement(t):e.createElementNS(n,t)}}function Hi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Jn(t){var e=kt(t);return(e.local?Hi:Wi)(e)}function Yi(){}function sn(t){return t==null?Yi:function(){return this.querySelector(t)}}function qi(t){typeof t!="function"&&(t=sn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,c=r[i]=new Array(a),h,u,l=0;l<a;++l)(h=o[l])&&(u=t.call(h,h.__data__,l,o))&&("__data__"in h&&(u.__data__=h.__data__),c[l]=u);return new ce(r,this._parents)}function Xi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function $i(){return[]}function er(t){return t==null?$i:function(){return this.querySelectorAll(t)}}function ji(t){return function(){return Xi(t.apply(this,arguments))}}function Vi(t){typeof t=="function"?t=ji(t):t=er(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],c=a.length,h,u=0;u<c;++u)(h=a[u])&&(r.push(t.call(h,h.__data__,u,a)),i.push(h));return new ce(r,i)}function tr(t){return function(){return this.matches(t)}}function nr(t){return function(e){return e.matches(t)}}var Zi=Array.prototype.find;function Ki(t){return function(){return Zi.call(this.children,t)}}function Ji(){return this.firstElementChild}function ea(t){return this.select(t==null?Ji:Ki(typeof t=="function"?t:nr(t)))}var ta=Array.prototype.filter;function na(){return Array.from(this.children)}function ra(t){return function(){return ta.call(this.children,t)}}function ia(t){return this.selectAll(t==null?na:ra(typeof t=="function"?t:nr(t)))}function aa(t){typeof t!="function"&&(t=tr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,c=r[i]=[],h,u=0;u<a;++u)(h=o[u])&&t.call(h,h.__data__,u,o)&&c.push(h);return new ce(r,this._parents)}function rr(t){return new Array(t.length)}function oa(){return new ce(this._enter||this._groups.map(rr),this._parents)}function vt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}vt.prototype={constructor:vt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function sa(t){return function(){return t}}function la(t,e,n,r,i,o){for(var a=0,c,h=e.length,u=o.length;a<u;++a)(c=e[a])?(c.__data__=o[a],r[a]=c):n[a]=new vt(t,o[a]);for(;a<h;++a)(c=e[a])&&(i[a]=c)}function fa(t,e,n,r,i,o,a){var c,h,u=new Map,l=e.length,s=o.length,f=new Array(l),b;for(c=0;c<l;++c)(h=e[c])&&(f[c]=b=a.call(h,h.__data__,c,e)+"",u.has(b)?i[c]=h:u.set(b,h));for(c=0;c<s;++c)b=a.call(t,o[c],c,o)+"",(h=u.get(b))?(r[c]=h,h.__data__=o[c],u.delete(b)):n[c]=new vt(t,o[c]);for(c=0;c<l;++c)(h=e[c])&&u.get(f[c])===h&&(i[c]=h)}function ca(t){return t.__data__}function ua(t,e){if(!arguments.length)return Array.from(this,ca);var n=e?fa:la,r=this._parents,i=this._groups;typeof t!="function"&&(t=sa(t));for(var o=i.length,a=new Array(o),c=new Array(o),h=new Array(o),u=0;u<o;++u){var l=r[u],s=i[u],f=s.length,b=ha(t.call(l,l&&l.__data__,u,r)),m=b.length,g=c[u]=new Array(m),_=a[u]=new Array(m),x=h[u]=new Array(f);n(l,s,g,_,x,b,e);for(var C=0,E=0,A,y;C<m;++C)if(A=g[C]){for(C>=E&&(E=C+1);!(y=_[E])&&++E<m;);A._next=y||null}}return a=new ce(a,r),a._enter=c,a._exit=h,a}function ha(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function da(){return new ce(this._exit||this._groups.map(rr),this._parents)}function ga(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ba(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),c=new Array(i),h=0;h<a;++h)for(var u=n[h],l=r[h],s=u.length,f=c[h]=new Array(s),b,m=0;m<s;++m)(b=u[m]||l[m])&&(f[m]=b);for(;h<i;++h)c[h]=n[h];return new ce(c,this._parents)}function pa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Aa(t){t||(t=ma);function e(s,f){return s&&f?t(s.__data__,f.__data__):!s-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],c=a.length,h=i[o]=new Array(c),u,l=0;l<c;++l)(u=a[l])&&(h[l]=u);h.sort(e)}return new ce(i,this._parents).order()}function ma(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function va(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ya(){return Array.from(this)}function _a(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function xa(){let t=0;for(const e of this)++t;return t}function wa(){return!this.node()}function Ea(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,c;o<a;++o)(c=i[o])&&t.call(c,c.__data__,o,i);return this}function Ca(t){return function(){this.removeAttribute(t)}}function Ia(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ba(t,e){return function(){this.setAttribute(t,e)}}function ka(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ma(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Sa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ra(t,e){var n=kt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ia:Ca:typeof e=="function"?n.local?Sa:Ma:n.local?ka:Ba)(n,e))}function ir(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Na(t){return function(){this.style.removeProperty(t)}}function Fa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function za(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Oa(t,e,n){return arguments.length>1?this.each((e==null?Na:typeof e=="function"?za:Fa)(t,e,n??"")):Ge(this.node(),t)}function Ge(t,e){return t.style.getPropertyValue(e)||ir(t).getComputedStyle(t,null).getPropertyValue(e)}function Ta(t){return function(){delete this[t]}}function Da(t,e){return function(){this[t]=e}}function Pa(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Qa(t,e){return arguments.length>1?this.each((e==null?Ta:typeof e=="function"?Pa:Da)(t,e)):this.node()[t]}function ar(t){return t.trim().split(/^|\s+/)}function ln(t){return t.classList||new or(t)}function or(t){this._node=t,this._names=ar(t.getAttribute("class")||"")}or.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function sr(t,e){for(var n=ln(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function lr(t,e){for(var n=ln(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ga(t){return function(){sr(this,t)}}function La(t){return function(){lr(this,t)}}function Ua(t,e){return function(){(e.apply(this,arguments)?sr:lr)(this,t)}}function Wa(t,e){var n=ar(t+"");if(arguments.length<2){for(var r=ln(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ua:e?Ga:La)(n,e))}function Ha(){this.textContent=""}function Ya(t){return function(){this.textContent=t}}function qa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Xa(t){return arguments.length?this.each(t==null?Ha:(typeof t=="function"?qa:Ya)(t)):this.node().textContent}function $a(){this.innerHTML=""}function ja(t){return function(){this.innerHTML=t}}function Va(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Za(t){return arguments.length?this.each(t==null?$a:(typeof t=="function"?Va:ja)(t)):this.node().innerHTML}function Ka(){this.nextSibling&&this.parentNode.appendChild(this)}function Ja(){return this.each(Ka)}function eo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function to(){return this.each(eo)}function no(t){var e=typeof t=="function"?t:Jn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ro(){return null}function io(t,e){var n=typeof t=="function"?t:Jn(t),r=e==null?ro:typeof e=="function"?e:sn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ao(){var t=this.parentNode;t&&t.removeChild(this)}function oo(){return this.each(ao)}function so(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lo(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fo(t){return this.select(t?lo:so)}function co(t){return arguments.length?this.property("__data__",t):this.node().__data__}function uo(t){return function(e){t.call(this,e,this.__data__)}}function ho(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function go(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function bo(t,e,n){return function(){var r=this.__on,i,o=uo(e);if(r){for(var a=0,c=r.length;a<c;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function po(t,e,n){var r=ho(t+""),i,o=r.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var h=0,u=c.length,l;h<u;++h)for(i=0,l=c[h];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(c=e?bo:go,i=0;i<o;++i)this.each(c(r[i],e,n));return this}function fr(t,e,n){var r=ir(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ao(t,e){return function(){return fr(this,t,e)}}function mo(t,e){return function(){return fr(this,t,e.apply(this,arguments))}}function vo(t,e){return this.each((typeof e=="function"?mo:Ao)(t,e))}function*yo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var cr=[null];function ce(t,e){this._groups=t,this._parents=e}function tt(){return new ce([[document.documentElement]],cr)}function _o(){return this}ce.prototype=tt.prototype={constructor:ce,select:qi,selectAll:Vi,selectChild:ea,selectChildren:ia,filter:aa,data:ua,enter:oa,exit:da,join:ga,merge:ba,selection:_o,order:pa,sort:Aa,call:va,nodes:ya,node:_a,size:xa,empty:wa,each:Ea,attr:Ra,style:Oa,property:Qa,classed:Wa,text:Xa,html:Za,raise:Ja,lower:to,append:no,insert:io,remove:oo,clone:fo,datum:co,on:po,dispatch:vo,[Symbol.iterator]:yo};function K(t){return typeof t=="string"?new ce([[document.querySelector(t)]],[document.documentElement]):new ce([[t]],cr)}function xo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ie(t,e){if(t=xo(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}class wo{constructor(e,{FPS:n=60,throttle:r=!0,maxQueueLength:i=10}){this.helios=e,this.needsRender=!1,this.needsUpdateNodesGeometry=!1,this.needsUpdateEdgesGeometry=!1,this._FPS=n,this._throttle=r,this._started=!1,this._paused=!0,this._lastFPS=0,this._averageFPS=0,this._tasks={},this._executionCount=0,this._lastTimestamp=null,this._currentTimestamp=null,this._lastExecutionTimestamp=null,this._lastRequestFrameID=0,this._timeout=null,this._times=[],this._lastRepeatInterval=0,this._shouldCleanup=!1}FPS(e){return e===void 0?this.FPS:(this.FPS=e,this)}schedule({name:e="default",callback:n=null,delay:r=0,repeat:i=!1,maxRepeatCount:o=1/0,maxRepeatTime:a=1/0,repeatInterval:c=0,synchronized:h=!0,immediateUpdates:u=!1,updateNodesGeometry:l=!1,updateEdgesGeometry:s=!1,redraw:f=!0,replace:b=!0}){let m={callback:n,delay:r,repeat:i,maxRepeatCount:o,maxRepeatTime:a,repeatInterval:c,synchronized:h,immediateUpdates:u,updateNodesGeometry:l,updateEdgesGeometry:s,redraw:f,replace:b,executionCount:0,lastTimestamp:window.performance.now(),lastExecutionTime:0,shouldBeRemoved:!1,cancel:function(){this.shouldBeRemoved=!0,this.synchronized||clearTimeout(this._timeout)}};return e in this._tasks||(this._tasks[e]=[]),b&&this._clearTask(e),h||this.runAsyncTask(m,m.delay),this._addTaskToQueue(m,e),this._paused&&this._started&&this._updateTimeout(),this}runAsyncTask(e,n=0){e.timeout=setTimeout(()=>{if(e.shouldBeRemoved)return;let r=window.performance.now(),i=r-e.lastTimestamp;if(e.callback?.(i,e),e.executionCount+=1,e.immediateUpdates?this._updateHelios(e.needsRender,e.needsUpdateNodesGeometry,e.needsUpdateEdgesGeometry):(e.redraw&&(this.needsRender=!0),e.updateNodesGeometry&&(this.needsUpdateNodesGeometry=!0),e.updateEdgesGeometry&&(this.needsUpdateEdgesGeometry=!0)),e.repeat){let o=window.performance.now();e.lastExecutionTime=o-r,e.lastTimestamp=r;let a=e.repeatInterval-(o-r);a<0&&(a=0),e.executionCount>=e.maxRepeatCount?e.shouldBeRemoved=!0:this.runAsyncTask(e,a)}else e.shouldBeRemoved=!0;this._started&&this._paused&&this._updateTimeout()},n)}runSyncTasks(){if(this._shouldCleanup)return;let e=window.performance.now();for(let n of Object.keys(this._tasks).sort()){let r=this._tasks[n];for(let i=0;i<r.length;i++){if((r[i].synchronized||!r[i].immediateUpdates)&&(r[i].redraw&&(this.needsRender=!0),r[i].updateNodesGeometry&&(this.needsUpdateNodesGeometry=!0),r[i].updateEdgesGeometry&&(this.needsUpdateEdgesGeometry=!0)),!r[i].shouldBeRemoved){let o=window.performance.now(),a=o-r[i].lastTimestamp+r[i].lastExecutionTime;a<0&&(a=0);let c=!1;if(r[i].executionCount==0?a>=r[i].delay&&(c=!0):a>=r[i].repeatInterval&&(c=!0),c){if(r[i].callback?.(a,r[i]),r[i]===void 0)break;if(r[i].executionCount+=1,r[i].repeat&&r[i].executionCount<r[i].maxRepeatCount){let h=window.performance.now();r[i].lastExecutionTime=h-o,r[i].lastTimestamp=o}else r[i].shouldBeRemoved=!0}}r[i].shouldBeRemoved&&(r.splice(i,1),i--)}r.length==0&&delete this._tasks[n]}this._lastTimestamp=e,this._updateHelios(this.needsRender,this.needsUpdateNodesGeometry,this.needsUpdateEdgesGeometry,!0)}_updateHelios(e,n,r,i){e===void 0&&(e=this.needsRender),n===void 0&&(n=this.needsUpdateNodesGeometry),r===void 0&&(r=this.needsUpdateEdgesGeometry),n&&(this.helios.updateNodesGeometry(),this.needsUpdateNodesGeometry=!1),r&&(this.helios.updateEdgesGeometry(),this.needsUpdateEdgesGeometry=!1),cancelAnimationFrame(this.lastRequestFrameID),this.lastRequestFrameID=requestAnimationFrame(()=>{if(this._shouldCleanup)return;const o=performance.now();for(;this._times.length>0&&this._times[0]<=o-1e3;)this._times.shift();this._times.push(o),this._averageFPS=this._times.length,e&&(this.helios.redraw(),this.needsRender=!1),i&&(this._lastExecutionTimestamp=window.performance.now(),this._updateTimeout())})}_addTaskToQueue(e,n){let r=this._tasks[n];r.push(e),r.length>this.maxQueueLength&&(r[0].timeout&&(r[0].shouldBeRemoved=!0,clearTimeout(e.taskQueue[0])),r.shift(),console.warn(`One task was discarded because of too many tasks in the ${n} queue. (maxQueueLength = ${this.maxQueueLength})`))}_clearTask(e){if(e in this._tasks){let n=this._tasks[e];for(let r=0;r<n.length;r++){let i=n[r];i.timeout&&(i.shouldBeRemoved=!0,clearTimeout(i.timeout))}n.length=0}}unschedule(e){return e in this._tasks&&(this._clearTask(e),delete this._tasks[e]),this._updateTimeout(),this}start(){return this._started=!0,this._updateTimeout(),this}stop(){return this._shouldCleanup=!0,clearTimeout(this._timeout),this.paused=!1,this.started=!1,this._lastTimestamp=null,this._lastExecutionTime=0,this}_updateTimeout(){if(clearTimeout(this._timeout),this._started)if(Object.keys(this._tasks).length===0)this.paused=!0;else{this.paused=!1;let e=0,n=window.performance.now();this._lastTimestamp!=null&&this._throttle&&(e=1e3/this._FPS-(n-this._lastTimestamp),e<0&&(e=0)),this._lastFPS=1e3/(n-this._lastTimestamp),this._timeout=setTimeout(()=>{this.runSyncTasks()},e)}}}var Eo={value:()=>{}};function fn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new gt(n)}function gt(t){this._=t}function Co(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}gt.prototype=fn.prototype={constructor:gt,on:function(t,e){var n=this._,r=Co(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Io(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Cn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Cn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new gt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Io(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Cn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Eo,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Yt={capture:!0,passive:!1};function qt(t){t.preventDefault(),t.stopImmediatePropagation()}function Bo(t){var e=t.document.documentElement,n=K(t).on("dragstart.drag",qt,Yt);"onselectstart"in e?n.on("selectstart.drag",qt,Yt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ko(t,e){var n=t.document.documentElement,r=K(t).on("dragstart.drag",null);e&&(r.on("click.drag",qt,Yt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Mt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function cn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function He(){}var Se=.7,Le=1/Se,Te="\\s*([+-]?\\d+)\\s*",Ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mo=/^#([0-9a-f]{3,8})$/,So=new RegExp(`^rgb\\(${Te},${Te},${Te}\\)$`),Ro=new RegExp(`^rgb\\(${Ae},${Ae},${Ae}\\)$`),No=new RegExp(`^rgba\\(${Te},${Te},${Te},${Ke}\\)$`),Fo=new RegExp(`^rgba\\(${Ae},${Ae},${Ae},${Ke}\\)$`),zo=new RegExp(`^hsl\\(${Ke},${Ae},${Ae}\\)$`),Oo=new RegExp(`^hsla\\(${Ke},${Ae},${Ae},${Ke}\\)$`),In={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mt(He,Re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Bn,formatHex:Bn,formatHex8:To,formatHsl:Do,formatRgb:kn,toString:kn});function Bn(){return this.rgb().formatHex()}function To(){return this.rgb().formatHex8()}function Do(){return hr(this).formatHsl()}function kn(){return this.rgb().formatRgb()}function Re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Mo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Mn(e):n===3?new ee(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?at(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?at(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=So.exec(t))?new ee(e[1],e[2],e[3],1):(e=Ro.exec(t))?new ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=No.exec(t))?at(e[1],e[2],e[3],e[4]):(e=Fo.exec(t))?at(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zo.exec(t))?Nn(e[1],e[2]/100,e[3]/100,1):(e=Oo.exec(t))?Nn(e[1],e[2]/100,e[3]/100,e[4]):In.hasOwnProperty(t)?Mn(In[t]):t==="transparent"?new ee(NaN,NaN,NaN,0):null}function Mn(t){return new ee(t>>16&255,t>>8&255,t&255,1)}function at(t,e,n,r){return r<=0&&(t=e=n=NaN),new ee(t,e,n,r)}function ur(t){return t instanceof He||(t=Re(t)),t?(t=t.rgb(),new ee(t.r,t.g,t.b,t.opacity)):new ee}function xe(t,e,n,r){return arguments.length===1?ur(t):new ee(t,e,n,r??1)}function ee(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Mt(ee,xe,cn(He,{brighter(t){return t=t==null?Le:Math.pow(Le,t),new ee(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Se:Math.pow(Se,t),new ee(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ee(ke(this.r),ke(this.g),ke(this.b),yt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sn,formatHex:Sn,formatHex8:Po,formatRgb:Rn,toString:Rn}));function Sn(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function Po(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rn(){const t=yt(this.opacity);return`${t===1?"rgb(":"rgba("}${ke(this.r)}, ${ke(this.g)}, ${ke(this.b)}${t===1?")":`, ${t})`}`}function yt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ke(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Be(t){return t=ke(t),(t<16?"0":"")+t.toString(16)}function Nn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new de(t,e,n,r)}function hr(t){if(t instanceof de)return new de(t.h,t.s,t.l,t.opacity);if(t instanceof He||(t=Re(t)),!t)return new de;if(t instanceof de)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,c=o-i,h=(o+i)/2;return c?(e===o?a=(n-r)/c+(n<r)*6:n===o?a=(r-e)/c+2:a=(e-n)/c+4,c/=h<.5?o+i:2-o-i,a*=60):c=h>0&&h<1?0:a,new de(a,c,h,t.opacity)}function Qo(t,e,n,r){return arguments.length===1?hr(t):new de(t,e,n,r??1)}function de(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Mt(de,Qo,cn(He,{brighter(t){return t=t==null?Le:Math.pow(Le,t),new de(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Se:Math.pow(Se,t),new de(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ee(Gt(t>=240?t-240:t+120,i,r),Gt(t,i,r),Gt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new de(Fn(this.h),ot(this.s),ot(this.l),yt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yt(this.opacity);return`${t===1?"hsl(":"hsla("}${Fn(this.h)}, ${ot(this.s)*100}%, ${ot(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Fn(t){return t=(t||0)%360,t<0?t+360:t}function ot(t){return Math.max(0,Math.min(1,t||0))}function Gt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Go=Math.PI/180,Lo=180/Math.PI;var dr=-.14861,un=1.78277,hn=-.29227,St=-.90649,Je=1.97294,zn=Je*St,On=Je*un,Tn=un*hn-St*dr;function Uo(t){if(t instanceof Me)return new Me(t.h,t.s,t.l,t.opacity);t instanceof ee||(t=ur(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Tn*r+zn*e-On*n)/(Tn+zn-On),o=r-i,a=(Je*(n-i)-hn*o)/St,c=Math.sqrt(a*a+o*o)/(Je*i*(1-i)),h=c?Math.atan2(a,o)*Lo-120:NaN;return new Me(h<0?h+360:h,c,i,t.opacity)}function me(t,e,n,r){return arguments.length===1?Uo(t):new Me(t,e,n,r??1)}function Me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Mt(Me,me,cn(He,{brighter(t){return t=t==null?Le:Math.pow(Le,t),new Me(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Se:Math.pow(Se,t),new Me(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Go,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ee(255*(e+n*(dr*r+un*i)),255*(e+n*(hn*r+St*i)),255*(e+n*(Je*r)),this.opacity)}}));function Wo(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Ho(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,c=r<e-1?t[r+2]:2*o-i;return Wo((n-r/e)*e,a,i,o,c)}}const Rt=t=>()=>t;function gr(t,e){return function(n){return t+n*e}}function Yo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function qo(t,e){var n=e-t;return n?gr(t,n>180||n<-180?n-360*Math.round(n/360):n):Rt(isNaN(t)?e:t)}function Xo(t){return(t=+t)==1?De:function(e,n){return n-e?Yo(e,n,t):Rt(isNaN(e)?n:e)}}function De(t,e){var n=e-t;return n?gr(t,n):Rt(isNaN(t)?e:t)}const _t=function t(e){var n=Xo(e);function r(i,o){var a=n((i=xe(i)).r,(o=xe(o)).r),c=n(i.g,o.g),h=n(i.b,o.b),u=De(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=c(l),i.b=h(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function $o(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,c;for(a=0;a<n;++a)c=xe(e[a]),r[a]=c.r||0,i[a]=c.g||0,o[a]=c.b||0;return r=t(r),i=t(i),o=t(o),c.opacity=1,function(h){return c.r=r(h),c.g=i(h),c.b=o(h),c+""}}}var jo=$o(Ho);function Vo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Zo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ko(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=dn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(c){for(a=0;a<r;++a)o[a]=i[a](c);return o}}function Jo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function pe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function es(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=dn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Xt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lt=new RegExp(Xt.source,"g");function ts(t){return function(){return t}}function ns(t){return function(e){return t(e)+""}}function br(t,e){var n=Xt.lastIndex=Lt.lastIndex=0,r,i,o,a=-1,c=[],h=[];for(t=t+"",e=e+"";(r=Xt.exec(t))&&(i=Lt.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),c[a]?c[a]+=o:c[++a]=o),(r=r[0])===(i=i[0])?c[a]?c[a]+=i:c[++a]=i:(c[++a]=null,h.push({i:a,x:pe(r,i)})),n=Lt.lastIndex;return n<e.length&&(o=e.slice(n),c[a]?c[a]+=o:c[++a]=o),c.length<2?h[0]?ns(h[0].x):ts(e):(e=h.length,function(u){for(var l=0,s;l<e;++l)c[(s=h[l]).i]=s.x(u);return c.join("")})}function dn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Rt(e):(n==="number"?pe:n==="string"?(r=Re(e))?(e=r,_t):br:e instanceof Re?_t:e instanceof Date?Jo:Zo(e)?Vo:Array.isArray(e)?Ko:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?es:pe)(t,e)}function rs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Dn=180/Math.PI,$t={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pr(t,e,n,r,i,o){var a,c,h;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(h=t*n+e*r)&&(n-=t*h,r-=e*h),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,h/=c),t*r<e*n&&(t=-t,e=-e,h=-h,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Dn,skewX:Math.atan(h)*Dn,scaleX:a,scaleY:c}}var st;function is(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?$t:pr(e.a,e.b,e.c,e.d,e.e,e.f)}function as(t){return t==null||(st||(st=document.createElementNS("http://www.w3.org/2000/svg","g")),st.setAttribute("transform",t),!(t=st.transform.baseVal.consolidate()))?$t:(t=t.matrix,pr(t.a,t.b,t.c,t.d,t.e,t.f))}function Ar(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,s,f,b,m){if(u!==s||l!==f){var g=b.push("translate(",null,e,null,n);m.push({i:g-4,x:pe(u,s)},{i:g-2,x:pe(l,f)})}else(s||f)&&b.push("translate("+s+e+f+n)}function a(u,l,s,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:s.push(i(s)+"rotate(",null,r)-2,x:pe(u,l)})):l&&s.push(i(s)+"rotate("+l+r)}function c(u,l,s,f){u!==l?f.push({i:s.push(i(s)+"skewX(",null,r)-2,x:pe(u,l)}):l&&s.push(i(s)+"skewX("+l+r)}function h(u,l,s,f,b,m){if(u!==s||l!==f){var g=b.push(i(b)+"scale(",null,",",null,")");m.push({i:g-4,x:pe(u,s)},{i:g-2,x:pe(l,f)})}else(s!==1||f!==1)&&b.push(i(b)+"scale("+s+","+f+")")}return function(u,l){var s=[],f=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,s,f),a(u.rotate,l.rotate,s,f),c(u.skewX,l.skewX,s,f),h(u.scaleX,u.scaleY,l.scaleX,l.scaleY,s,f),u=l=null,function(b){for(var m=-1,g=f.length,_;++m<g;)s[(_=f[m]).i]=_.x(b);return s.join("")}}}var os=Ar(is,"px, ","px)","deg)"),ss=Ar(as,", ",")",")"),ls=1e-12;function Pn(t){return((t=Math.exp(t))+1/t)/2}function fs(t){return((t=Math.exp(t))-1/t)/2}function cs(t){return((t=Math.exp(2*t))-1)/(t+1)}const us=function t(e,n,r){function i(o,a){var c=o[0],h=o[1],u=o[2],l=a[0],s=a[1],f=a[2],b=l-c,m=s-h,g=b*b+m*m,_,x;if(g<ls)x=Math.log(f/u)/e,_=function(k){return[c+k*b,h+k*m,u*Math.exp(e*k*x)]};else{var C=Math.sqrt(g),E=(f*f-u*u+r*g)/(2*u*n*C),A=(f*f-u*u-r*g)/(2*f*n*C),y=Math.log(Math.sqrt(E*E+1)-E),v=Math.log(Math.sqrt(A*A+1)-A);x=(v-y)/e,_=function(k){var w=k*x,S=Pn(y),T=u/(n*C)*(S*cs(e*w+y)-fs(y));return[c+T*b,h+T*m,u*S/Pn(e*w+y)]}}return _.duration=x*1e3*e/Math.SQRT2,_}return i.rho=function(o){var a=Math.max(.001,+o),c=a*a,h=c*c;return t(a,c,h)},i}(Math.SQRT2,2,4);function mr(t){return function e(n){n=+n;function r(i,o){var a=t((i=me(i)).h,(o=me(o)).h),c=De(i.s,o.s),h=De(i.l,o.l),u=De(i.opacity,o.opacity);return function(l){return i.h=a(l),i.s=c(l),i.l=h(Math.pow(l,n)),i.opacity=u(l),i+""}}return r.gamma=e,r}(1)}mr(qo);var gn=mr(De),Ue=0,$e=0,qe=0,vr=1e3,xt,je,wt=0,Ne=0,Nt=0,et=typeof performance=="object"&&performance.now?performance:Date,yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bn(){return Ne||(yr(hs),Ne=et.now()+Nt)}function hs(){Ne=0}function Et(){this._call=this._time=this._next=null}Et.prototype=_r.prototype={constructor:Et,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?bn():+n)+(e==null?0:+e),!this._next&&je!==this&&(je?je._next=this:xt=this,je=this),this._call=t,this._time=n,jt()},stop:function(){this._call&&(this._call=null,this._time=1/0,jt())}};function _r(t,e,n){var r=new Et;return r.restart(t,e,n),r}function ds(){bn(),++Ue;for(var t=xt,e;t;)(e=Ne-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ue}function Qn(){Ne=(wt=et.now())+Nt,Ue=$e=0;try{ds()}finally{Ue=0,bs(),Ne=0}}function gs(){var t=et.now(),e=t-wt;e>vr&&(Nt-=e,wt=t)}function bs(){for(var t,e=xt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xt=n);je=t,jt(r)}function jt(t){if(!Ue){$e&&($e=clearTimeout($e));var e=t-Ne;e>24?(t<1/0&&($e=setTimeout(Qn,t-et.now()-Nt)),qe&&(qe=clearInterval(qe))):(qe||(wt=et.now(),qe=setInterval(gs,vr)),Ue=1,yr(Qn))}}function Gn(t,e,n){var r=new Et;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ps=fn("start","end","cancel","interrupt"),As=[],xr=0,Ln=1,Vt=2,bt=3,Un=4,Zt=5,pt=6;function Ft(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;ms(t,n,{name:e,index:r,group:i,on:ps,tween:As,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:xr})}function pn(t,e){var n=ge(t,e);if(n.state>xr)throw new Error("too late; already scheduled");return n}function ve(t,e){var n=ge(t,e);if(n.state>bt)throw new Error("too late; already running");return n}function ge(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ms(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=_r(o,0,n.time);function o(u){n.state=Ln,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var l,s,f,b;if(n.state!==Ln)return h();for(l in r)if(b=r[l],b.name===n.name){if(b.state===bt)return Gn(a);b.state===Un?(b.state=pt,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[l]):+l<e&&(b.state=pt,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[l])}if(Gn(function(){n.state===bt&&(n.state=Un,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=Vt,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vt){for(n.state=bt,i=new Array(f=n.tween.length),l=0,s=-1;l<f;++l)(b=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++s]=b);i.length=s+1}}function c(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(h),n.state=Zt,1),s=-1,f=i.length;++s<f;)i[s].call(t,l);n.state===Zt&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){n.state=pt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function At(t,e){var n=t.__transition,r,i,o=!0,a;if(!!n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Vt&&r.state<Zt,r.state=pt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function vs(t){return this.each(function(){At(this,t)})}function ys(t,e){var n,r;return function(){var i=ve(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,c=r.length;a<c;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function _s(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ve(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var c={name:e,value:n},h=0,u=i.length;h<u;++h)if(i[h].name===e){i[h]=c;break}h===u&&i.push(c)}o.tween=i}}function xs(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ge(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?ys:_s)(n,t,e))}function An(t,e,n){var r=t._id;return t.each(function(){var i=ve(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ge(i,r).value[e]}}function wr(t,e){var n;return(typeof e=="number"?pe:e instanceof Re?_t:(n=Re(e))?(e=n,_t):br)(t,e)}function ws(t){return function(){this.removeAttribute(t)}}function Es(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cs(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Is(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Bs(t,e,n){var r,i,o;return function(){var a,c=n(this),h;return c==null?void this.removeAttribute(t):(a=this.getAttribute(t),h=c+"",a===h?null:a===r&&h===i?o:(i=h,o=e(r=a,c)))}}function ks(t,e,n){var r,i,o;return function(){var a,c=n(this),h;return c==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),h=c+"",a===h?null:a===r&&h===i?o:(i=h,o=e(r=a,c)))}}function Ms(t,e){var n=kt(t),r=n==="transform"?ss:wr;return this.attrTween(t,typeof e=="function"?(n.local?ks:Bs)(n,r,An(this,"attr."+t,e)):e==null?(n.local?Es:ws)(n):(n.local?Is:Cs)(n,r,e))}function Ss(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Rs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ns(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Rs(t,o)),n}return i._value=e,i}function Fs(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Ss(t,o)),n}return i._value=e,i}function zs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=kt(t);return this.tween(n,(r.local?Ns:Fs)(r,e))}function Os(t,e){return function(){pn(this,t).delay=+e.apply(this,arguments)}}function Ts(t,e){return e=+e,function(){pn(this,t).delay=e}}function Ds(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Os:Ts)(e,t)):ge(this.node(),e).delay}function Ps(t,e){return function(){ve(this,t).duration=+e.apply(this,arguments)}}function Qs(t,e){return e=+e,function(){ve(this,t).duration=e}}function Gs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ps:Qs)(e,t)):ge(this.node(),e).duration}function Ls(t,e){if(typeof e!="function")throw new Error;return function(){ve(this,t).ease=e}}function Us(t){var e=this._id;return arguments.length?this.each(Ls(e,t)):ge(this.node(),e).ease}function Ws(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ve(this,t).ease=n}}function Hs(t){if(typeof t!="function")throw new Error;return this.each(Ws(this._id,t))}function Ys(t){typeof t!="function"&&(t=tr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,c=r[i]=[],h,u=0;u<a;++u)(h=o[u])&&t.call(h,h.__data__,u,o)&&c.push(h);return new Ee(r,this._parents,this._name,this._id)}function qs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),c=0;c<o;++c)for(var h=e[c],u=n[c],l=h.length,s=a[c]=new Array(l),f,b=0;b<l;++b)(f=h[b]||u[b])&&(s[b]=f);for(;c<r;++c)a[c]=e[c];return new Ee(a,this._parents,this._name,this._id)}function Xs(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function $s(t,e,n){var r,i,o=Xs(e)?pn:ve;return function(){var a=o(this,t),c=a.on;c!==r&&(i=(r=c).copy()).on(e,n),a.on=i}}function js(t,e){var n=this._id;return arguments.length<2?ge(this.node(),n).on.on(t):this.each($s(n,t,e))}function Vs(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Zs(){return this.on("end.remove",Vs(this._id))}function Ks(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var c=r[a],h=c.length,u=o[a]=new Array(h),l,s,f=0;f<h;++f)(l=c[f])&&(s=t.call(l,l.__data__,f,c))&&("__data__"in l&&(s.__data__=l.__data__),u[f]=s,Ft(u[f],e,n,f,u,ge(l,n)));return new Ee(o,this._parents,e,n)}function Js(t){var e=this._name,n=this._id;typeof t!="function"&&(t=er(t));for(var r=this._groups,i=r.length,o=[],a=[],c=0;c<i;++c)for(var h=r[c],u=h.length,l,s=0;s<u;++s)if(l=h[s]){for(var f=t.call(l,l.__data__,s,h),b,m=ge(l,n),g=0,_=f.length;g<_;++g)(b=f[g])&&Ft(b,e,n,g,f,m);o.push(f),a.push(l)}return new Ee(o,a,e,n)}var el=tt.prototype.constructor;function tl(){return new el(this._groups,this._parents)}function nl(t,e){var n,r,i;return function(){var o=Ge(this,t),a=(this.style.removeProperty(t),Ge(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Er(t){return function(){this.style.removeProperty(t)}}function rl(t,e,n){var r,i=n+"",o;return function(){var a=Ge(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function il(t,e,n){var r,i,o;return function(){var a=Ge(this,t),c=n(this),h=c+"";return c==null&&(h=c=(this.style.removeProperty(t),Ge(this,t))),a===h?null:a===r&&h===i?o:(i=h,o=e(r=a,c))}}function al(t,e){var n,r,i,o="style."+e,a="end."+o,c;return function(){var h=ve(this,t),u=h.on,l=h.value[o]==null?c||(c=Er(e)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(a,i=l),h.on=r}}function ol(t,e,n){var r=(t+="")=="transform"?os:wr;return e==null?this.styleTween(t,nl(t,r)).on("end.style."+t,Er(t)):typeof e=="function"?this.styleTween(t,il(t,r,An(this,"style."+t,e))).each(al(this._id,t)):this.styleTween(t,rl(t,r,e),n).on("end.style."+t,null)}function sl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ll(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&sl(t,a,n)),r}return o._value=e,o}function fl(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ll(t,e,n??""))}function cl(t){return function(){this.textContent=t}}function ul(t){return function(){var e=t(this);this.textContent=e??""}}function hl(t){return this.tween("text",typeof t=="function"?ul(An(this,"text",t)):cl(t==null?"":t+""))}function dl(t){return function(e){this.textContent=t.call(this,e)}}function gl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&dl(i)),e}return r._value=t,r}function bl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,gl(t))}function pl(){for(var t=this._name,e=this._id,n=Cr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],c=a.length,h,u=0;u<c;++u)if(h=a[u]){var l=ge(h,e);Ft(h,t,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ee(r,this._parents,t,n)}function Al(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var c={value:a},h={value:function(){--i===0&&o()}};n.each(function(){var u=ve(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(h)),u.on=e}),i===0&&o()})}var ml=0;function Ee(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Cr(){return++ml}var _e=tt.prototype;Ee.prototype={constructor:Ee,select:Ks,selectAll:Js,selectChild:_e.selectChild,selectChildren:_e.selectChildren,filter:Ys,merge:qs,selection:tl,transition:pl,call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:js,attr:Ms,attrTween:zs,style:ol,styleTween:fl,text:hl,textTween:bl,remove:Zs,tween:xs,delay:Ds,duration:Gs,ease:Us,easeVarying:Hs,end:Al,[Symbol.iterator]:_e[Symbol.iterator]};const vl=t=>+t;function yl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _l={time:null,delay:0,duration:250,ease:yl};function xl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function wl(t){var e,n;t instanceof Ee?(e=t._id,t=t._name):(e=Cr(),(n=_l).time=bn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],c=a.length,h,u=0;u<c;++u)(h=a[u])&&Ft(h,t,e,u,a,n||xl(h,e));return new Ee(r,this._parents,t,e)}tt.prototype.interrupt=vs;tt.prototype.transition=wl;const lt=t=>()=>t;function El(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function we(t,e,n){this.k=t,this.x=e,this.y=n}we.prototype={constructor:we,scale:function(t){return t===1?this:new we(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new we(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ct=new we(1,0,0);we.prototype;function Ut(t){t.stopImmediatePropagation()}function Xe(t){t.preventDefault(),t.stopImmediatePropagation()}function Cl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Il(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Wn(){return this.__zoom||Ct}function Bl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function kl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ml(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Sl(){var t=Cl,e=Il,n=Ml,r=Bl,i=kl,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],c=250,h=us,u=fn("start","zoom","end"),l,s,f,b=500,m=150,g=0,_=10;function x(p){p.property("__zoom",Wn).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",T).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(p,M,d,R){var B=p.selection?p.selection():p;B.property("__zoom",Wn),p!==B?y(p,M,d,R):B.interrupt().each(function(){v(this,arguments).event(R).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},x.scaleBy=function(p,M,d,R){x.scaleTo(p,function(){var B=this.__zoom.k,N=typeof M=="function"?M.apply(this,arguments):M;return B*N},d,R)},x.scaleTo=function(p,M,d,R){x.transform(p,function(){var B=e.apply(this,arguments),N=this.__zoom,F=d==null?A(B):typeof d=="function"?d.apply(this,arguments):d,D=N.invert(F),Q=typeof M=="function"?M.apply(this,arguments):M;return n(E(C(N,Q),F,D),B,a)},d,R)},x.translateBy=function(p,M,d,R){x.transform(p,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof d=="function"?d.apply(this,arguments):d),e.apply(this,arguments),a)},null,R)},x.translateTo=function(p,M,d,R,B){x.transform(p,function(){var N=e.apply(this,arguments),F=this.__zoom,D=R==null?A(N):typeof R=="function"?R.apply(this,arguments):R;return n(Ct.translate(D[0],D[1]).scale(F.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof d=="function"?-d.apply(this,arguments):-d),N,a)},R,B)};function C(p,M){return M=Math.max(o[0],Math.min(o[1],M)),M===p.k?p:new we(M,p.x,p.y)}function E(p,M,d){var R=M[0]-d[0]*p.k,B=M[1]-d[1]*p.k;return R===p.x&&B===p.y?p:new we(p.k,R,B)}function A(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function y(p,M,d,R){p.on("start.zoom",function(){v(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){v(this,arguments).event(R).end()}).tween("zoom",function(){var B=this,N=arguments,F=v(B,N).event(R),D=e.apply(B,N),Q=d==null?A(D):typeof d=="function"?d.apply(B,N):d,G=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),U=B.__zoom,W=typeof M=="function"?M.apply(B,N):M,Y=h(U.invert(Q).concat(G/U.k),W.invert(Q).concat(G/W.k));return function(q){if(q===1)q=W;else{var X=Y(q),J=G/X[2];q=new we(J,Q[0]-X[0]*J,Q[1]-X[1]*J)}F.zoom(null,q)}})}function v(p,M,d){return!d&&p.__zooming||new k(p,M)}function k(p,M){this.that=p,this.args=M,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,M),this.taps=0}k.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,M){return this.mouse&&p!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var M=K(this.that).datum();u.call(p,this.that,new El(p,{sourceEvent:this.sourceEvent,target:x,type:p,transform:this.that.__zoom,dispatch:u}),M)}};function w(p,...M){if(!t.apply(this,arguments))return;var d=v(this,M).event(p),R=this.__zoom,B=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,r.apply(this,arguments)))),N=Ie(p);if(d.wheel)(d.mouse[0][0]!==N[0]||d.mouse[0][1]!==N[1])&&(d.mouse[1]=R.invert(d.mouse[0]=N)),clearTimeout(d.wheel);else{if(R.k===B)return;d.mouse=[N,R.invert(N)],At(this),d.start()}Xe(p),d.wheel=setTimeout(F,m),d.zoom("mouse",n(E(C(R,B),d.mouse[0],d.mouse[1]),d.extent,a));function F(){d.wheel=null,d.end()}}function S(p,...M){if(f||!t.apply(this,arguments))return;var d=p.currentTarget,R=v(this,M,!0).event(p),B=K(p.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",G,!0),N=Ie(p,d),F=p.clientX,D=p.clientY;Bo(p.view),Ut(p),R.mouse=[N,this.__zoom.invert(N)],At(this),R.start();function Q(U){if(Xe(U),!R.moved){var W=U.clientX-F,Y=U.clientY-D;R.moved=W*W+Y*Y>g}R.event(U).zoom("mouse",n(E(R.that.__zoom,R.mouse[0]=Ie(U,d),R.mouse[1]),R.extent,a))}function G(U){B.on("mousemove.zoom mouseup.zoom",null),ko(U.view,R.moved),Xe(U),R.event(U).end()}}function T(p,...M){if(!!t.apply(this,arguments)){var d=this.__zoom,R=Ie(p.changedTouches?p.changedTouches[0]:p,this),B=d.invert(R),N=d.k*(p.shiftKey?.5:2),F=n(E(C(d,N),R,B),e.apply(this,M),a);Xe(p),c>0?K(this).transition().duration(c).call(y,F,R,p):K(this).call(x.transform,F,R,p)}}function I(p,...M){if(!!t.apply(this,arguments)){var d=p.touches,R=d.length,B=v(this,M,p.changedTouches.length===R).event(p),N,F,D,Q;for(Ut(p),F=0;F<R;++F)D=d[F],Q=Ie(D,this),Q=[Q,this.__zoom.invert(Q),D.identifier],B.touch0?!B.touch1&&B.touch0[2]!==Q[2]&&(B.touch1=Q,B.taps=0):(B.touch0=Q,N=!0,B.taps=1+!!l);l&&(l=clearTimeout(l)),N&&(B.taps<2&&(s=Q[0],l=setTimeout(function(){l=null},b)),At(this),B.start())}}function z(p,...M){if(!!this.__zooming){var d=v(this,M).event(p),R=p.changedTouches,B=R.length,N,F,D,Q;for(Xe(p),N=0;N<B;++N)F=R[N],D=Ie(F,this),d.touch0&&d.touch0[2]===F.identifier?d.touch0[0]=D:d.touch1&&d.touch1[2]===F.identifier&&(d.touch1[0]=D);if(F=d.that.__zoom,d.touch1){var G=d.touch0[0],U=d.touch0[1],W=d.touch1[0],Y=d.touch1[1],q=(q=W[0]-G[0])*q+(q=W[1]-G[1])*q,X=(X=Y[0]-U[0])*X+(X=Y[1]-U[1])*X;F=C(F,Math.sqrt(q/X)),D=[(G[0]+W[0])/2,(G[1]+W[1])/2],Q=[(U[0]+Y[0])/2,(U[1]+Y[1])/2]}else if(d.touch0)D=d.touch0[0],Q=d.touch0[1];else return;d.zoom("touch",n(E(F,D,Q),d.extent,a))}}function O(p,...M){if(!!this.__zooming){var d=v(this,M).event(p),R=p.changedTouches,B=R.length,N,F;for(Ut(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},b),N=0;N<B;++N)F=R[N],d.touch0&&d.touch0[2]===F.identifier?delete d.touch0:d.touch1&&d.touch1[2]===F.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(F=Ie(F,this),Math.hypot(s[0]-F[0],s[1]-F[1])<_)){var D=K(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return x.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:lt(+p),x):r},x.filter=function(p){return arguments.length?(t=typeof p=="function"?p:lt(!!p),x):t},x.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:lt(!!p),x):i},x.extent=function(p){return arguments.length?(e=typeof p=="function"?p:lt([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),x):e},x.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],x):[o[0],o[1]]},x.translateExtent=function(p){return arguments.length?(a[0][0]=+p[0][0],a[1][0]=+p[1][0],a[0][1]=+p[0][1],a[1][1]=+p[1][1],x):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},x.constrain=function(p){return arguments.length?(n=p,x):n},x.duration=function(p){return arguments.length?(c=+p,x):c},x.interpolate=function(p){return arguments.length?(h=p,x):h},x.on=function(){var p=u.on.apply(u,arguments);return p===u?x:p},x.clickDistance=function(p){return arguments.length?(g=(p=+p)*p,x):Math.sqrt(g)},x.tapDistance=function(p){return arguments.length?(_=+p,x):_},x}function ft(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ir={exports:{}};/*!

pica
https://github.com/nodeca/pica

*/(function(t,e){(function(n){t.exports=n()})(function(){return function(){function n(r,i,o){function a(u,l){if(!i[u]){if(!r[u]){var s=typeof ft=="function"&&ft;if(!l&&s)return s(u,!0);if(c)return c(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var b=i[u]={exports:{}};r[u][0].call(b.exports,function(m){var g=r[u][1][m];return a(g||m)},b,b.exports,n,r,i,o)}return i[u].exports}for(var c=typeof ft=="function"&&ft,h=0;h<o.length;h++)a(o[h]);return a}return n}()({1:[function(n,r,i){var o=n("multimath"),a=n("./mm_unsharp_mask"),c=n("./mm_resize");function h(u){var l=u||[],s={js:l.indexOf("js")>=0,wasm:l.indexOf("wasm")>=0};o.call(this,s),this.features={js:s.js,wasm:s.wasm&&this.has_wasm()},this.use(a),this.use(c)}h.prototype=Object.create(o.prototype),h.prototype.constructor=h,h.prototype.resizeAndUnsharp=function(l,s){var f=this.resize(l,s);return l.unsharpAmount&&this.unsharp_mask(f,l.toWidth,l.toHeight,l.unsharpAmount,l.unsharpRadius,l.unsharpThreshold),f},r.exports=h},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(n,r,i){function o(s){return s<0?0:s>255?255:s}function a(s){return s>=0?s:0}function c(s,f,b,m,g,_){var x,C,E,A,y,v,k,w,S,T,I,z=0,O=0;for(S=0;S<m;S++){for(y=0,T=0;T<g;T++){for(v=_[y++],k=_[y++],w=z+v*4|0,x=C=E=A=0;k>0;k--)I=_[y++],A=A+I*s[w+3]|0,E=E+I*s[w+2]|0,C=C+I*s[w+1]|0,x=x+I*s[w]|0,w=w+4|0;f[O+3]=a(A>>7),f[O+2]=a(E>>7),f[O+1]=a(C>>7),f[O]=a(x>>7),O=O+m*4|0}O=(S+1)*4|0,z=(S+1)*b*4|0}}function h(s,f,b,m,g,_){var x,C,E,A,y,v,k,w,S,T,I,z=0,O=0;for(S=0;S<m;S++){for(y=0,T=0;T<g;T++){for(v=_[y++],k=_[y++],w=z+v*4|0,x=C=E=A=0;k>0;k--)I=_[y++],A=A+I*s[w+3]|0,E=E+I*s[w+2]|0,C=C+I*s[w+1]|0,x=x+I*s[w]|0,w=w+4|0;x>>=7,C>>=7,E>>=7,A>>=7,f[O+3]=o(A+(1<<13)>>14),f[O+2]=o(E+(1<<13)>>14),f[O+1]=o(C+(1<<13)>>14),f[O]=o(x+(1<<13)>>14),O=O+m*4|0}O=(S+1)*4|0,z=(S+1)*b*4|0}}function u(s,f,b,m,g,_){var x,C,E,A,y,v,k,w,S,T,I,z,O=0,p=0;for(T=0;T<m;T++){for(v=0,I=0;I<g;I++){for(k=_[v++],w=_[v++],S=O+k*4|0,x=C=E=A=0;w>0;w--)z=_[v++],y=s[S+3],A=A+z*y|0,E=E+z*s[S+2]*y|0,C=C+z*s[S+1]*y|0,x=x+z*s[S]*y|0,S=S+4|0;E=E/255|0,C=C/255|0,x=x/255|0,f[p+3]=a(A>>7),f[p+2]=a(E>>7),f[p+1]=a(C>>7),f[p]=a(x>>7),p=p+m*4|0}p=(T+1)*4|0,O=(T+1)*b*4|0}}function l(s,f,b,m,g,_){var x,C,E,A,y,v,k,w,S,T,I,z=0,O=0;for(S=0;S<m;S++){for(y=0,T=0;T<g;T++){for(v=_[y++],k=_[y++],w=z+v*4|0,x=C=E=A=0;k>0;k--)I=_[y++],A=A+I*s[w+3]|0,E=E+I*s[w+2]|0,C=C+I*s[w+1]|0,x=x+I*s[w]|0,w=w+4|0;x>>=7,C>>=7,E>>=7,A>>=7,A=o(A+(1<<13)>>14),A>0&&(x=x*255/A|0,C=C*255/A|0,E=E*255/A|0),f[O+3]=A,f[O+2]=o(E+(1<<13)>>14),f[O+1]=o(C+(1<<13)>>14),f[O]=o(x+(1<<13)>>14),O=O+m*4|0}O=(S+1)*4|0,z=(S+1)*b*4|0}}r.exports={convolveHor:c,convolveVert:h,convolveHorWithPre:u,convolveVertWithPre:l}},{}],3:[function(n,r,i){r.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(n,r,i){r.exports={name:"resize",fn:n("./resize"),wasm_fn:n("./resize_wasm"),wasm_src:n("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(n,r,i){var o=n("./resize_filter_gen"),a=n("./convolve"),c=a.convolveHor,h=a.convolveVert,u=a.convolveHorWithPre,l=a.convolveVertWithPre;function s(b,m,g){for(var _=3,x=m*g*4|0;_<x;){if(b[_]!==255)return!0;_=_+4|0}return!1}function f(b,m,g){for(var _=3,x=m*g*4|0;_<x;)b[_]=255,_=_+4|0}r.exports=function(m){var g=m.src,_=m.width,x=m.height,C=m.toWidth,E=m.toHeight,A=m.scaleX||m.toWidth/m.width,y=m.scaleY||m.toHeight/m.height,v=m.offsetX||0,k=m.offsetY||0,w=m.dest||new Uint8Array(C*E*4),S=typeof m.filter>"u"?"mks2013":m.filter,T=o(S,_,C,A,v),I=o(S,x,E,y,k),z=new Uint16Array(C*x*4);return s(g,_,x)?(u(g,z,_,x,C,T),l(z,w,x,C,E,I)):(c(g,z,_,x,C,T),h(z,w,x,C,E,I),f(w,C,E)),w}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(n,r,i){var o=n("./resize_filter_info"),a=14;function c(h){return Math.round(h*((1<<a)-1))}r.exports=function(u,l,s,f,b){var m=o.filter[u].fn,g=1/f,_=Math.min(1,f),x=o.filter[u].win/_,C,E,A,y,v,k,w,S,T,I,z,O,p,M,d,R,B,N=Math.floor((x+1)*2),F=new Int16Array((N+2)*s),D=0,Q=!F.subarray||!F.set;for(C=0;C<s;C++){for(E=(C+.5)*g+b,A=Math.max(0,Math.floor(E-x)),y=Math.min(l-1,Math.ceil(E+x)),v=y-A+1,k=new Float32Array(v),w=new Int16Array(v),S=0,T=A,I=0;T<=y;T++,I++)z=m((T+.5-E)*_),S+=z,k[I]=z;for(O=0,I=0;I<k.length;I++)p=k[I]/S,O+=p,w[I]=c(p);for(w[s>>1]+=c(1-O),M=0;M<w.length&&w[M]===0;)M++;if(M<w.length){for(d=w.length-1;d>0&&w[d]===0;)d--;if(R=A+M,B=d-M+1,F[D++]=R,F[D++]=B,!Q)F.set(w.subarray(M,d+1),D),D+=B;else for(I=M;I<=d;I++)F[D++]=w[I]}else F[D++]=0,F[D++]=0}return F}},{"./resize_filter_info":7}],7:[function(n,r,i){var o={box:{win:.5,fn:function(c){return c<0&&(c=-c),c<.5?1:0}},hamming:{win:1,fn:function(c){if(c<0&&(c=-c),c>=1)return 0;if(c<11920929e-14)return 1;var h=c*Math.PI;return Math.sin(h)/h*(.54+.46*Math.cos(h/1))}},lanczos2:{win:2,fn:function(c){if(c<0&&(c=-c),c>=2)return 0;if(c<11920929e-14)return 1;var h=c*Math.PI;return Math.sin(h)/h*Math.sin(h/2)/(h/2)}},lanczos3:{win:3,fn:function(c){if(c<0&&(c=-c),c>=3)return 0;if(c<11920929e-14)return 1;var h=c*Math.PI;return Math.sin(h)/h*Math.sin(h/3)/(h/3)}},mks2013:{win:2.5,fn:function(c){return c<0&&(c=-c),c>=2.5?0:c>=1.5?-.125*(c-2.5)*(c-2.5):c>=.5?.25*(4*c*c-11*c+7):1.0625-1.75*c*c}}};r.exports={filter:o,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(n,r,i){var o=n("./resize_filter_gen");function a(s,f,b){for(var m=3,g=f*b*4|0;m<g;){if(s[m]!==255)return!0;m=m+4|0}return!1}function c(s,f,b){for(var m=3,g=f*b*4|0;m<g;)s[m]=255,m=m+4|0}function h(s){return new Uint8Array(s.buffer,0,s.byteLength)}var u=!0;try{u=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function l(s,f,b){if(u){f.set(h(s),b);return}for(var m=b,g=0;g<s.length;g++){var _=s[g];f[m++]=_&255,f[m++]=_>>8&255}}r.exports=function(f){var b=f.src,m=f.width,g=f.height,_=f.toWidth,x=f.toHeight,C=f.scaleX||f.toWidth/f.width,E=f.scaleY||f.toHeight/f.height,A=f.offsetX||0,y=f.offsetY||0,v=f.dest||new Uint8Array(_*x*4),k=typeof f.filter>"u"?"mks2013":f.filter,w=o(k,m,_,C,A),S=o(k,g,x,E,y),T=0,I=Math.max(b.byteLength,v.byteLength),z=this.__align(T+I),O=g*_*4*2,p=this.__align(z+O),M=this.__align(p+w.byteLength),d=M+S.byteLength,R=this.__instance("resize",d),B=new Uint8Array(this.__memory.buffer),N=new Uint32Array(this.__memory.buffer),F=new Uint32Array(b.buffer);N.set(F),l(w,B,p),l(S,B,M);var D=R.exports.convolveHV||R.exports._convolveHV;a(b,m,g)?D(p,M,z,m,g,_,x,1):(D(p,M,z,m,g,_,x,0),c(v,_,x));var Q=new Uint32Array(v.buffer);return Q.set(new Uint32Array(this.__memory.buffer,0,x*_)),v}},{"./resize_filter_gen":6}],9:[function(n,r,i){r.exports={name:"unsharp_mask",fn:n("./unsharp_mask"),wasm_fn:n("./unsharp_mask_wasm"),wasm_src:n("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(n,r,i){var o=n("glur/mono16");function a(c,h,u){for(var l=h*u,s=new Uint16Array(l),f,b,m,g,_=0;_<l;_++)f=c[4*_],b=c[4*_+1],m=c[4*_+2],g=f>=b&&f>=m?f:b>=m&&b>=f?b:m,s[_]=g<<8;return s}r.exports=function(h,u,l,s,f,b){var m,g,_,x,C;if(!(s===0||f<.5)){f>2&&(f=2);var E=a(h,u,l),A=new Uint16Array(E);o(A,u,l,f);for(var y=s/100*4096+.5|0,v=b<<8,k=u*l,w=0;w<k;w++)m=E[w],x=m-A[w],Math.abs(x)>=v&&(g=m+(y*x+2048>>12),g=g>65280?65280:g,g=g<0?0:g,m=m!==0?m:1,_=(g<<12)/m|0,C=w*4,h[C]=h[C]*_+2048>>12,h[C+1]=h[C+1]*_+2048>>12,h[C+2]=h[C+2]*_+2048>>12)}}},{"glur/mono16":18}],11:[function(n,r,i){r.exports=function(a,c,h,u,l,s){if(!(u===0||l<.5)){l>2&&(l=2);var f=c*h,b=f*4,m=f*2,g=f*2,_=Math.max(c,h)*4,x=8*4,C=0,E=b,A=E+m,y=A+g,v=y+g,k=v+_,w=this.__instance("unsharp_mask",b+m+g*2+_+x,{exp:Math.exp}),S=new Uint32Array(a.buffer),T=new Uint32Array(this.__memory.buffer);T.set(S);var I=w.exports.hsv_v16||w.exports._hsv_v16;I(C,E,c,h),I=w.exports.blurMono16||w.exports._blurMono16,I(E,A,y,v,k,c,h,l),I=w.exports.unsharp||w.exports._unsharp,I(C,C,E,A,c,h,u,s),S.set(new Uint32Array(this.__memory.buffer,0,f))}}},{}],12:[function(n,r,i){r.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(n,r,i){var o=100;function a(c,h){this.create=c,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=h||2e3}a.prototype.acquire=function(){var c=this,h;return this.available.length!==0?h=this.available.pop():(h=this.create(),h.id=this.lastId++,h.release=function(){return c.release(h)}),this.acquired[h.id]=h,h},a.prototype.release=function(c){var h=this;delete this.acquired[c.id],c.lastUsed=Date.now(),this.available.push(c),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return h.gc()},o))},a.prototype.gc=function(){var c=this,h=Date.now();this.available=this.available.filter(function(u){return h-u.lastUsed>c.idle?(u.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return c.gc()},o):this.timeoutId=0},r.exports=a},{}],14:[function(n,r,i){var o=2;r.exports=function(c,h,u,l,s,f){var b=u/c,m=l/h,g=(2*f+o+1)/s;if(g>.5)return[[u,l]];var _=Math.ceil(Math.log(Math.min(b,m))/Math.log(g));if(_<=1)return[[u,l]];for(var x=[],C=0;C<_;C++){var E=Math.round(Math.pow(Math.pow(c,_-C-1)*Math.pow(u,C+1),1/_)),A=Math.round(Math.pow(Math.pow(h,_-C-1)*Math.pow(l,C+1),1/_));x.push([E,A])}return x}},{}],15:[function(n,r,i){var o=1e-5;function a(h){var u=Math.round(h);return Math.abs(h-u)<o?u:Math.floor(h)}function c(h){var u=Math.round(h);return Math.abs(h-u)<o?u:Math.ceil(h)}r.exports=function(u){var l=u.toWidth/u.width,s=u.toHeight/u.height,f=a(u.srcTileSize*l)-2*u.destTileBorder,b=a(u.srcTileSize*s)-2*u.destTileBorder;if(f<1||b<1)throw new Error("Internal error in pica: target tile width/height is too small.");var m,g,_,x,C,E,A=[],y;for(x=0;x<u.toHeight;x+=b)for(_=0;_<u.toWidth;_+=f)m=_-u.destTileBorder,m<0&&(m=0),C=_+f+u.destTileBorder-m,m+C>=u.toWidth&&(C=u.toWidth-m),g=x-u.destTileBorder,g<0&&(g=0),E=x+b+u.destTileBorder-g,g+E>=u.toHeight&&(E=u.toHeight-g),y={toX:m,toY:g,toWidth:C,toHeight:E,toInnerX:_,toInnerY:x,toInnerWidth:f,toInnerHeight:b,offsetX:m/l-a(m/l),offsetY:g/s-a(g/s),scaleX:l,scaleY:s,x:a(m/l),y:a(g/s),width:c(C/l),height:c(E/s)},A.push(y);return A}},{}],16:[function(n,r,i){function o(a){return Object.prototype.toString.call(a)}r.exports.isCanvas=function(c){var h=o(c);return h==="[object HTMLCanvasElement]"||h==="[object OffscreenCanvas]"||h==="[object Canvas]"},r.exports.isImage=function(c){return o(c)==="[object HTMLImageElement]"},r.exports.isImageBitmap=function(c){return o(c)==="[object ImageBitmap]"},r.exports.limiter=function(c){var h=0,u=[];function l(){h<c&&u.length&&(h++,u.shift()())}return function(f){return new Promise(function(b,m){u.push(function(){f().then(function(g){b(g),h--,l()},function(g){m(g),h--,l()})}),l()})}},r.exports.cib_quality_name=function(c){switch(c){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},r.exports.cib_support=function(c){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var h=c(100,100);return createImageBitmap(h,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(u){var l=u.width===10;return u.close(),h=null,l})}).catch(function(){return!1})},r.exports.worker_offscreen_canvas_support=function(){return new Promise(function(c,h){if(typeof OffscreenCanvas>"u"){c(!1);return}function u(f){if(typeof createImageBitmap>"u"){f.postMessage(!1);return}Promise.resolve().then(function(){var b=new OffscreenCanvas(10,10),m=b.getContext("2d");return m.rect(0,0,1,1),createImageBitmap(b,0,0,1,1)}).then(function(){return f.postMessage(!0)},function(){return f.postMessage(!1)})}var l=btoa("(".concat(u.toString(),")(self);")),s=new Worker("data:text/javascript;base64,".concat(l));s.onmessage=function(f){return c(f.data)},s.onerror=h}).then(function(c){return c},function(){return!1})},r.exports.can_use_canvas=function(c){var h=!1;try{var u=c(2,1),l=u.getContext("2d"),s=l.createImageData(2,1);s.data[0]=12,s.data[1]=23,s.data[2]=34,s.data[3]=255,s.data[4]=45,s.data[5]=56,s.data[6]=67,s.data[7]=255,l.putImageData(s,0,0),s=null,s=l.getImageData(0,0,2,1),s.data[0]===12&&s.data[1]===23&&s.data[2]===34&&s.data[3]===255&&s.data[4]===45&&s.data[5]===56&&s.data[6]===67&&s.data[7]===255&&(h=!0)}catch{}return h},r.exports.cib_can_use_region=function(){return new Promise(function(c){if(typeof Image>"u"||typeof createImageBitmap>"u"){c(!1);return}var h=new Image;h.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",h.onload=function(){createImageBitmap(h,0,0,h.width,h.height).then(function(u){u.width===h.width&&u.height===h.height?c(!0):c(!1)},function(){return c(!1)})},h.onerror=function(){return c(!1)}})}},{}],17:[function(n,r,i){r.exports=function(){var o=n("./mathlib"),a;onmessage=function(h){var u=h.data.opts;if(!u.src&&u.srcBitmap){var l=new OffscreenCanvas(u.width,u.height),s=l.getContext("2d");s.drawImage(u.srcBitmap,0,0),u.src=s.getImageData(0,0,u.width,u.height).data,l.width=l.height=0,l=null,u.srcBitmap.close(),u.srcBitmap=null}a||(a=new o(h.data.features));var f=a.resizeAndUnsharp(u);postMessage({data:f},[f.buffer])}}},{"./mathlib":1}],18:[function(n,r,i){var o,a,c,h,u,l,s,f;function b(_){_<.5&&(_=.5);var x=Math.exp(.726*.726)/_,C=Math.exp(-x),E=Math.exp(-2*x),A=(1-C)*(1-C)/(1+2*x*C-E);return o=A,a=A*(x-1)*C,c=A*(x+1)*C,h=-A*E,u=2*C,l=-E,s=(o+a)/(1-u-l),f=(c+h)/(1-u-l),new Float32Array([o,a,c,h,u,l,s,f])}function m(_,x,C,E,A,y){var v,k,w,S,T,I,z,O,p,M,d,R,B,N;for(p=0;p<y;p++){for(I=p*A,z=p,O=0,v=_[I],T=v*E[6],S=T,d=E[0],R=E[1],B=E[4],N=E[5],M=0;M<A;M++)k=_[I],w=k*d+v*R+S*B+T*N,T=S,S=w,v=k,C[O]=S,O++,I++;for(I--,O--,z+=y*(A-1),v=_[I],T=v*E[7],S=T,k=v,d=E[2],R=E[3],M=A-1;M>=0;M--)w=k*d+v*R+S*B+T*N,T=S,S=w,v=k,k=_[I],x[z]=C[O]+S,I--,O--,z-=y}}function g(_,x,C,E){if(!!E){var A=new Uint16Array(_.length),y=new Float32Array(Math.max(x,C)),v=b(E);m(_,A,y,v,x,C),m(A,_,y,v,C,x)}}r.exports=g},{}],19:[function(n,r,i){var o=n("object-assign"),a=n("./lib/base64decode"),c=n("./lib/wa_detect"),h={js:!0,wasm:!0};function u(l){if(!(this instanceof u))return new u(l);var s=o({},h,l||{});if(this.options=s,this.__cache={},this.__init_promise=null,this.__modules=s.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}u.prototype.has_wasm=c,u.prototype.use=function(l){return this.__modules[l.name]=l,this.options.wasm&&this.has_wasm()&&l.wasm_fn?this[l.name]=l.wasm_fn:this[l.name]=l.fn,this},u.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var l=this;return this.__init_promise=Promise.all(Object.keys(l.__modules).map(function(s){var f=l.__modules[s];return!l.options.wasm||!l.has_wasm()||!f.wasm_fn||l.__wasm[s]?null:WebAssembly.compile(l.__base64decode(f.wasm_src)).then(function(b){l.__wasm[s]=b})})).then(function(){return l}),this.__init_promise},u.prototype.__base64decode=a,u.prototype.__reallocate=function(s){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(s/(64*1024))}),this.__memory;var f=this.__memory.buffer.byteLength;return f<s&&this.__memory.grow(Math.ceil((s-f)/(64*1024))),this.__memory},u.prototype.__instance=function(s,f,b){if(f&&this.__reallocate(f),!this.__wasm[s]){var m=this.__modules[s];this.__wasm[s]=new WebAssembly.Module(this.__base64decode(m.wasm_src))}if(!this.__cache[s]){var g={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[s]=new WebAssembly.Instance(this.__wasm[s],{env:o(g,b||{})})}return this.__cache[s]},u.prototype.__align=function(s,f){f=f||8;var b=s%f;return s+(b?f-b:0)},r.exports=u},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(n,r,i){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";r.exports=function(c){for(var h=c.replace(/[\r\n=]/g,""),u=h.length,l=new Uint8Array(u*3>>2),s=0,f=0,b=0;b<u;b++)b%4===0&&b&&(l[f++]=s>>16&255,l[f++]=s>>8&255,l[f++]=s&255),s=s<<6|o.indexOf(h.charAt(b));var m=u%4*6;return m===0?(l[f++]=s>>16&255,l[f++]=s>>8&255,l[f++]=s&255):m===18?(l[f++]=s>>10&255,l[f++]=s>>2&255):m===12&&(l[f++]=s>>4&255),l}},{}],21:[function(n,r,i){var o;r.exports=function(){if(typeof o<"u"||(o=!1,typeof WebAssembly>"u"))return o;try{var c=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),h=new WebAssembly.Module(c),u=new WebAssembly.Instance(h,{});return u.exports.test(4)!==0&&(o=!0),o}catch{}return o}},{}],22:[function(n,r,i){var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function h(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function u(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var s={},f=0;f<10;f++)s["_"+String.fromCharCode(f)]=f;var b=Object.getOwnPropertyNames(s).map(function(g){return s[g]});if(b.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(g){m[g]=g}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}r.exports=u()?Object.assign:function(l,s){for(var f,b=h(l),m,g=1;g<arguments.length;g++){f=Object(arguments[g]);for(var _ in f)a.call(f,_)&&(b[_]=f[_]);if(o){m=o(f);for(var x=0;x<m.length;x++)c.call(f,m[x])&&(b[m[x]]=f[m[x]])}}return b}},{}],23:[function(n,r,i){var o=arguments[3],a=arguments[4],c=arguments[5],h=JSON.stringify;r.exports=function(u,l){for(var s,f=Object.keys(c),b=0,m=f.length;b<m;b++){var g=f[b],_=c[g].exports;if(_===u||_&&_.default===u){s=g;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var x={},b=0,m=f.length;b<m;b++){var g=f[b];x[g]=g}a[s]=["function(require,module,exports){"+u+"(self); }",x]}var C=Math.floor(Math.pow(16,8)*Math.random()).toString(16),E={};E[s]=s,a[C]=["function(require,module,exports){var f = require("+h(s)+");(f.default ? f.default : f)(self);}",E];var A={};y(C);function y(I){A[I]=!0;for(var z in a[I][1]){var O=a[I][1][z];A[O]||y(O)}}var v="("+o+")({"+Object.keys(A).map(function(I){return h(I)+":["+a[I][0]+","+h(a[I][1])+"]"}).join(",")+"},{},["+h(C)+"])",k=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([v],{type:"text/javascript"});if(l&&l.bare)return w;var S=k.createObjectURL(w),T=new Worker(S);return T.objectURL=S,T}},{}],"/index.js":[function(n,r,i){function o(d,R){return l(d)||u(d,R)||c(d,R)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(d,R){if(!!d){if(typeof d=="string")return h(d,R);var B=Object.prototype.toString.call(d).slice(8,-1);if(B==="Object"&&d.constructor&&(B=d.constructor.name),B==="Map"||B==="Set")return Array.from(d);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return h(d,R)}}function h(d,R){(R==null||R>d.length)&&(R=d.length);for(var B=0,N=new Array(R);B<R;B++)N[B]=d[B];return N}function u(d,R){var B=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(B!=null){var N=[],F=!0,D=!1,Q,G;try{for(B=B.call(d);!(F=(Q=B.next()).done)&&(N.push(Q.value),!(R&&N.length===R));F=!0);}catch(U){D=!0,G=U}finally{try{!F&&B.return!=null&&B.return()}finally{if(D)throw G}}return N}}function l(d){if(Array.isArray(d))return d}var s=n("object-assign"),f=n("webworkify"),b=n("./lib/mathlib"),m=n("./lib/pool"),g=n("./lib/utils"),_=n("./lib/worker"),x=n("./lib/stepper"),C=n("./lib/tiler"),E=n("./lib/mm_resize/resize_filter_info"),A={},y=!1;try{typeof navigator<"u"&&navigator.userAgent&&(y=navigator.userAgent.indexOf("Safari")>=0)}catch{}var v=1;typeof navigator<"u"&&(v=Math.min(navigator.hardwareConcurrency||1,4));var k={tile:1024,concurrency:v,features:["js","wasm","ww"],idle:2e3,createCanvas:function(R,B){var N=document.createElement("canvas");return N.width=R,N.height=B,N}},w={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},S=!1,T=!1,I=!1,z=!1,O=!1;function p(){return{value:f(_),destroy:function(){if(this.value.terminate(),typeof window<"u"){var R=window.URL||window.webkitURL||window.mozURL||window.msURL;R&&R.revokeObjectURL&&this.value.objectURL&&R.revokeObjectURL(this.value.objectURL)}}}}function M(d){if(!(this instanceof M))return new M(d);this.options=s({},k,d||{});var R="lk_".concat(this.options.concurrency);this.__limit=A[R]||g.limiter(this.options.concurrency),A[R]||(A[R]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}M.prototype.init=function(){var d=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),S=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?T=!0:this.debug("ImageBitmap does not support .close(), disabled"));var R=this.options.features.slice();if(R.indexOf("all")>=0&&(R=["cib","wasm","js","ww"]),this.__requested_features=R,this.__mathlib=new b(R),R.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var B=n("webworkify")(function(){});B.terminate(),this.features.ww=!0;var N="wp_".concat(JSON.stringify(this.options));A[N]?this.__workersPool=A[N]:(this.__workersPool=new m(p,this.options.idle),A[N]=this.__workersPool)}catch{}var F=this.__mathlib.init().then(function(U){s(d.features,U.features)}),D;T?D=g.cib_support(this.options.createCanvas).then(function(U){if(d.features.cib&&R.indexOf("cib")<0){d.debug("createImageBitmap() resize supported, but disabled by config");return}R.indexOf("cib")>=0&&(d.features.cib=U)}):D=Promise.resolve(!1),I=g.can_use_canvas(this.options.createCanvas);var Q;T&&S&&R.indexOf("ww")!==-1?Q=g.worker_offscreen_canvas_support():Q=Promise.resolve(!1),Q=Q.then(function(U){z=U});var G=g.cib_can_use_region().then(function(U){O=U});return this.__initPromise=Promise.all([F,D,Q,G]).then(function(){return d}),this.__initPromise},M.prototype.__invokeResize=function(d,R){var B=this;return R.__mathCache=R.__mathCache||{},Promise.resolve().then(function(){return B.features.ww?new Promise(function(N,F){var D=B.__workersPool.acquire();R.cancelToken&&R.cancelToken.catch(function(G){return F(G)}),D.value.onmessage=function(G){D.release(),G.data.err?F(G.data.err):N(G.data)};var Q=[];d.src&&Q.push(d.src.buffer),d.srcBitmap&&Q.push(d.srcBitmap),D.value.postMessage({opts:d,features:B.__requested_features,preload:{wasm_nodule:B.__mathlib.__}},Q)}):{data:B.__mathlib.resizeAndUnsharp(d,R.__mathCache)}})},M.prototype.__extractTileData=function(d,R,B,N,F){if(this.features.ww&&z&&(g.isCanvas(R)||O))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(N.srcImageBitmap||R,d.x,d.y,d.width,d.height).then(function(G){return F.srcBitmap=G,F});if(g.isCanvas(R))return N.srcCtx||(N.srcCtx=R.getContext("2d")),this.debug("Get tile pixel data"),F.src=N.srcCtx.getImageData(d.x,d.y,d.width,d.height).data,F;this.debug("Draw tile imageBitmap/image to temporary canvas");var D=this.options.createCanvas(d.width,d.height),Q=D.getContext("2d");return Q.globalCompositeOperation="copy",Q.drawImage(N.srcImageBitmap||R,d.x,d.y,d.width,d.height,0,0,d.width,d.height),this.debug("Get tile pixel data"),F.src=Q.getImageData(0,0,d.width,d.height).data,D.width=D.height=0,F},M.prototype.__landTileData=function(d,R,B){var N;if(this.debug("Convert raw rgba tile result to ImageData"),R.bitmap)return B.toCtx.drawImage(R.bitmap,d.toX,d.toY),null;if(S)N=new ImageData(new Uint8ClampedArray(R.data),d.toWidth,d.toHeight);else if(N=B.toCtx.createImageData(d.toWidth,d.toHeight),N.data.set)N.data.set(R.data);else for(var F=N.data.length-1;F>=0;F--)N.data[F]=R.data[F];return this.debug("Draw tile"),y?B.toCtx.putImageData(N,d.toX,d.toY,d.toInnerX-d.toX,d.toInnerY-d.toY,d.toInnerWidth+1e-5,d.toInnerHeight+1e-5):B.toCtx.putImageData(N,d.toX,d.toY,d.toInnerX-d.toX,d.toInnerY-d.toY,d.toInnerWidth,d.toInnerHeight),null},M.prototype.__tileAndResize=function(d,R,B){var N=this,F={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},D=function(G){return N.__limit(function(){if(B.canceled)return B.cancelToken;var U={width:G.width,height:G.height,toWidth:G.toWidth,toHeight:G.toHeight,scaleX:G.scaleX,scaleY:G.scaleY,offsetX:G.offsetX,offsetY:G.offsetY,filter:B.filter,unsharpAmount:B.unsharpAmount,unsharpRadius:B.unsharpRadius,unsharpThreshold:B.unsharpThreshold};return N.debug("Invoke resize math"),Promise.resolve(U).then(function(W){return N.__extractTileData(G,d,B,F,W)}).then(function(W){return N.debug("Invoke resize math"),N.__invokeResize(W,B)}).then(function(W){return B.canceled?B.cancelToken:(F.srcImageData=null,N.__landTileData(G,W,F))})})};return Promise.resolve().then(function(){if(F.toCtx=R.getContext("2d"),g.isCanvas(d))return null;if(g.isImageBitmap(d))return F.srcImageBitmap=d,F.isImageBitmapReused=!0,null;if(g.isImage(d))return T?(N.debug("Decode image via createImageBitmap"),createImageBitmap(d).then(function(Q){F.srcImageBitmap=Q}).catch(function(Q){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(B.canceled)return B.cancelToken;N.debug("Calculate tiles");var Q=C({width:B.width,height:B.height,srcTileSize:N.options.tile,toWidth:B.toWidth,toHeight:B.toHeight,destTileBorder:B.__destTileBorder}),G=Q.map(function(W){return D(W)});function U(W){W.srcImageBitmap&&(W.isImageBitmapReused||W.srcImageBitmap.close(),W.srcImageBitmap=null)}return N.debug("Process tiles"),Promise.all(G).then(function(){return N.debug("Finished!"),U(F),R},function(W){throw U(F),W})})},M.prototype.__processStages=function(d,R,B,N){var F=this;if(N.canceled)return N.cancelToken;var D=d.shift(),Q=o(D,2),G=Q[0],U=Q[1],W=d.length===0,Y;W||E.q2f.indexOf(N.filter)<0?Y=N.filter:N.filter==="box"?Y="box":Y="hamming",N=s({},N,{toWidth:G,toHeight:U,filter:Y});var q;return W||(q=this.options.createCanvas(G,U)),this.__tileAndResize(R,W?B:q,N).then(function(){return W?B:(N.width=G,N.height=U,F.__processStages(d,q,B,N))}).then(function(X){return q&&(q.width=q.height=0),X})},M.prototype.__resizeViaCreateImageBitmap=function(d,R,B){var N=this,F=R.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(d,{resizeWidth:B.toWidth,resizeHeight:B.toHeight,resizeQuality:g.cib_quality_name(E.f2q[B.filter])}).then(function(D){if(B.canceled)return B.cancelToken;if(!B.unsharpAmount)return F.drawImage(D,0,0),D.close(),F=null,N.debug("Finished!"),R;N.debug("Unsharp result");var Q=N.options.createCanvas(B.toWidth,B.toHeight),G=Q.getContext("2d");G.drawImage(D,0,0),D.close();var U=G.getImageData(0,0,B.toWidth,B.toHeight);return N.__mathlib.unsharp_mask(U.data,B.toWidth,B.toHeight,B.unsharpAmount,B.unsharpRadius,B.unsharpThreshold),F.putImageData(U,0,0),Q.width=Q.height=0,U=G=Q=F=null,N.debug("Finished!"),R})},M.prototype.resize=function(d,R,B){var N=this;this.debug("Start resize...");var F=s({},w);if(isNaN(B)?B&&(F=s(F,B)):F=s(F,{quality:B}),F.toWidth=R.width,F.toHeight=R.height,F.width=d.naturalWidth||d.width,F.height=d.naturalHeight||d.height,Object.prototype.hasOwnProperty.call(F,"quality")){if(F.quality<0||F.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(F.quality));F.filter=E.q2f[F.quality]}if(R.width===0||R.height===0)return Promise.reject(new Error("Invalid output size: ".concat(R.width,"x").concat(R.height)));F.unsharpRadius>2&&(F.unsharpRadius=2),F.canceled=!1,F.cancelToken&&(F.cancelToken=F.cancelToken.then(function(Q){throw F.canceled=!0,Q},function(Q){throw F.canceled=!0,Q}));var D=3;return F.__destTileBorder=Math.ceil(Math.max(D,2.5*F.unsharpRadius|0)),this.init().then(function(){if(F.canceled)return F.cancelToken;if(N.features.cib){if(E.q2f.indexOf(F.filter)>=0)return N.__resizeViaCreateImageBitmap(d,R,F);N.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!I){var Q=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw Q.code="ERR_GET_IMAGE_DATA",Q}var G=x(F.width,F.height,F.toWidth,F.toHeight,N.options.tile,F.__destTileBorder);return N.__processStages(G,d,R,F)})},M.prototype.resizeBuffer=function(d){var R=this,B=s({},w,d);if(Object.prototype.hasOwnProperty.call(B,"quality")){if(B.quality<0||B.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(B.quality));B.filter=E.q2f[B.quality]}return this.init().then(function(){return R.__mathlib.resizeAndUnsharp(B)})},M.prototype.toBlob=function(d,R,B){return R=R||"image/png",new Promise(function(N){if(d.toBlob){d.toBlob(function(U){return N(U)},R,B);return}if(d.convertToBlob){N(d.convertToBlob({type:R,quality:B}));return}for(var F=atob(d.toDataURL(R,B).split(",")[1]),D=F.length,Q=new Uint8Array(D),G=0;G<D;G++)Q[G]=F.charCodeAt(G);N(new Blob([Q],{type:R}))})},M.prototype.debug=function(){},r.exports=M},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(Ir);const Rl=Ir.exports;let Nl=function(){var t=function(e){};(function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae):typeof define=="function"&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{})})(this,function(e){var n={value:()=>{}};function r(){for(var h,u=0,l=arguments.length,s={};u<l;++u){if(!(h=arguments[u]+"")||h in s||/[\s.]/.test(h))throw new Error("illegal type: "+h);s[h]=[]}return new i(s)}function i(h){this._=h}function o(h,u){return h.trim().split(/^|\s+/).map(function(l){var s="",f=l.indexOf(".");if(f>=0&&(s=l.slice(f+1),l=l.slice(0,f)),l&&!u.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:s}})}function a(h,u){for(var l,s=0,f=h.length;s<f;++s)if((l=h[s]).name===u)return l.value}function c(h,u,l){for(var s=0,f=h.length;s<f;++s)if(h[s].name===u){h[s]=n,h=h.slice(0,s).concat(h.slice(s+1));break}return l!=null&&h.push({name:u,value:l}),h}i.prototype=r.prototype={constructor:i,on:function(h,u){var l,s=this._,f=o(h+"",s),b=-1,m=f.length;if(!(arguments.length<2)){if(u!=null&&typeof u!="function")throw new Error("invalid callback: "+u);for(;++b<m;)if(l=(h=f[b]).type)s[l]=c(s[l],h.name,u);else if(u==null)for(l in s)s[l]=c(s[l],h.name,null);return this}for(;++b<m;)if((l=(h=f[b]).type)&&(l=a(s[l],h.name)))return l},copy:function(){var h={},u=this._;for(var l in u)h[l]=u[l].slice();return new i(h)},call:function(h,u){if((l=arguments.length-2)>0)for(var l,s,f=new Array(l),b=0;b<l;++b)f[b]=arguments[b+2];if(!this._.hasOwnProperty(h))throw new Error("unknown type: "+h);for(b=0,l=(s=this._[h]).length;b<l;++b)s[b].value.apply(u,f)},apply:function(h,u,l){if(!this._.hasOwnProperty(h))throw new Error("unknown type: "+h);for(var s=this._[h],f=0,b=s.length;f<b;++f)s[f].value.apply(u,l)}},e.dispatch=r,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae):typeof define=="function"&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{})}(this,function(e){function n(l,s,f,b){if(isNaN(s)||isNaN(f))return l;var m,g,_,x,C,E,A,y,v,k=l._root,w={data:b},S=l._x0,T=l._y0,I=l._x1,z=l._y1;if(!k)return l._root=w,l;for(;k.length;)if((E=s>=(g=(S+I)/2))?S=g:I=g,(A=f>=(_=(T+z)/2))?T=_:z=_,m=k,!(k=k[y=A<<1|E]))return m[y]=w,l;if(x=+l._x.call(null,k.data),C=+l._y.call(null,k.data),s===x&&f===C)return w.next=k,m?m[y]=w:l._root=w,l;do m=m?m[y]=new Array(4):l._root=new Array(4),(E=s>=(g=(S+I)/2))?S=g:I=g,(A=f>=(_=(T+z)/2))?T=_:z=_;while((y=A<<1|E)==(v=(C>=_)<<1|x>=g));return m[v]=k,m[y]=w,l}function r(l,s,f,b,m){this.node=l,this.x0=s,this.y0=f,this.x1=b,this.y1=m}function i(l){return l[0]}function o(l){return l[1]}function a(l,s,f){var b=new c(s??i,f??o,NaN,NaN,NaN,NaN);return l==null?b:b.addAll(l)}function c(l,s,f,b,m,g){this._x=l,this._y=s,this._x0=f,this._y0=b,this._x1=m,this._y1=g,this._root=void 0}function h(l){for(var s={data:l.data},f=s;l=l.next;)f=f.next={data:l.data};return s}var u=a.prototype=c.prototype;u.copy=function(){var l,s,f=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),b=this._root;if(!b)return f;if(!b.length)return f._root=h(b),f;for(l=[{source:b,target:f._root=new Array(4)}];b=l.pop();)for(var m=0;m<4;++m)(s=b.source[m])&&(s.length?l.push({source:s,target:b.target[m]=new Array(4)}):b.target[m]=h(s));return f},u.add=function(l){const s=+this._x.call(null,l),f=+this._y.call(null,l);return n(this.cover(s,f),s,f,l)},u.addAll=function(l){var s,f,b,m,g=l.length,_=new Array(g),x=new Array(g),C=1/0,E=1/0,A=-1/0,y=-1/0;for(f=0;f<g;++f)isNaN(b=+this._x.call(null,s=l[f]))||isNaN(m=+this._y.call(null,s))||(_[f]=b,x[f]=m,b<C&&(C=b),b>A&&(A=b),m<E&&(E=m),m>y&&(y=m));if(C>A||E>y)return this;for(this.cover(C,E).cover(A,y),f=0;f<g;++f)n(this,_[f],x[f],l[f]);return this},u.cover=function(l,s){if(isNaN(l=+l)||isNaN(s=+s))return this;var f=this._x0,b=this._y0,m=this._x1,g=this._y1;if(isNaN(f))m=(f=Math.floor(l))+1,g=(b=Math.floor(s))+1;else{for(var _,x,C=m-f||1,E=this._root;f>l||l>=m||b>s||s>=g;)switch(x=(s<b)<<1|l<f,(_=new Array(4))[x]=E,E=_,C*=2,x){case 0:m=f+C,g=b+C;break;case 1:f=m-C,g=b+C;break;case 2:m=f+C,b=g-C;break;case 3:f=m-C,b=g-C}this._root&&this._root.length&&(this._root=E)}return this._x0=f,this._y0=b,this._x1=m,this._y1=g,this},u.data=function(){var l=[];return this.visit(function(s){if(!s.length)do l.push(s.data);while(s=s.next)}),l},u.extent=function(l){return arguments.length?this.cover(+l[0][0],+l[0][1]).cover(+l[1][0],+l[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},u.find=function(l,s,f){var b,m,g,_,x,C,E,A=this._x0,y=this._y0,v=this._x1,k=this._y1,w=[],S=this._root;for(S&&w.push(new r(S,A,y,v,k)),f==null?f=1/0:(A=l-f,y=s-f,v=l+f,k=s+f,f*=f);C=w.pop();)if(!(!(S=C.node)||(m=C.x0)>v||(g=C.y0)>k||(_=C.x1)<A||(x=C.y1)<y))if(S.length){var T=(m+_)/2,I=(g+x)/2;w.push(new r(S[3],T,I,_,x),new r(S[2],m,I,T,x),new r(S[1],T,g,_,I),new r(S[0],m,g,T,I)),(E=(s>=I)<<1|l>=T)&&(C=w[w.length-1],w[w.length-1]=w[w.length-1-E],w[w.length-1-E]=C)}else{var z=l-+this._x.call(null,S.data),O=s-+this._y.call(null,S.data),p=z*z+O*O;if(p<f){var M=Math.sqrt(f=p);A=l-M,y=s-M,v=l+M,k=s+M,b=S.data}}return b},u.remove=function(l){if(isNaN(g=+this._x.call(null,l))||isNaN(_=+this._y.call(null,l)))return this;var s,f,b,m,g,_,x,C,E,A,y,v,k=this._root,w=this._x0,S=this._y0,T=this._x1,I=this._y1;if(!k)return this;if(k.length)for(;;){if((E=g>=(x=(w+T)/2))?w=x:T=x,(A=_>=(C=(S+I)/2))?S=C:I=C,s=k,!(k=k[y=A<<1|E]))return this;if(!k.length)break;(s[y+1&3]||s[y+2&3]||s[y+3&3])&&(f=s,v=y)}for(;k.data!==l;)if(b=k,!(k=k.next))return this;return(m=k.next)&&delete k.next,b?(m?b.next=m:delete b.next,this):s?(m?s[y]=m:delete s[y],(k=s[0]||s[1]||s[2]||s[3])&&k===(s[3]||s[2]||s[1]||s[0])&&!k.length&&(f?f[v]=k:this._root=k),this):(this._root=m,this)},u.removeAll=function(l){for(var s=0,f=l.length;s<f;++s)this.remove(l[s]);return this},u.root=function(){return this._root},u.size=function(){var l=0;return this.visit(function(s){if(!s.length)do++l;while(s=s.next)}),l},u.visit=function(l){var s,f,b,m,g,_,x=[],C=this._root;for(C&&x.push(new r(C,this._x0,this._y0,this._x1,this._y1));s=x.pop();)if(!l(C=s.node,b=s.x0,m=s.y0,g=s.x1,_=s.y1)&&C.length){var E=(b+g)/2,A=(m+_)/2;(f=C[3])&&x.push(new r(f,E,A,g,_)),(f=C[2])&&x.push(new r(f,b,A,E,_)),(f=C[1])&&x.push(new r(f,E,m,g,A)),(f=C[0])&&x.push(new r(f,b,m,E,A))}return this},u.visitAfter=function(l){var s,f=[],b=[];for(this._root&&f.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));s=f.pop();){var m=s.node;if(m.length){var g,_=s.x0,x=s.y0,C=s.x1,E=s.y1,A=(_+C)/2,y=(x+E)/2;(g=m[0])&&f.push(new r(g,_,x,A,y)),(g=m[1])&&f.push(new r(g,A,x,C,y)),(g=m[2])&&f.push(new r(g,_,y,A,E)),(g=m[3])&&f.push(new r(g,A,y,C,E))}b.push(s)}for(;s=b.pop();)l(s.node,s.x0,s.y0,s.x1,s.y1);return this},u.x=function(l){return arguments.length?(this._x=l,this):this._x},u.y=function(l){return arguments.length?(this._y=l,this):this._y},e.quadtree=a,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae):typeof define=="function"&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{})}(this,function(e){var n,r,i=0,o=0,a=0,c=0,h=0,u=0,l=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(A){setTimeout(A,17)};function f(){return h||(s(b),h=l.now()+u)}function b(){h=0}function m(){this._call=this._time=this._next=null}function g(A,y,v){var k=new m;return k.restart(A,y,v),k}function _(){f(),++i;for(var A,y=n;y;)(A=h-y._time)>=0&&y._call.call(void 0,A),y=y._next;--i}function x(){h=(c=l.now())+u,i=o=0;try{_()}finally{i=0,function(){for(var A,y,v=n,k=1/0;v;)v._call?(k>v._time&&(k=v._time),A=v,v=v._next):(y=v._next,v._next=null,v=A?A._next=y:n=y);r=A,E(k)}(),h=0}}function C(){var A=l.now(),y=A-c;y>1e3&&(u-=y,c=A)}function E(A){i||(o&&(o=clearTimeout(o)),A-h>24?(A<1/0&&(o=setTimeout(x,A-l.now()-u)),a&&(a=clearInterval(a))):(a||(c=l.now(),a=setInterval(C,1e3)),i=1,s(x)))}m.prototype=g.prototype={constructor:m,restart:function(A,y,v){if(typeof A!="function")throw new TypeError("callback is not a function");v=(v==null?f():+v)+(y==null?0:+y),this._next||r===this||(r?r._next=this:n=this,r=this),this._call=A,this._time=v,E()},stop:function(){this._call&&(this._call=null,this._time=1/0,E())}},e.interval=function(A,y,v){var k=new m,w=y;return y==null?(k.restart(A,y,v),k):(k._restart=k.restart,k.restart=function(S,T,I){T=+T,I=I==null?f():+I,k._restart(function z(O){O+=w,k._restart(z,w+=T,I),S(O)},T,I)},k.restart(A,y,v),k)},e.now=f,e.timeout=function(A,y,v){var k=new m;return y=y==null?0:+y,k.restart(w=>{k.stop(),A(w+y)},y,v),k},e.timer=g,e.timerFlush=_,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae,t(),t(),t()):typeof define=="function"&&define.amd?define(["exports","d3-quadtree","d3-dispatch","d3-timer"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{},e.d3,e.d3,e.d3)}(this,function(e,n,r,i){function o(g){return function(){return g}}function a(g){return 1e-6*(g()-.5)}function c(g){return g.x+g.vx}function h(g){return g.y+g.vy}function u(g){return g.index}function l(g,_){var x=g.get(_);if(!x)throw new Error("node not found: "+_);return x}const s=4294967296;function f(g){return g.x}function b(g){return g.y}var m=Math.PI*(3-Math.sqrt(5));e.forceCenter=function(g,_){var x,C=1;function E(){var A,y,v=x.length,k=0,w=0;for(A=0;A<v;++A)k+=(y=x[A]).x,w+=y.y;for(k=(k/v-g)*C,w=(w/v-_)*C,A=0;A<v;++A)(y=x[A]).x-=k,y.y-=w}return g==null&&(g=0),_==null&&(_=0),E.initialize=function(A){x=A},E.x=function(A){return arguments.length?(g=+A,E):g},E.y=function(A){return arguments.length?(_=+A,E):_},E.strength=function(A){return arguments.length?(C=+A,E):C},E},e.forceCollide=function(g){var _,x,C,E=1,A=1;function y(){for(var w,S,T,I,z,O,p,M=_.length,d=0;d<A;++d)for(S=n.quadtree(_,c,h).visitAfter(v),w=0;w<M;++w)T=_[w],O=x[T.index],p=O*O,I=T.x+T.vx,z=T.y+T.vy,S.visit(R);function R(B,N,F,D,Q){var G=B.data,U=B.r,W=O+U;if(!G)return N>I+W||D<I-W||F>z+W||Q<z-W;if(G.index>T.index){var Y=I-G.x-G.vx,q=z-G.y-G.vy,X=Y*Y+q*q;X<W*W&&(Y===0&&(X+=(Y=a(C))*Y),q===0&&(X+=(q=a(C))*q),X=(W-(X=Math.sqrt(X)))/X*E,T.vx+=(Y*=X)*(W=(U*=U)/(p+U)),T.vy+=(q*=X)*W,G.vx-=Y*(W=1-W),G.vy-=q*W)}}}function v(w){if(w.data)return w.r=x[w.data.index];for(var S=w.r=0;S<4;++S)w[S]&&w[S].r>w.r&&(w.r=w[S].r)}function k(){if(_){var w,S,T=_.length;for(x=new Array(T),w=0;w<T;++w)S=_[w],x[S.index]=+g(S,w,_)}}return typeof g!="function"&&(g=o(g==null?1:+g)),y.initialize=function(w,S){_=w,C=S,k()},y.iterations=function(w){return arguments.length?(A=+w,y):A},y.strength=function(w){return arguments.length?(E=+w,y):E},y.radius=function(w){return arguments.length?(g=typeof w=="function"?w:o(+w),k(),y):g},y},e.forceLink=function(g){var _,x,C,E,A,y,v=u,k=function(p){return 1/Math.min(E[p.source.index],E[p.target.index])},w=o(30),S=1;function T(p){for(var M=0,d=g.length;M<S;++M)for(var R,B,N,F,D,Q,G,U=0;U<d;++U)B=(R=g[U]).source,F=(N=R.target).x+N.vx-B.x-B.vx||a(y),D=N.y+N.vy-B.y-B.vy||a(y),F*=Q=((Q=Math.sqrt(F*F+D*D))-x[U])/Q*p*_[U],D*=Q,N.vx-=F*(G=A[U]),N.vy-=D*G,B.vx+=F*(G=1-G),B.vy+=D*G}function I(){if(C){var p,M,d=C.length,R=g.length,B=new Map(C.map((N,F)=>[v(N,F,C),N]));for(p=0,E=new Array(d);p<R;++p)(M=g[p]).index=p,typeof M.source!="object"&&(M.source=l(B,M.source)),typeof M.target!="object"&&(M.target=l(B,M.target)),E[M.source.index]=(E[M.source.index]||0)+1,E[M.target.index]=(E[M.target.index]||0)+1;for(p=0,A=new Array(R);p<R;++p)M=g[p],A[p]=E[M.source.index]/(E[M.source.index]+E[M.target.index]);_=new Array(R),z(),x=new Array(R),O()}}function z(){if(C)for(var p=0,M=g.length;p<M;++p)_[p]=+k(g[p],p,g)}function O(){if(C)for(var p=0,M=g.length;p<M;++p)x[p]=+w(g[p],p,g)}return g==null&&(g=[]),T.initialize=function(p,M){C=p,y=M,I()},T.links=function(p){return arguments.length?(g=p,I(),T):g},T.id=function(p){return arguments.length?(v=p,T):v},T.iterations=function(p){return arguments.length?(S=+p,T):S},T.strength=function(p){return arguments.length?(k=typeof p=="function"?p:o(+p),z(),T):k},T.distance=function(p){return arguments.length?(w=typeof p=="function"?p:o(+p),O(),T):w},T},e.forceManyBody=function(){var g,_,x,C,E,A=o(-30),y=1,v=1/0,k=.81;function w(z){var O,p=g.length,M=n.quadtree(g,f,b).visitAfter(T);for(C=z,O=0;O<p;++O)_=g[O],M.visit(I)}function S(){if(g){var z,O,p=g.length;for(E=new Array(p),z=0;z<p;++z)O=g[z],E[O.index]=+A(O,z,g)}}function T(z){var O,p,M,d,R,B=0,N=0;if(z.length){for(M=d=R=0;R<4;++R)(O=z[R])&&(p=Math.abs(O.value))&&(B+=O.value,N+=p,M+=p*O.x,d+=p*O.y);z.x=M/N,z.y=d/N}else{(O=z).x=O.data.x,O.y=O.data.y;do B+=E[O.data.index];while(O=O.next)}z.value=B}function I(z,O,p,M){if(!z.value)return!0;var d=z.x-_.x,R=z.y-_.y,B=M-O,N=d*d+R*R;if(B*B/k<N)return N<v&&(d===0&&(N+=(d=a(x))*d),R===0&&(N+=(R=a(x))*R),N<y&&(N=Math.sqrt(y*N)),_.vx+=d*z.value*C/N,_.vy+=R*z.value*C/N),!0;if(!(z.length||N>=v)){(z.data!==_||z.next)&&(d===0&&(N+=(d=a(x))*d),R===0&&(N+=(R=a(x))*R),N<y&&(N=Math.sqrt(y*N)));do z.data!==_&&(B=E[z.data.index]*C/N,_.vx+=d*B,_.vy+=R*B);while(z=z.next)}}return w.initialize=function(z,O){g=z,x=O,S()},w.strength=function(z){return arguments.length?(A=typeof z=="function"?z:o(+z),S(),w):A},w.distanceMin=function(z){return arguments.length?(y=z*z,w):Math.sqrt(y)},w.distanceMax=function(z){return arguments.length?(v=z*z,w):Math.sqrt(v)},w.theta=function(z){return arguments.length?(k=z*z,w):Math.sqrt(k)},w},e.forceRadial=function(g,_,x){var C,E,A,y=o(.1);function v(w){for(var S=0,T=C.length;S<T;++S){var I=C[S],z=I.x-_||1e-6,O=I.y-x||1e-6,p=Math.sqrt(z*z+O*O),M=(A[S]-p)*E[S]*w/p;I.vx+=z*M,I.vy+=O*M}}function k(){if(C){var w,S=C.length;for(E=new Array(S),A=new Array(S),w=0;w<S;++w)A[w]=+g(C[w],w,C),E[w]=isNaN(A[w])?0:+y(C[w],w,C)}}return typeof g!="function"&&(g=o(+g)),_==null&&(_=0),x==null&&(x=0),v.initialize=function(w){C=w,k()},v.strength=function(w){return arguments.length?(y=typeof w=="function"?w:o(+w),k(),v):y},v.radius=function(w){return arguments.length?(g=typeof w=="function"?w:o(+w),k(),v):g},v.x=function(w){return arguments.length?(_=+w,v):_},v.y=function(w){return arguments.length?(x=+w,v):x},v},e.forceSimulation=function(g){var _,x=1,C=.001,E=1-Math.pow(C,1/300),A=0,y=.6,v=new Map,k=i.timer(T),w=r.dispatch("tick","end"),S=function(){let p=1;return()=>(p=(1664525*p+1013904223)%s)/s}();function T(){I(),w.call("tick",_),x<C&&(k.stop(),w.call("end",_))}function I(p){var M,d,R=g.length;p===void 0&&(p=1);for(var B=0;B<p;++B)for(x+=(A-x)*E,v.forEach(function(N){N(x)}),M=0;M<R;++M)(d=g[M]).fx==null?d.x+=d.vx*=y:(d.x=d.fx,d.vx=0),d.fy==null?d.y+=d.vy*=y:(d.y=d.fy,d.vy=0);return _}function z(){for(var p,M=0,d=g.length;M<d;++M){if((p=g[M]).index=M,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var R=10*Math.sqrt(.5+M),B=M*m;p.x=R*Math.cos(B),p.y=R*Math.sin(B)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function O(p){return p.initialize&&p.initialize(g,S),p}return g==null&&(g=[]),z(),_={tick:I,restart:function(){return k.restart(T),_},stop:function(){return k.stop(),_},nodes:function(p){return arguments.length?(g=p,z(),v.forEach(O),_):g},alpha:function(p){return arguments.length?(x=+p,_):x},alphaMin:function(p){return arguments.length?(C=+p,_):C},alphaDecay:function(p){return arguments.length?(E=+p,_):+E},alphaTarget:function(p){return arguments.length?(A=+p,_):A},velocityDecay:function(p){return arguments.length?(y=1-p,_):1-y},randomSource:function(p){return arguments.length?(S=p,v.forEach(O),_):S},force:function(p,M){return arguments.length>1?(M==null?v.delete(p):v.set(p,O(M)),_):v.get(p)},find:function(p,M,d){var R,B,N,F,D,Q=0,G=g.length;for(d==null?d=1/0:d*=d,Q=0;Q<G;++Q)(N=(R=p-(F=g[Q]).x)*R+(B=M-F.y)*B)<d&&(D=F,d=N);return D},on:function(p,M){return arguments.length>1?(w.on(p,M),_):w.on(p)}}},e.forceX=function(g){var _,x,C,E=o(.1);function A(v){for(var k,w=0,S=_.length;w<S;++w)(k=_[w]).vx+=(C[w]-k.x)*x[w]*v}function y(){if(_){var v,k=_.length;for(x=new Array(k),C=new Array(k),v=0;v<k;++v)x[v]=isNaN(C[v]=+g(_[v],v,_))?0:+E(_[v],v,_)}}return typeof g!="function"&&(g=o(g==null?0:+g)),A.initialize=function(v){_=v,y()},A.strength=function(v){return arguments.length?(E=typeof v=="function"?v:o(+v),y(),A):E},A.x=function(v){return arguments.length?(g=typeof v=="function"?v:o(+v),y(),A):g},A},e.forceY=function(g){var _,x,C,E=o(.1);function A(v){for(var k,w=0,S=_.length;w<S;++w)(k=_[w]).vy+=(C[w]-k.y)*x[w]*v}function y(){if(_){var v,k=_.length;for(x=new Array(k),C=new Array(k),v=0;v<k;++v)x[v]=isNaN(C[v]=+g(_[v],v,_))?0:+E(_[v],v,_)}}return typeof g!="function"&&(g=o(g==null?0:+g)),A.initialize=function(v){_=v,y()},A.strength=function(v){return arguments.length?(E=typeof v=="function"?v:o(+v),y(),A):E},A.y=function(v){return arguments.length?(g=typeof v=="function"?v:o(+v),y(),A):g},A},Object.defineProperty(e,"__esModule",{value:!0})}),function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae):typeof define=="function"&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{})}(this,function(e){function n(u,l,s){if(isNaN(l))return u;var f,b,m,g,_,x,C=u._root,E={data:s},A=u._x0,y=u._x1;if(!C)return u._root=E,u;for(;C.length;)if((g=l>=(b=(A+y)/2))?A=b:y=b,f=C,!(C=C[_=+g]))return f[_]=E,u;if(l===(m=+u._x.call(null,C.data)))return E.next=C,f?f[_]=E:u._root=E,u;do f=f?f[_]=new Array(2):u._root=new Array(2),(g=l>=(b=(A+y)/2))?A=b:y=b;while((_=+g)==(x=+(m>=b)));return f[x]=C,f[_]=E,u}function r(u,l,s){this.node=u,this.x0=l,this.x1=s}function i(u){return u[0]}function o(u,l){var s=new a(l??i,NaN,NaN);return u==null?s:s.addAll(u)}function a(u,l,s){this._x=u,this._x0=l,this._x1=s,this._root=void 0}function c(u){for(var l={data:u.data},s=l;u=u.next;)s=s.next={data:u.data};return l}var h=o.prototype=a.prototype;h.copy=function(){var u,l,s=new a(this._x,this._x0,this._x1),f=this._root;if(!f)return s;if(!f.length)return s._root=c(f),s;for(u=[{source:f,target:s._root=new Array(2)}];f=u.pop();)for(var b=0;b<2;++b)(l=f.source[b])&&(l.length?u.push({source:l,target:f.target[b]=new Array(2)}):f.target[b]=c(l));return s},h.add=function(u){var l=+this._x.call(null,u);return n(this.cover(l),l,u)},h.addAll=function(u){var l,s,f=u.length,b=new Array(f),m=1/0,g=-1/0;for(l=0;l<f;++l)isNaN(s=+this._x.call(null,u[l]))||(b[l]=s,s<m&&(m=s),s>g&&(g=s));if(m>g)return this;for(this.cover(m).cover(g),l=0;l<f;++l)n(this,b[l],u[l]);return this},h.cover=function(u){if(isNaN(u=+u))return this;var l=this._x0,s=this._x1;if(isNaN(l))s=(l=Math.floor(u))+1;else{for(var f,b,m=s-l||1,g=this._root;l>u||u>=s;)switch(b=+(u<l),(f=new Array(2))[b]=g,g=f,m*=2,b){case 0:s=l+m;break;case 1:l=s-m}this._root&&this._root.length&&(this._root=g)}return this._x0=l,this._x1=s,this},h.data=function(){var u=[];return this.visit(function(l){if(!l.length)do u.push(l.data);while(l=l.next)}),u},h.extent=function(u){return arguments.length?this.cover(+u[0][0]).cover(+u[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},h.find=function(u,l){var s,f,b,m,g,_=this._x0,x=this._x1,C=[],E=this._root;for(E&&C.push(new r(E,_,x)),l==null?l=1/0:(_=u-l,x=u+l);m=C.pop();)if(!(!(E=m.node)||(f=m.x0)>x||(b=m.x1)<_))if(E.length){var A=(f+b)/2;C.push(new r(E[1],A,b),new r(E[0],f,A)),(g=+(u>=A))&&(m=C[C.length-1],C[C.length-1]=C[C.length-1-g],C[C.length-1-g]=m)}else{var y=Math.abs(u-+this._x.call(null,E.data));y<l&&(l=y,_=u-y,x=u+y,s=E.data)}return s},h.remove=function(u){if(isNaN(m=+this._x.call(null,u)))return this;var l,s,f,b,m,g,_,x,C,E=this._root,A=this._x0,y=this._x1;if(!E)return this;if(E.length)for(;;){if((_=m>=(g=(A+y)/2))?A=g:y=g,l=E,!(E=E[x=+_]))return this;if(!E.length)break;l[x+1&1]&&(s=l,C=x)}for(;E.data!==u;)if(f=E,!(E=E.next))return this;return(b=E.next)&&delete E.next,f?(b?f.next=b:delete f.next,this):l?(b?l[x]=b:delete l[x],(E=l[0]||l[1])&&E===(l[1]||l[0])&&!E.length&&(s?s[C]=E:this._root=E),this):(this._root=b,this)},h.removeAll=function(u){for(var l=0,s=u.length;l<s;++l)this.remove(u[l]);return this},h.root=function(){return this._root},h.size=function(){var u=0;return this.visit(function(l){if(!l.length)do++u;while(l=l.next)}),u},h.visit=function(u){var l,s,f,b,m=[],g=this._root;for(g&&m.push(new r(g,this._x0,this._x1));l=m.pop();)if(!u(g=l.node,f=l.x0,b=l.x1)&&g.length){var _=(f+b)/2;(s=g[1])&&m.push(new r(s,_,b)),(s=g[0])&&m.push(new r(s,f,_))}return this},h.visitAfter=function(u){var l,s=[],f=[];for(this._root&&s.push(new r(this._root,this._x0,this._x1));l=s.pop();){var b=l.node;if(b.length){var m,g=l.x0,_=l.x1,x=(g+_)/2;(m=b[0])&&s.push(new r(m,g,x)),(m=b[1])&&s.push(new r(m,x,_))}f.push(l)}for(;l=f.pop();)u(l.node,l.x0,l.x1);return this},h.x=function(u){return arguments.length?(this._x=u,this):this._x},e.binarytree=o,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae):typeof define=="function"&&define.amd?define(["exports"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{})}(this,function(e){function n(s,f,b,m,g){if(isNaN(f)||isNaN(b)||isNaN(m))return s;var _,x,C,E,A,y,v,k,w,S,T,I,z=s._root,O={data:g},p=s._x0,M=s._y0,d=s._z0,R=s._x1,B=s._y1,N=s._z1;if(!z)return s._root=O,s;for(;z.length;)if((k=f>=(x=(p+R)/2))?p=x:R=x,(w=b>=(C=(M+B)/2))?M=C:B=C,(S=m>=(E=(d+N)/2))?d=E:N=E,_=z,!(z=z[T=S<<2|w<<1|k]))return _[T]=O,s;if(A=+s._x.call(null,z.data),y=+s._y.call(null,z.data),v=+s._z.call(null,z.data),f===A&&b===y&&m===v)return O.next=z,_?_[T]=O:s._root=O,s;do _=_?_[T]=new Array(8):s._root=new Array(8),(k=f>=(x=(p+R)/2))?p=x:R=x,(w=b>=(C=(M+B)/2))?M=C:B=C,(S=m>=(E=(d+N)/2))?d=E:N=E;while((T=S<<2|w<<1|k)==(I=(v>=E)<<2|(y>=C)<<1|A>=x));return _[I]=z,_[T]=O,s}function r(s,f,b,m,g,_,x){this.node=s,this.x0=f,this.y0=b,this.z0=m,this.x1=g,this.y1=_,this.z1=x}function i(s){return s[0]}function o(s){return s[1]}function a(s){return s[2]}function c(s,f,b,m){var g=new h(f??i,b??o,m??a,NaN,NaN,NaN,NaN,NaN,NaN);return s==null?g:g.addAll(s)}function h(s,f,b,m,g,_,x,C,E){this._x=s,this._y=f,this._z=b,this._x0=m,this._y0=g,this._z0=_,this._x1=x,this._y1=C,this._z1=E,this._root=void 0}function u(s){for(var f={data:s.data},b=f;s=s.next;)b=b.next={data:s.data};return f}var l=c.prototype=h.prototype;l.copy=function(){var s,f,b=new h(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),m=this._root;if(!m)return b;if(!m.length)return b._root=u(m),b;for(s=[{source:m,target:b._root=new Array(8)}];m=s.pop();)for(var g=0;g<8;++g)(f=m.source[g])&&(f.length?s.push({source:f,target:m.target[g]=new Array(8)}):m.target[g]=u(f));return b},l.add=function(s){var f=+this._x.call(null,s),b=+this._y.call(null,s),m=+this._z.call(null,s);return n(this.cover(f,b,m),f,b,m,s)},l.addAll=function(s){var f,b,m,g,_,x=s.length,C=new Array(x),E=new Array(x),A=new Array(x),y=1/0,v=1/0,k=1/0,w=-1/0,S=-1/0,T=-1/0;for(b=0;b<x;++b)isNaN(m=+this._x.call(null,f=s[b]))||isNaN(g=+this._y.call(null,f))||isNaN(_=+this._z.call(null,f))||(C[b]=m,E[b]=g,A[b]=_,m<y&&(y=m),m>w&&(w=m),g<v&&(v=g),g>S&&(S=g),_<k&&(k=_),_>T&&(T=_));if(y>w||v>S||k>T)return this;for(this.cover(y,v,k).cover(w,S,T),b=0;b<x;++b)n(this,C[b],E[b],A[b],s[b]);return this},l.cover=function(s,f,b){if(isNaN(s=+s)||isNaN(f=+f)||isNaN(b=+b))return this;var m=this._x0,g=this._y0,_=this._z0,x=this._x1,C=this._y1,E=this._z1;if(isNaN(m))x=(m=Math.floor(s))+1,C=(g=Math.floor(f))+1,E=(_=Math.floor(b))+1;else{for(var A,y,v=x-m||1,k=this._root;m>s||s>=x||g>f||f>=C||_>b||b>=E;)switch(y=(b<_)<<2|(f<g)<<1|s<m,(A=new Array(8))[y]=k,k=A,v*=2,y){case 0:x=m+v,C=g+v,E=_+v;break;case 1:m=x-v,C=g+v,E=_+v;break;case 2:x=m+v,g=C-v,E=_+v;break;case 3:m=x-v,g=C-v,E=_+v;break;case 4:x=m+v,C=g+v,_=E-v;break;case 5:m=x-v,C=g+v,_=E-v;break;case 6:x=m+v,g=C-v,_=E-v;break;case 7:m=x-v,g=C-v,_=E-v}this._root&&this._root.length&&(this._root=k)}return this._x0=m,this._y0=g,this._z0=_,this._x1=x,this._y1=C,this._z1=E,this},l.data=function(){var s=[];return this.visit(function(f){if(!f.length)do s.push(f.data);while(f=f.next)}),s},l.extent=function(s){return arguments.length?this.cover(+s[0][0],+s[0][1],+s[0][2]).cover(+s[1][0],+s[1][1],+s[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},l.find=function(s,f,b,m){var g,_,x,C,E,A,y,v,k,w=this._x0,S=this._y0,T=this._z0,I=this._x1,z=this._y1,O=this._z1,p=[],M=this._root;for(M&&p.push(new r(M,w,S,T,I,z,O)),m==null?m=1/0:(w=s-m,S=f-m,T=b-m,I=s+m,z=f+m,O=b+m,m*=m);v=p.pop();)if(!(!(M=v.node)||(_=v.x0)>I||(x=v.y0)>z||(C=v.z0)>O||(E=v.x1)<w||(A=v.y1)<S||(y=v.z1)<T))if(M.length){var d=(_+E)/2,R=(x+A)/2,B=(C+y)/2;p.push(new r(M[7],d,R,B,E,A,y),new r(M[6],_,R,B,d,A,y),new r(M[5],d,x,B,E,R,y),new r(M[4],_,x,B,d,R,y),new r(M[3],d,R,C,E,A,B),new r(M[2],_,R,C,d,A,B),new r(M[1],d,x,C,E,R,B),new r(M[0],_,x,C,d,R,B)),(k=(b>=B)<<2|(f>=R)<<1|s>=d)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-k],p[p.length-1-k]=v)}else{var N=s-+this._x.call(null,M.data),F=f-+this._y.call(null,M.data),D=b-+this._z.call(null,M.data),Q=N*N+F*F+D*D;if(Q<m){var G=Math.sqrt(m=Q);w=s-G,S=f-G,T=b-G,I=s+G,z=f+G,O=b+G,g=M.data}}return g},l.remove=function(s){if(isNaN(_=+this._x.call(null,s))||isNaN(x=+this._y.call(null,s))||isNaN(C=+this._z.call(null,s)))return this;var f,b,m,g,_,x,C,E,A,y,v,k,w,S,T,I=this._root,z=this._x0,O=this._y0,p=this._z0,M=this._x1,d=this._y1,R=this._z1;if(!I)return this;if(I.length)for(;;){if((v=_>=(E=(z+M)/2))?z=E:M=E,(k=x>=(A=(O+d)/2))?O=A:d=A,(w=C>=(y=(p+R)/2))?p=y:R=y,f=I,!(I=I[S=w<<2|k<<1|v]))return this;if(!I.length)break;(f[S+1&7]||f[S+2&7]||f[S+3&7]||f[S+4&7]||f[S+5&7]||f[S+6&7]||f[S+7&7])&&(b=f,T=S)}for(;I.data!==s;)if(m=I,!(I=I.next))return this;return(g=I.next)&&delete I.next,m?(g?m.next=g:delete m.next,this):f?(g?f[S]=g:delete f[S],(I=f[0]||f[1]||f[2]||f[3]||f[4]||f[5]||f[6]||f[7])&&I===(f[7]||f[6]||f[5]||f[4]||f[3]||f[2]||f[1]||f[0])&&!I.length&&(b?b[T]=I:this._root=I),this):(this._root=g,this)},l.removeAll=function(s){for(var f=0,b=s.length;f<b;++f)this.remove(s[f]);return this},l.root=function(){return this._root},l.size=function(){var s=0;return this.visit(function(f){if(!f.length)do++s;while(f=f.next)}),s},l.visit=function(s){var f,b,m,g,_,x,C,E,A=[],y=this._root;for(y&&A.push(new r(y,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));f=A.pop();)if(!s(y=f.node,m=f.x0,g=f.y0,_=f.z0,x=f.x1,C=f.y1,E=f.z1)&&y.length){var v=(m+x)/2,k=(g+C)/2,w=(_+E)/2;(b=y[7])&&A.push(new r(b,v,k,w,x,C,E)),(b=y[6])&&A.push(new r(b,m,k,w,v,C,E)),(b=y[5])&&A.push(new r(b,v,g,w,x,k,E)),(b=y[4])&&A.push(new r(b,m,g,w,v,k,E)),(b=y[3])&&A.push(new r(b,v,k,_,x,C,w)),(b=y[2])&&A.push(new r(b,m,k,_,v,C,w)),(b=y[1])&&A.push(new r(b,v,g,_,x,k,w)),(b=y[0])&&A.push(new r(b,m,g,_,v,k,w))}return this},l.visitAfter=function(s){var f,b=[],m=[];for(this._root&&b.push(new r(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));f=b.pop();){var g=f.node;if(g.length){var _,x=f.x0,C=f.y0,E=f.z0,A=f.x1,y=f.y1,v=f.z1,k=(x+A)/2,w=(C+y)/2,S=(E+v)/2;(_=g[0])&&b.push(new r(_,x,C,E,k,w,S)),(_=g[1])&&b.push(new r(_,k,C,E,A,w,S)),(_=g[2])&&b.push(new r(_,x,w,E,k,y,S)),(_=g[3])&&b.push(new r(_,k,w,E,A,y,S)),(_=g[4])&&b.push(new r(_,x,C,S,k,w,v)),(_=g[5])&&b.push(new r(_,k,C,S,A,w,v)),(_=g[6])&&b.push(new r(_,x,w,S,k,y,v)),(_=g[7])&&b.push(new r(_,k,w,S,A,y,v))}m.push(f)}for(;f=m.pop();)s(f.node,f.x0,f.y0,f.z0,f.x1,f.y1,f.z1);return this},l.x=function(s){return arguments.length?(this._x=s,this):this._x},l.y=function(s){return arguments.length?(this._y=s,this):this._y},l.z=function(s){return arguments.length?(this._z=s,this):this._z},e.octree=c,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,n){typeof ae=="object"&&typeof Ce<"u"?n(ae,t(),t(),t(),t(),t()):typeof define=="function"&&define.amd?define(["exports","d3-binarytree","d3-quadtree","d3-octree","d3-dispatch","d3-timer"],n):n((e=typeof globalThis<"u"?globalThis:e||self).d3=e.d3||{},e.d3,e.d3,e.d3,e.d3,e.d3)}(this,function(e,n,r,i,o,a){function c(A){return function(){return A}}function h(A){return 1e-6*(A()-.5)}function u(A){return A.x+A.vx}function l(A){return A.y+A.vy}function s(A){return A.z+A.vz}function f(A){return A.index}function b(A,y){var v=A.get(y);if(!v)throw new Error("node not found: "+y);return v}const m=4294967296;function g(A){return A.x}function _(A){return A.y}function x(A){return A.z}var C=Math.PI*(3-Math.sqrt(5)),E=20*Math.PI/(9+Math.sqrt(221));e.forceCenter=function(A,y,v){var k,w=1;function S(){var T,I,z=k.length,O=0,p=0,M=0;for(T=0;T<z;++T)O+=(I=k[T]).x||0,p+=I.y||0,M+=I.z||0;for(O=(O/z-A)*w,p=(p/z-y)*w,M=(M/z-v)*w,T=0;T<z;++T)I=k[T],O&&(I.x-=O),p&&(I.y-=p),M&&(I.z-=M)}return A==null&&(A=0),y==null&&(y=0),v==null&&(v=0),S.initialize=function(T){k=T},S.x=function(T){return arguments.length?(A=+T,S):A},S.y=function(T){return arguments.length?(y=+T,S):y},S.z=function(T){return arguments.length?(v=+T,S):v},S.strength=function(T){return arguments.length?(w=+T,S):w},S},e.forceCollide=function(A){var y,v,k,w,S=1,T=1;function I(){for(var p,M,d,R,B,N,F,D,Q=y.length,G=0;G<T;++G)for(M=(v===1?n.binarytree(y,u):v===2?r.quadtree(y,u,l):v===3?i.octree(y,u,l,s):null).visitAfter(z),p=0;p<Q;++p)d=y[p],F=k[d.index],D=F*F,R=d.x+d.vx,v>1&&(B=d.y+d.vy),v>2&&(N=d.z+d.vz),M.visit(U);function U(W,Y,q,X,J,ue,te){var le=[Y,q,X,J,ue,te],be=le[0],Ye=le[1],nt=le[2],Ot=le[v],Tt=le[v+1],rt=le[v+2],se=W.data,Fe=W.r,P=F+Fe;if(!se)return be>R+P||Ot<R-P||v>1&&(Ye>B+P||Tt<B-P)||v>2&&(nt>N+P||rt<N-P);if(se.index>d.index){var L=R-se.x-se.vx,H=v>1?B-se.y-se.vy:0,j=v>2?N-se.z-se.vz:0,V=L*L+H*H+j*j;V<P*P&&(L===0&&(V+=(L=h(w))*L),v>1&&H===0&&(V+=(H=h(w))*H),v>2&&j===0&&(V+=(j=h(w))*j),V=(P-(V=Math.sqrt(V)))/V*S,d.vx+=(L*=V)*(P=(Fe*=Fe)/(D+Fe)),v>1&&(d.vy+=(H*=V)*P),v>2&&(d.vz+=(j*=V)*P),se.vx-=L*(P=1-P),v>1&&(se.vy-=H*P),v>2&&(se.vz-=j*P))}}}function z(p){if(p.data)return p.r=k[p.data.index];for(var M=p.r=0;M<Math.pow(2,v);++M)p[M]&&p[M].r>p.r&&(p.r=p[M].r)}function O(){if(y){var p,M,d=y.length;for(k=new Array(d),p=0;p<d;++p)M=y[p],k[M.index]=+A(M,p,y)}}return typeof A!="function"&&(A=c(A==null?1:+A)),I.initialize=function(p,...M){y=p,w=M.find(d=>typeof d=="function")||Math.random,v=M.find(d=>[1,2,3].includes(d))||2,O()},I.iterations=function(p){return arguments.length?(T=+p,I):T},I.strength=function(p){return arguments.length?(S=+p,I):S},I.radius=function(p){return arguments.length?(A=typeof p=="function"?p:c(+p),O(),I):A},I},e.forceLink=function(A){var y,v,k,w,S,T,I,z=f,O=function(F){return 1/Math.min(S[F.source.index],S[F.target.index])},p=c(30),M=1;function d(F){for(var D=0,Q=A.length;D<M;++D)for(var G,U,W,Y,q,X=0,J=0,ue=0,te=0;X<Q;++X)U=(G=A[X]).source,J=(W=G.target).x+W.vx-U.x-U.vx||h(I),w>1&&(ue=W.y+W.vy-U.y-U.vy||h(I)),w>2&&(te=W.z+W.vz-U.z-U.vz||h(I)),J*=Y=((Y=Math.sqrt(J*J+ue*ue+te*te))-v[X])/Y*F*y[X],ue*=Y,te*=Y,W.vx-=J*(q=T[X]),w>1&&(W.vy-=ue*q),w>2&&(W.vz-=te*q),U.vx+=J*(q=1-q),w>1&&(U.vy+=ue*q),w>2&&(U.vz+=te*q)}function R(){if(k){var F,D,Q=k.length,G=A.length,U=new Map(k.map((W,Y)=>[z(W,Y,k),W]));for(F=0,S=new Array(Q);F<G;++F)(D=A[F]).index=F,typeof D.source!="object"&&(D.source=b(U,D.source)),typeof D.target!="object"&&(D.target=b(U,D.target)),S[D.source.index]=(S[D.source.index]||0)+1,S[D.target.index]=(S[D.target.index]||0)+1;for(F=0,T=new Array(G);F<G;++F)D=A[F],T[F]=S[D.source.index]/(S[D.source.index]+S[D.target.index]);y=new Array(G),B(),v=new Array(G),N()}}function B(){if(k)for(var F=0,D=A.length;F<D;++F)y[F]=+O(A[F],F,A)}function N(){if(k)for(var F=0,D=A.length;F<D;++F)v[F]=+p(A[F],F,A)}return A==null&&(A=[]),d.initialize=function(F,...D){k=F,I=D.find(Q=>typeof Q=="function")||Math.random,w=D.find(Q=>[1,2,3].includes(Q))||2,R()},d.links=function(F){return arguments.length?(A=F,R(),d):A},d.id=function(F){return arguments.length?(z=F,d):z},d.iterations=function(F){return arguments.length?(M=+F,d):M},d.strength=function(F){return arguments.length?(O=typeof F=="function"?F:c(+F),B(),d):O},d.distance=function(F){return arguments.length?(p=typeof F=="function"?F:c(+F),N(),d):p},d},e.forceManyBody=function(){var A,y,v,k,w,S,T=c(-30),I=1,z=1/0,O=.81;function p(B){var N,F=A.length,D=(y===1?n.binarytree(A,g):y===2?r.quadtree(A,g,_):y===3?i.octree(A,g,_,x):null).visitAfter(d);for(w=B,N=0;N<F;++N)v=A[N],D.visit(R)}function M(){if(A){var B,N,F=A.length;for(S=new Array(F),B=0;B<F;++B)N=A[B],S[N.index]=+T(N,B,A)}}function d(B){var N,F,D,Q,G,U,W=0,Y=0,q=B.length;if(q){for(D=Q=G=U=0;U<q;++U)(N=B[U])&&(F=Math.abs(N.value))&&(W+=N.value,Y+=F,D+=F*(N.x||0),Q+=F*(N.y||0),G+=F*(N.z||0));W*=Math.sqrt(4/q),B.x=D/Y,y>1&&(B.y=Q/Y),y>2&&(B.z=G/Y)}else{(N=B).x=N.data.x,y>1&&(N.y=N.data.y),y>2&&(N.z=N.data.z);do W+=S[N.data.index];while(N=N.next)}B.value=W}function R(B,N,F,D,Q){if(!B.value)return!0;var G=[F,D,Q][y-1],U=B.x-v.x,W=y>1?B.y-v.y:0,Y=y>2?B.z-v.z:0,q=G-N,X=U*U+W*W+Y*Y;if(q*q/O<X)return X<z&&(U===0&&(X+=(U=h(k))*U),y>1&&W===0&&(X+=(W=h(k))*W),y>2&&Y===0&&(X+=(Y=h(k))*Y),X<I&&(X=Math.sqrt(I*X)),v.vx+=U*B.value*w/X,y>1&&(v.vy+=W*B.value*w/X),y>2&&(v.vz+=Y*B.value*w/X)),!0;if(!(B.length||X>=z)){(B.data!==v||B.next)&&(U===0&&(X+=(U=h(k))*U),y>1&&W===0&&(X+=(W=h(k))*W),y>2&&Y===0&&(X+=(Y=h(k))*Y),X<I&&(X=Math.sqrt(I*X)));do B.data!==v&&(q=S[B.data.index]*w/X,v.vx+=U*q,y>1&&(v.vy+=W*q),y>2&&(v.vz+=Y*q));while(B=B.next)}}return p.initialize=function(B,...N){A=B,k=N.find(F=>typeof F=="function")||Math.random,y=N.find(F=>[1,2,3].includes(F))||2,M()},p.strength=function(B){return arguments.length?(T=typeof B=="function"?B:c(+B),M(),p):T},p.distanceMin=function(B){return arguments.length?(I=B*B,p):Math.sqrt(I)},p.distanceMax=function(B){return arguments.length?(z=B*B,p):Math.sqrt(z)},p.theta=function(B){return arguments.length?(O=B*B,p):Math.sqrt(O)},p},e.forceRadial=function(A,y,v,k){var w,S,T,I,z=c(.1);function O(M){for(var d=0,R=w.length;d<R;++d){var B=w[d],N=B.x-y||1e-6,F=(B.y||0)-v||1e-6,D=(B.z||0)-k||1e-6,Q=Math.sqrt(N*N+F*F+D*D),G=(I[d]-Q)*T[d]*M/Q;B.vx+=N*G,S>1&&(B.vy+=F*G),S>2&&(B.vz+=D*G)}}function p(){if(w){var M,d=w.length;for(T=new Array(d),I=new Array(d),M=0;M<d;++M)I[M]=+A(w[M],M,w),T[M]=isNaN(I[M])?0:+z(w[M],M,w)}}return typeof A!="function"&&(A=c(+A)),y==null&&(y=0),v==null&&(v=0),k==null&&(k=0),O.initialize=function(M,...d){w=M,S=d.find(R=>[1,2,3].includes(R))||2,p()},O.strength=function(M){return arguments.length?(z=typeof M=="function"?M:c(+M),p(),O):z},O.radius=function(M){return arguments.length?(A=typeof M=="function"?M:c(+M),p(),O):A},O.x=function(M){return arguments.length?(y=+M,O):y},O.y=function(M){return arguments.length?(v=+M,O):v},O.z=function(M){return arguments.length?(k=+M,O):k},O},e.forceSimulation=function(A,y){y=y||2;var v,k=Math.min(3,Math.max(1,Math.round(y))),w=1,S=.001,T=1-Math.pow(S,1/300),I=0,z=.6,O=new Map,p=a.timer(R),M=o.dispatch("tick","end"),d=function(){let D=1;return()=>(D=(1664525*D+1013904223)%m)/m}();function R(){B(),M.call("tick",v),w<S&&(p.stop(),M.call("end",v))}function B(D){var Q,G,U=A.length;D===void 0&&(D=1);for(var W=0;W<D;++W)for(w+=(I-w)*T,O.forEach(function(Y){Y(w)}),Q=0;Q<U;++Q)(G=A[Q]).fx==null?G.x+=G.vx*=z:(G.x=G.fx,G.vx=0),k>1&&(G.fy==null?G.y+=G.vy*=z:(G.y=G.fy,G.vy=0)),k>2&&(G.fz==null?G.z+=G.vz*=z:(G.z=G.fz,G.vz=0));return v}function N(){for(var D,Q=0,G=A.length;Q<G;++Q){if((D=A[Q]).index=Q,D.fx!=null&&(D.x=D.fx),D.fy!=null&&(D.y=D.fy),D.fz!=null&&(D.z=D.fz),isNaN(D.x)||k>1&&isNaN(D.y)||k>2&&isNaN(D.z)){var U=10*(k>2?Math.cbrt(.5+Q):k>1?Math.sqrt(.5+Q):Q),W=Q*C,Y=Q*E;k===1?D.x=U:k===2?(D.x=U*Math.cos(W),D.y=U*Math.sin(W)):(D.x=U*Math.sin(W)*Math.cos(Y),D.y=U*Math.cos(W),D.z=U*Math.sin(W)*Math.sin(Y))}(isNaN(D.vx)||k>1&&isNaN(D.vy)||k>2&&isNaN(D.vz))&&(D.vx=0,k>1&&(D.vy=0),k>2&&(D.vz=0))}}function F(D){return D.initialize&&D.initialize(A,d,k),D}return A==null&&(A=[]),N(),v={tick:B,restart:function(){return p.restart(R),v},stop:function(){return p.stop(),v},numDimensions:function(D){return arguments.length?(k=Math.min(3,Math.max(1,Math.round(D))),O.forEach(F),v):k},nodes:function(D){return arguments.length?(A=D,N(),O.forEach(F),v):A},alpha:function(D){return arguments.length?(w=+D,v):w},alphaMin:function(D){return arguments.length?(S=+D,v):S},alphaDecay:function(D){return arguments.length?(T=+D,v):+T},alphaTarget:function(D){return arguments.length?(I=+D,v):I},velocityDecay:function(D){return arguments.length?(z=1-D,v):1-z},randomSource:function(D){return arguments.length?(d=D,O.forEach(F),v):d},force:function(D,Q){return arguments.length>1?(Q==null?O.delete(D):O.set(D,F(Q)),v):O.get(D)},find:function(){var D,Q,G,U,W,Y,q=Array.prototype.slice.call(arguments),X=q.shift()||0,J=(k>1?q.shift():null)||0,ue=(k>2?q.shift():null)||0,te=q.shift()||1/0,le=0,be=A.length;for(te*=te,le=0;le<be;++le)(U=(D=X-(W=A[le]).x)*D+(Q=J-(W.y||0))*Q+(G=ue-(W.z||0))*G)<te&&(Y=W,te=U);return Y},on:function(D,Q){return arguments.length>1?(M.on(D,Q),v):M.on(D)}}},e.forceX=function(A){var y,v,k,w=c(.1);function S(I){for(var z,O=0,p=y.length;O<p;++O)(z=y[O]).vx+=(k[O]-z.x)*v[O]*I}function T(){if(y){var I,z=y.length;for(v=new Array(z),k=new Array(z),I=0;I<z;++I)v[I]=isNaN(k[I]=+A(y[I],I,y))?0:+w(y[I],I,y)}}return typeof A!="function"&&(A=c(A==null?0:+A)),S.initialize=function(I){y=I,T()},S.strength=function(I){return arguments.length?(w=typeof I=="function"?I:c(+I),T(),S):w},S.x=function(I){return arguments.length?(A=typeof I=="function"?I:c(+I),T(),S):A},S},e.forceY=function(A){var y,v,k,w=c(.1);function S(I){for(var z,O=0,p=y.length;O<p;++O)(z=y[O]).vy+=(k[O]-z.y)*v[O]*I}function T(){if(y){var I,z=y.length;for(v=new Array(z),k=new Array(z),I=0;I<z;++I)v[I]=isNaN(k[I]=+A(y[I],I,y))?0:+w(y[I],I,y)}}return typeof A!="function"&&(A=c(A==null?0:+A)),S.initialize=function(I){y=I,T()},S.strength=function(I){return arguments.length?(w=typeof I=="function"?I:c(+I),T(),S):w},S.y=function(I){return arguments.length?(A=typeof I=="function"?I:c(+I),T(),S):A},S},e.forceZ=function(A){var y,v,k,w=c(.1);function S(I){for(var z,O=0,p=y.length;O<p;++O)(z=y[O]).vz+=(k[O]-z.z)*v[O]*I}function T(){if(y){var I,z=y.length;for(v=new Array(z),k=new Array(z),I=0;I<z;++I)v[I]=isNaN(k[I]=+A(y[I],I,y))?0:+w(y[I],I,y)}}return typeof A!="function"&&(A=c(A==null?0:+A)),S.initialize=function(I){y=I,T()},S.strength=function(I){return arguments.length?(w=typeof I=="function"?I:c(+I),T(),S):w},S.z=function(I){return arguments.length?(A=typeof I=="function"?I:c(+I),T(),S):A},S},Object.defineProperty(e,"__esModule",{value:!0})}),this._handleSetAttribute=(e,n)=>{let r=e.split("."),i=this;for(let o=0;o<r.length;o++)i=i?.[r[o]];i?.(n)},self.onmessage=function(e){let n=!1;if(e.data.type=="pause")this.simulation.stop();else if(e.data.type=="resume")this.simulation.restart();else if(e.data.type=="setAttribute")this._handleSetAttribute(e.data.attributeName,e.data.value);else if(e.data.type=="start"){let h=function(){var u,l=.01,s=.1;function f(b){const m=Math.sqrt(u.length)*b*l;for(let g=0,_=u.length,x;g<_;++g){x=u[g];let C=Math.sqrt(x.x*x.x+x.y*x.y+x.z*x.z+s),E=m/C;x.vx-=x.x*E,x.vy-=x.y*E,x.vz-=x.z*E}}return f.initialize=function(b){u=b},f.strength=function(b){return arguments.length?(l=+b,f):l},f.softening=function(b){return arguments.length?(s=+b,f):s},f};var r=h;let i=e.data.positions,o=e.data.edges;e.data.use2D&&(n=!0);let a=[],c=[];for(let u=0;u<i.length/3;u++){let l=i[u*3+0]*10,s=i[u*3+1]*10,f=i[u*3+2]*10,b=0;a.push({x:l,y:s,z:f,vz:b,ID:u})}for(let u=0;u<o.length/2;u++){let l=o[u*2],s=o[u*2+1],f={source:l,target:s};c.push(f)}this.repulsiveforce=d3.forceManyBody(),this.attractiveforce=d3.forceLink(c),this.centralForce=d3.forceCenter(),this.gravityForce=h(),this.simulation=d3.forceSimulation(a).numDimensions(n?2:3).force("charge",this.repulsiveforce).force("link",this.attractiveforce).force("center",centralForce).velocityDecay(.05).on("tick",async()=>{for(let u=0;u<a.length;u++){const l=a[u];i[u*3+0]=l.x/10,i[u*3+1]=l.y/10,n?i[u*3+2]=0:i[u*3+2]=l.z/10}self.postMessage({type:"update",positions:i})}).on("end",()=>{self.postMessage({type:"stop"})})}}},Fl=Nl.toString(),zl=URL.createObjectURL(new Blob([`(${Fl})()`],{type:"text/javascript"}));class Ol{constructor({network:e=null,onUpdate:n=null,onStop:r=null,onStart:i=null,use2D:o=!1}){this._network=e,this._onUpdate=n,this._onStop=r,this._onStart=i,this._use2D=o,this._layoutWorker=null}start(){return this._layoutWorker||(this._layoutWorker=new Worker(zl),this._layoutWorker.onmessage=e=>{e.data.type=="update"?this._onUpdate?.(e.data):e.data.type=="stop"?(this._onStop?.(e.data),this._layoutRunning=!1):e.data.type=="getAttribute"?this._handleReturnAttribute(e.data):console.log("Layout received Unknown msg: ",e)},this._layoutRunning=!0,this._onStart?.(),this._layoutWorker.postMessage({type:"start",positions:this._network.positions,edges:this._network.indexedEdges,use2D:this._use2D})),this}restart(){return this.stop(),this.start(),this}stop(){return this._layoutRunning&&this._onStop?.(),this._layoutWorker.terminate(),this._layoutRunning=!1,delete this._layoutWorker,this._layoutWorker=null,this}resume(){return this.start(),this._layoutRunning||this._onStart?.(),this._layoutWorker.postMessage({type:"resume"}),this._layoutRunning=!0,this}pause(){return this._layoutWorker.postMessage({type:"pause"}),this._layoutRunning=!1,this._onStop?.(),this}onUpdate(e){return this._onUpdate=e,this}onStop(e){return this._onStop=e,this}onStart(e){return this._onStart=e,this}isRunning(){return this._layoutRunning}cleanup(){this.stop()}async _handleGetAttribute(){}setAttribute(e,n){return this._layoutWorker.postMessage({type:"setAttribute",attributeName:e,value:n}),this}groups(e){return this.setAttribute("groups",e)}alpha(e){return this.setAttribute("alpha",e)}alphaDecay(e){return this.setAttribute("alphaDecay",e)}alphaTarget(e){return this.setAttribute("alphaTarget",e)}velocityDecay(e){return this.setAttribute("velocityDecay",e)}}let Hn=`
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
 
uniform float globalSizeScale;
uniform float globalSizeBase;
uniform float globalWidthScale;
uniform float globalWidthBase;

uniform float globalOpacityScale;
uniform float globalOpacityBase;

attribute vec3 fromVertex;
attribute vec3 toVertex;
attribute vec2 vertexType;
// 0,1:  0.0, 1.0, // source, top
// 0,0:  0.0, 0.0, // source, bottom
// 1,1:  1.0, 1.0, // target, top
// 1,0:  1.0, 0.0, // target, bottom

attribute vec4 fromColor;
attribute vec4 toColor;
attribute float fromSize;
attribute float toSize;
attribute vec4 encodedIndex;

varying vec4 vColor;
varying vec3 vOffset;
varying vec4 vEncodedIndex;


//varying float vZComponent;

void main(void){
	vColor = (fromColor)*vertexType.x + (toColor)*(1.0-vertexType.x);
	vColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);
	float updatedFromSize = globalSizeScale*fromSize+globalSizeBase;
	float updatedToSize = globalSizeScale*toSize+globalSizeBase;

	float width = globalWidthBase+globalWidthScale*((updatedFromSize)*vertexType.x + (updatedToSize)*(1.0-vertexType.x));
	vEncodedIndex = encodedIndex;
	//vZComponent = viewVertex.z;
	vec3 vertexCenter = fromVertex.xyz*vertexType.x + toVertex.xyz*(1.0-vertexType.x);
	vec3 destinationVertexCenter = fromVertex.xyz*(1.0-vertexType.x) + toVertex.xyz*vertexType.x;
	
	vec3 displacement = (viewMatrix*vec4((destinationVertexCenter-vertexCenter),0.0)).xyz;
	vec3 perpendicularVector = normalize(vec3(-displacement.y, displacement.x, 0.0));
	vec3 offset = width*(vertexType.x-0.5)*(vertexType.y-0.5)*4.0*1.5*perpendicularVector;
	
	vec4 viewVertex = viewMatrix * vec4(vertexCenter.xyz,1.0)+vec4(offset,0.0);
	float displacementLength = length(displacement);
	vOffset = vec3(vertexType.x,updatedToSize/displacementLength*1.5,updatedFromSize/displacementLength*1.5);
	gl_Position = projectionMatrix*viewVertex;
	
}
`,Tl=`
#ifdef GL_ES
	precision highp float;
#endif
//uniform vec2 nearFar;
varying vec4 vEncodedIndex;
varying vec4 vColor;
varying vec3 vOffset;
//varying float vZComponent;
//gl_DepthRange.near)/gl_DepthRange.diff
void main(){
	//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);
	if(vOffset.x<vOffset.y || vOffset.x>(1.0-vOffset.z)){
		discard;
	}

	// gl_FragColor = vec4(vOffset.x,vOffset.x,0,1.0);//vec4(vColor.xyz,globalOpacity*vColor.w);
	gl_FragColor = vColor;
}
`,Dl=`
#ifdef GL_ES
	precision highp float;
#endif
//uniform vec2 nearFar;
varying vec4 vEncodedIndex;
varying vec4 vColor;
varying vec3 vOffset;
//varying float vZComponent;
//gl_DepthRange.near)/gl_DepthRange.diff
void main(){

	if(vOffset.x<vOffset.y*1.1 || vOffset.x>(1.0-vOffset.z*1.1) || (vEncodedIndex.x+vEncodedIndex.y+vEncodedIndex.z+vEncodedIndex.w)<=0.0){
		discard;
	}
	//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);
	gl_FragColor = vEncodedIndex;
	
}
`,Pl=`
uniform mat4 projectionViewMatrix;
uniform float globalOpacityScale;
uniform float globalOpacityBase;

attribute vec3 vertex;
attribute vec4 color;


varying vec4 vColor;
varying vec4 vEncodedIndex;

//varying float vZComponent;

void main(void){
	vColor = color;
	vColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);
	//vZComponent = viewVertex.z;
	gl_Position =   projectionViewMatrix * vec4(vertex,1.0);
}
`,Ql=`
#ifdef GL_ES
	precision highp float;
#endif
//uniform vec2 nearFar;
varying vec4 vColor;
//varying float vZComponent;
//gl_DepthRange.near)/gl_DepthRange.diff
void main(){
	//float w = (-vZComponent-nearFar[0])/(nearFar[1]-nearFar[0]);
	gl_FragColor = vColor;
	// gl_FragColor = vec4(vEncodedIndex.x/10,0,0,1.0);
}

`,Kt=`
// uniform mat4 projectionMatrix;
// uniform mat4 viewMatrix;
// uniform mat3 normalMatrix;


// attribute vec4 vertex;
// attribute vec3 normal;
// attribute vec3 position;
// attribute vec3 color;
// attribute float size;
// attribute float Opacity;

// varying vec3 vNormal;
// varying vec3 vEye;

// varying vec3 vColor;
// varying float vSize;
// varying float vOpacity;

// void main(void){
// 	vec4 viewVertex = viewMatrix * (vertex*vec4(vec3(size),1.0) + vec4(position,0.0));
// 	vNormal = normalMatrix * normal;
// 	vEye = -vec3(viewVertex);
// 	vOpacity = Opacity;
// 	vColor = color;
// 	gl_Position =   projectionMatrix * viewVertex;
// }

uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

uniform float globalOpacityScale;
uniform float globalSizeScale;
uniform float globalOutlineWidthScale;

uniform float globalOpacityBase;
uniform float globalSizeBase;
uniform float globalOutlineWidthBase;

attribute vec2 vertex;
// attribute vec3 normal;
attribute vec3 position;
attribute vec4 color;
attribute float size;
attribute float outlineWidth;
attribute vec4 outlineColor;
attribute vec4 encodedIndex;

varying vec3 vNormal;
varying vec3 vEye;
varying vec4 vColor;
varying vec2 vOffset;
varying float vSize;
varying vec4 vEncodedIndex;
varying float vOutlineThreshold;
varying vec4 vOutlineColor;
varying vec4 vPosition;

void main(void){
	float BoxCorrection = 1.5;
	vec2 offset = vertex;
	float updatedSize = globalSizeScale*size+globalSizeBase;
	float updatedOutlineWidth = globalOutlineWidthScale*outlineWidth+globalOutlineWidthBase;
	float fullSize = updatedSize + updatedOutlineWidth;
	// vec4 viewCenters = viewMatrix*vec4(position,1);
	// vec3 viewCenters = position;
	// fragCenter = viewCenters
	// float scalingFactor = 1.0 / abs(centers.x)*0.001;
	// offset*=scalingFactor;
	vec3 cameraRight = normalize(vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]));
	vec3 cameraUp = normalize(vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]));

	// viewCenters.xy += offset*updatedSize*CameraRight_worldspace;
	
	vec4 viewCenters = viewMatrix*vec4(position+BoxCorrection*fullSize*(cameraRight*offset.x + cameraUp*offset.y),1.0);
	vNormal = vec3(0.0,0.0,1.0); //normalMatrix * normal;
	vEye = -vec3(offset,0.0);
	vEncodedIndex = encodedIndex;
	vColor = color;
	vColor.w = clamp(globalOpacityBase+globalOpacityScale*vColor.w,0.0,1.0);
	vOutlineColor.w = clamp(globalOpacityBase+globalOpacityScale*vOutlineColor.w,0.0,1.0);
	vOffset = vertex;
	vSize = updatedSize;
	vOutlineThreshold = updatedOutlineWidth/fullSize;
	vOutlineColor = outlineColor;
	vPosition = projectionMatrix * viewCenters;
	gl_Position = vPosition;
}
`,Gl=`// #ifdef GL_ES
// 	precision highp float;
// #endif

precision mediump float;
varying vec4 vColor;
varying vec4 vEncodedIndex;
varying vec3 vNormal;
varying vec3 vEye;
varying float vSize;
varying vec2 vOffset;
varying float vOutlineThreshold;
varying vec4 vOutlineColor;
varying vec4 vPosition;



void main(){
	// const vec3 lightDirection = vec3(0.577350269,0.577350269,0.577350269);
	// const float ambientFactor = 0.6;
	
	// vec3 normal = normalize(vNormal);
	// vec3 eye = normalize(vEye);
	
	// //Ambient+Diffuse
	// float cosTheta = max(dot(lightDirection,normal),0.0);
	// vec3 newColor = vColor*(ambientFactor+cosTheta);
	
	// //Specular
	// vec3 reflection = reflect(-lightDirection, normal);
	// float eyeDotReflection = max(dot(eye, reflection), 0.0);
	// newColor +=  vec3(0.5)* pow(eyeDotReflection, 60.0);
	
	// gl_FragColor = vec4(newColor,vOpacity);
	// gl_FragColor = vec4(eye,Opacity);
	//gl_FragData[0] = vec4(newColor,Opacity);

// Renaming variables passed from the Vertex Shader

	// vec3 cameraPos;
	// vec3 cameraNormal;

	// float lensqr = dot(vOffset, vOffset);

	// if(lensqr > 1.0)
	// 		discard;
		
	// cameraNormal = vec3(vOffset, sqrt(1.0 - lensqr));
	// cameraPos = (cameraNormal * size) + cameraSpherePos;

	// float len = length(point);
	// // VTK Fake Spheres
	// float radius = 1.;
	// if(len > radius)
	// 		discard;
	// vec3 normalizedPoint = normalize(vec3(point.xy, sqrt(1. - len)));
	// vec3 direction = normalize(vec3(1., 1., 1.));
	// float df2 = max(0, dot(direction, normalizedPoint));
	// float sf2 = pow(df2, 90);
	// fragOutput0 = vec4(max((df2+0.3) * color, sf2 * vec3(1)), 1);

	// fragOutput1 = vec4(vertexVC.xyz, 1.0);
	// fragOutput2 = vec4(normalVCVSOutput, 1.0);
	
	float lensqr = dot(vOffset, vOffset);

	if(lensqr > 1.0)
		discard;
	

	vec3 normalizedPoint = normalize(vec3(vOffset.xy, sqrt(1. - lensqr)));
	const vec3 lightDirection = vec3(0.577350269,0.577350269,0.577350269);
	const float ambientFactor = 0.6;
	
	vec3 normal = normalizedPoint;
	vec3 eye = normalize(vEye);
	
	//Ambient+Diffuse
	float cosTheta = max(dot(lightDirection,normal),0.0);
	vec3 newColor = vColor.xyz*(ambientFactor+cosTheta);
	
	//Specular
	vec3 reflection = reflect(-lightDirection, normal);
	float eyeDotReflection = max(dot(eye, reflection), 0.0);
	newColor +=  vec3(0.5)* pow(eyeDotReflection, 60.0);
	
	
	
	if(lensqr < 1.0-vOutlineThreshold){
		// gl_FragColor = vec4(vColor,vOpacity)
		gl_FragColor = vec4(newColor,vColor.w);;
	}else{
		gl_FragColor = vec4(vOutlineColor.xyz,vOutlineColor.w);
	}
	// gl_FragDepthEXT = 0.5; 
}
`,Ll=`
// #ifdef GL_ES
// 	precision highp float;
// #endif

precision mediump float;
varying vec4 vColor;
varying vec4 vEncodedIndex;
varying vec3 vNormal;
varying vec3 vEye;
varying float vSize;
varying vec2 vOffset;
varying float vOutlineThreshold;
varying vec4 vOutlineColor;

void main(){
	float lensqr = dot(vOffset, vOffset);

	if(lensqr > 1.0)
			discard;
	
	gl_FragColor = vEncodedIndex;
}
`,Ul=`
// #ifdef GL_ES
// 	precision highp float;
// #endif

precision mediump float;
varying vec4 vColor;
varying vec4 vEncodedIndex;
varying vec3 vNormal;
varying vec3 vEye;
varying float vSize;
varying vec2 vOffset;
varying float vOutlineThreshold;
varying vec4 vOutlineColor;
varying vec4 vPosition;



void main(){
	
	float lensqr = dot(vOffset, vOffset);

	if(lensqr > 1.0)
			discard;
	
	if(lensqr < 1.0-vOutlineThreshold){
		// gl_FragColor = vec4(vColor,vOpacity)
		gl_FragColor = vColor;
	}else{
		gl_FragColor = vOutlineColor;
	}
	// gl_FragDepthEXT = 0.5; 
}
`,Wl=Kt,Hl=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);class Yl{constructor({element:e=null,elementID:n=null,nodes:r={},edges:i=[],use2D:o=!1,fastEdges:a=!1,forceSupersample:c=!1,autoStartLayout:h=!0,autoCleanup:u=!0}){if(e==null?this.element=document.getElementById(n):this.element=e,this.element.innerHTML="",this.canvasElement=document.createElement("canvas"),this.element.appendChild(this.canvasElement),this.network=new Bi(r,i),this._autoCleanup=u,this.rotationMatrix=ze(),this.translatePosition=dt(),this.lastTranslatePosition=dt(),this.targetTranslatePosition=dt(),this.lastPanX=0,this.lastPanY=0,this.panX=0,this.panY=0,this.targetPanX=0,this.targetPanY=0,this.translateTime=0,this.translateDuration=0,this.mouseDown=!1,this.lastMouseX=null,this.lastMouseY=null,this.redrawingFromMouseWheelEvent=!1,this.fastEdges=a,this.animate=!1,this.useShadedNodes=!1,this.forceSupersample=c,this.cameraDistance=450,this._zoomFactor=1,this.interacting=!1,this.rotateLinearX=0,this.rotateLinearY=0,this.saveResolutionRatio=1,this.pickingResolutionRatio=.25,this._nodesGlobalOpacityScale=1,this._nodesGlobalOpacityBase=0,this._nodesGlobalSizeScale=1,this._nodesGlobalSizeBase=0,this._edgesGlobalOpacityScale=1,this._edgesGlobalOpacityBase=0,this._edgesGlobalWidthScale=.25,this._edgesGlobalWidthBase=0,this._nodesGlobalOutlineWidthScale=1,this._nodesGlobalOutlineWidthBase=0,this._backgroundColor=[.5,.5,.5,1],this._use2D=o,this._autoStartLayout=h,this.useAdditiveBlending=!1,this._pickeableEdges=new Set,this.scheduler=new wo(this,{throttle:!1}),this._use2D)for(let l=0;l<this.network.positions.length;l++)this.network.positions[l*3+2]=0;this._edgeIndicesUpdate=!0,Qt(this.rotationMatrix),this.gl=ki(this.canvasElement,{antialias:!0,powerPreference:"high-performance",desynchronized:!0}),this._centerNodes=[],this._centerNodesTransition=null,this.onNodeClickCallback=null,this.onNodeDoubleClickCallback=null,this.onNodeHoverStartCallback=null,this.onNodeHoverMoveCallback=null,this.onNodeHoverEndCallback=null,this.onEdgeClickCallback=null,this.onEdgeDoubleClickCallback=null,this.onEdgeHoverStartCallback=null,this.onEdgeHoverMoveCallback=null,this.onEdgeHoverEndCallback=null,this.onZoomCallback=null,this.onRotationCallback=null,this.onResizeCallback=null,this.onLayoutStartCallback=null,this.onLayoutStopCallback=null,this.onDrawCallback=null,this.onReadyCallback=null,this.isReady=!1,this.initialize(),this._onresizeEvent=l=>{this.willResizeEvent(l)},window.addEventListener("resize",this._onresizeEvent)}initialize(){this._setupShaders(),this._buildNodesGeometry(),this._buildPickingBuffers(),this._buildEdgesGeometry(),this.willResizeEvent(0),this._setupCamera(),this._setupEvents(),this._setupLayout(),this.scheduler.start(),this.onReadyCallback?.(this),this.onReadyCallback=null,this.isReady=!0}_setupLayout(){this.newPositions=this.network.positions.slice(0);let e=i=>{this.newPositions=i.positions;let o={name:"1.1.positionInterpolator",callback:(a,c)=>{let h=0;for(let u=0;u<this.network.positions.length;u++){let l=this.newPositions[u]-this.network.positions[u];this.network.positions[u]+=.05*l*a/10,h=Math.max(Math.abs(l),h)}this._updateCenterNodesPosition(),this.updateCameraInterpolation(!0),h<1&&this.scheduler.unschedule("1.1.positionInterpolator")},delay:0,repeat:!0,synchronized:!0,immediateUpdates:!1,redraw:!0,updateNodesGeometry:!0,updateEdgesGeometry:!0};this.scheduler.schedule({name:"1.0.positionChange",callback:(a,c)=>{this.scheduler.schedule(o)},delay:0,repeat:!1,synchronized:!0,immediateUpdates:!1,redraw:!1,updateNodesGeometry:!1,updateEdgesGeometry:!1})},n=()=>{this.onLayoutStopCallback?.()},r=()=>{this.onLayoutStartCallback?.()};this.layoutWorker=new Ol({network:this.network,onUpdate:e,onStop:n,onStart:r,use2D:this._use2D}),this._autoStartLayout&&this.layoutWorker.start()}pauseLayout(){this.layoutWorker.pause()}resumeLayout(){this.layoutWorker.resume()}_callEventFromPickID(e,n,r){let i=null,o=!0;if(e>=0){if(e<this.network.nodeCount)o=!0,i=this.network.index2Node[e];else if(e>=this.network.nodeCount){let a=e-this.network.nodeCount;if(a<this.network.indexedEdges.length/2){let c={source:this.network.index2Node[this.network.indexedEdges[2*a]],target:this.network.index2Node[this.network.indexedEdges[2*a+1]],index:a};o=!1,i=c}}}if(i)switch(n){case"click":{o?this.onNodeClickCallback?.(i,r):this.onEdgeClickCallback?.(i,r);break}case"doubleClick":{o?this.onNodeDoubleClickCallback?.(i,r):this.onEdgeDoubleClickCallback?.(i,r);break}case"hoverStart":{o?this.onNodeHoverStartCallback?.(i,r):this.onEdgeHoverStartCallback?.(i,r);break}case"hoverMove":{o?this.onNodeHoverMoveCallback?.(i,r):this.onEdgeHoverMoveCallback?.(i,r);break}case"hoverEnd":{o?this.onNodeHoverEndCallback?.(i,r):this.onEdgeHoverEndCallback?.(i,r);break}}}_setupEvents(){this.lastMouseX=-1,this.lastMouseY=-1,this.currentHoverIndex=-1,this._autoCleanup&&(this._mutationObserver=new MutationObserver(e=>{for(let n=0;n<e.length;n++){let r=e[n];if(r.type=="childList"&&r.removedNodes.length>0)for(let i=0;i<r.removedNodes.length;i++){let o=r.removedNodes[i];if(o==this.canvasElement||o==this.element){this._mutationObserver.disconnect(),this.cleanup();return}}}}),this._mutationObserver.observe(this.element,{childList:!0}),this._mutationObserver.observe(this.element.parentNode,{childList:!0})),this._clickEventListener=e=>{const n=this.canvasElement.getBoundingClientRect();this.lastMouseX=e.clientX,this.lastMouseY=e.clientY;const r=this.pickPoint(this.lastMouseX-n.left,this.lastMouseY-n.top);r>=0?this._callEventFromPickID(r,"click",e):(this.onNodeClickCallback?.(null,e),this.onEdgeClickCallback?.(null,e))},this._doubleClickEventListener=e=>{const n=this.canvasElement.getBoundingClientRect();this.lastMouseX=e.clientX,this.lastMouseY=e.clientY;const r=this.pickPoint(this.lastMouseX-n.left,this.lastMouseY-n.top);r>=0?this._callEventFromPickID(r,"doubleClick",e):(this.onNodeDoubleClickCallback?.(null,e),this.onEdgeDoubleClickCallback?.(null,e))},this._hoverMoveEventListener=e=>{this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,this.triggerHoverEvents(e)},this._hoverLeaveEventListener=e=>{this.currentHoverIndex>=0&&(this._callEventFromPickID(this.currentHoverIndex,"hoverEnd",e),this.currentHoverIndex=-1,this.lastMouseX=-1,this.lastMouseY=-1)},this._hoverLeaveWindowEventListener=e=>{!e.relatedTarget&&!e.toElement&&this.currentHoverIndex>=0&&(this._callEventFromPickID(this.currentHoverIndex,"hoverEnd",e),this.currentHoverIndex=-1,this.lastMouseX=-1,this.lastMouseY=-1)},this.canvasElement.addEventListener("click",this._clickEventListener),this.canvasElement.addEventListener("dblclick",this._doubleClickEventListener),this.canvasElement.addEventListener("mousemove",this._hoverMoveEventListener),this.canvasElement.addEventListener("mouseleave",this._hoverLeaveEventListener),document.body.addEventListener("mouseout",this._hoverLeaveWindowEventListener)}async _downloadImageData(e,n,r,i){let o=new Rl({}),a=document.createElement("canvas"),c=document.createElement("canvas"),h=a.getContext("2d"),u=c.getContext("2d");c.width=e.width,c.height=e.height,a.width=e.width/r,a.height=e.height/r,h.imageSmoothingEnabled=!0,u.imageSmoothingEnabled=!0,typeof h.imageSmoothingQuality<"u"&&(h.imageSmoothingQuality="high"),typeof u.imageSmoothingQuality<"u"&&(u.imageSmoothingQuality="high"),u.putImageData(e,0,0),u.transform(1,0,0,-1,0,c.height),u.globalCompositeOperation="copy",u.drawImage(u.canvas,0,0),u.globalCompositeOperation="source-over",await o.resize(c,a,{alpha:!0});let l=document.createElement("a");Hl&&a.toDataURL(),l.setAttribute("download",n);let s=await o.toBlob(a,"image/png");if(s)if(n.endsWith("svg")){let f=`
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
				width="${a.width}" height="${a.width}"
				>
				<image
						width="${a.width}" height="${a.width}"
						xlink:href="${s}"
						/>
				</svg>`;l.setAttribute("download",n);let b=new Blob([f],{type:"image/svg+xml"}),m=URL.createObjectURL(b);l.setAttribute("href",m),l.click()}else{let f=URL.createObjectURL(s);l.setAttribute("href",f),l.click()}else window.alert("An error occured while trying to download the image. Please try again. (Error: blob is null.)");if(n.endsWith("svg")){let f=`
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
			width="${a.width}" height="${a.width}"
			>
			<image
					width="${a.width}" height="${a.width}"
					xlink:href="${a.toDataURL()}"
					/>
			</svg>`;l.setAttribute("download",n);let b=new Blob([f],{type:"image/svg+xml"}),m=URL.createObjectURL(b);l.setAttribute("href",m),l.click()}}framebufferImage(e){const n=e.size.width,r=e.size.height,i=new Uint8ClampedArray(4*n*r);let o=this.gl;return o.bindFramebuffer(o.FRAMEBUFFER,e),o.readPixels(0,0,n,r,o.RGBA,o.UNSIGNED_BYTE,i),new ImageData(i,n,r)}exportFigure(e,{scale:n=1,supersampleFactor:r=4,width:i=null,height:o=null,backgroundColor:a=null}){typeof n>"u"&&(n=1),typeof r>"u"&&(r=2);let c=this.createOffscreenFramebuffer();i==null&&o==null?(i=this.canvasElement.width,o=this.canvasElement.height):i==null?i=Math.round(o*this.canvasElement.width/this.canvasElement.height):o==null&&(o=Math.round(i*this.canvasElement.height/this.canvasElement.width)),a==null&&(a=this.backgroundColor),c.setSize(i*n*r,o*n*r),c.backgroundColor=a,this._redrawAll(c);let h=this.framebufferImage(c);this._downloadImageData(h,e,r),c.discard()}triggerHoverEvents(e,n){if(!this.isReady||this.lastMouseX==-1||this.lastMouseY==-1)return;let r=-1;if(!this.interacting){const i=this.canvasElement.getBoundingClientRect();r=this.pickPoint(this.lastMouseX-i.left,this.lastMouseY-i.top)}r>=0&&this.currentHoverIndex==-1?(this.currentHoverIndex=r,this._callEventFromPickID(r,"hoverStart",e)):r>=0&&this.currentHoverIndex==r?this._callEventFromPickID(r,"hoverMove",e):r>=0&&this.currentHoverIndex!=r?(this._callEventFromPickID(this.currentHoverIndex,"hoverEnd",e),this.currentHoverIndex=r,this._callEventFromPickID(r,"hoverStart",e)):r==-1&&this.currentHoverIndex!=r&&(this._callEventFromPickID(this.currentHoverIndex,"hoverEnd",e),this.currentHoverIndex=-1)}_setupShaders(){let e=this.gl;this.edgesShaderProgram=new Oe(he(e,Hn,e.VERTEX_SHADER),he(e,Tl,e.FRAGMENT_SHADER),["viewMatrix","projectionMatrix","nearFar","globalOpacityScale","globalWidthScale","globalSizeScale","globalOpacityBase","globalWidthBase","globalSizeBase"],["fromVertex","toVertex","vertexType","fromColor","toColor","fromSize","toSize","encodedIndex"],this.gl),this.edgesFastShaderProgram=new Oe(he(e,Pl,e.VERTEX_SHADER),he(e,Ql,e.FRAGMENT_SHADER),["projectionViewMatrix","nearFar","globalOpacityScale","globalOpacityBase"],["vertex","color"],this.gl),this.edgesPickingShaderProgram=new Oe(he(e,Hn,e.VERTEX_SHADER),he(e,Dl,e.FRAGMENT_SHADER),["viewMatrix","projectionMatrix","nearFar","globalOpacityScale","globalWidthScale","globalSizeScale","globalOpacityBase","globalWidthBase","globalSizeBase"],["fromVertex","toVertex","vertexType","fromColor","toColor","fromSize","toSize","encodedIndex"],this.gl),this.nodesShaderProgram=new Oe(he(e,Kt,e.VERTEX_SHADER),he(e,Gl,e.FRAGMENT_SHADER),["viewMatrix","projectionMatrix","normalMatrix","globalOpacityScale","globalSizeScale","globalOutlineWidthScale","globalOpacityBase","globalSizeBase","globalOutlineWidthBase"],["vertex","position","color","size","outlineWidth","outlineColor","encodedIndex"],this.gl),this.nodesFastShaderProgram=new Oe(he(e,Wl,e.VERTEX_SHADER),he(e,Ul,e.FRAGMENT_SHADER),["viewMatrix","projectionMatrix","normalMatrix","globalOpacityScale","globalSizeScale","globalOutlineWidthScale","globalOpacityBase","globalSizeBase","globalOutlineWidthBase"],["vertex","position","color","size","outlineWidth","outlineColor","encodedIndex"],this.gl),this.nodesPickingShaderProgram=new Oe(he(e,Kt,e.VERTEX_SHADER),he(e,Ll,e.FRAGMENT_SHADER),["viewMatrix","projectionMatrix","normalMatrix","globalOpacityScale","globalSizeScale","globalOutlineWidthScale","globalOpacityBase","globalSizeBase","globalOutlineWidthBase"],["vertex","position","color","size","outlineWidth","outlineColor","encodedIndex"],this.gl)}_buildPickingBuffers(){this.gl,this.pickingFramebuffer=this.createOffscreenFramebuffer()}createOffscreenFramebuffer(){let e=this.gl,n=e.createFramebuffer();n.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,n.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n.depthBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.depthBuffer),e.bindFramebuffer(e.FRAMEBUFFER,n),n.size={width:0,height:0},n.setSize=(o,a)=>{e.bindTexture(e.TEXTURE_2D,n.texture);const c=0,h=e.RGBA,u=0,l=e.RGBA,s=e.UNSIGNED_BYTE,f=null,b=o,m=a;e.texImage2D(e.TEXTURE_2D,c,h,b,m,u,l,s,f),e.bindRenderbuffer(e.RENDERBUFFER,n.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,b,m),n.size.width=o,n.size.height=a},n.discard=()=>{e.deleteRenderbuffer(n.depthBuffer),e.deleteTexture(n.texture),e.deleteFramebuffer(n)};const r=e.COLOR_ATTACHMENT0,i=0;return e.framebufferTexture2D(e.FRAMEBUFFER,r,e.TEXTURE_2D,n.texture,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,n.depthBuffer),n}_buildNodesGeometry(){let e=this.gl;this.nodesGeometry=Mi(e,!1,!1),this.nodesPositionBuffer=e.createBuffer(),this.nodesColorBuffer=e.createBuffer(),this.nodesSizeBuffer=e.createBuffer(),this.nodesOutlineWidthBuffer=e.createBuffer(),this.nodesOutlineColorBuffer=e.createBuffer(),this.nodesIndexBuffer=e.createBuffer(),this.nodesIndexArray=new Float32Array(this.network.index2Node.length*4);for(let n=0;n<this.network.index2Node.length;n++)this.nodesIndexArray[4*n]=(n+1>>0&255)/255,this.nodesIndexArray[4*n+1]=(n+1>>8&255)/255,this.nodesIndexArray[4*n+2]=(n+1>>16&255)/255,this.nodesIndexArray[4*n+3]=(n+1>>24&255)/255;e.bindBuffer(e.ARRAY_BUFFER,this.nodesIndexBuffer),e.bufferData(e.ARRAY_BUFFER,this.nodesIndexArray,e.STATIC_DRAW),this.updateNodesGeometry()}updateNodesGeometry(){let e=this.gl,n=this.network.positions;e.bindBuffer(e.ARRAY_BUFFER,this.nodesPositionBuffer),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW);let r=this.network.colors;e.bindBuffer(e.ARRAY_BUFFER,this.nodesColorBuffer),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW);let i=this.network.sizes;e.bindBuffer(e.ARRAY_BUFFER,this.nodesSizeBuffer),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW);let o=this.network.outlineWidths;e.bindBuffer(e.ARRAY_BUFFER,this.nodesOutlineWidthBuffer),e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW);let a=this.network.outlineColors;e.bindBuffer(e.ARRAY_BUFFER,this.nodesOutlineColorBuffer),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW)}_buildFastEdgesGeometry(){let e=this.gl,n=this.network.indexedEdges,r=this.network.positions;this.network.colors;let i;this.fastEdgesGeometry=null,this.fastEdgesIndicesArray=null;let o=new Object;if(r.length<65535)i=new Uint16Array(n),o.indexType=e.UNSIGNED_SHORT;else{var a=e.getExtension("OES_element_index_uint");a==null?(i=new Uint16Array(n),o.indexType=e.UNSIGNED_SHORT):(i=new Uint32Array(n),o.indexType=e.UNSIGNED_INT)}o.vertexObject=e.createBuffer(),o.colorObject=e.createBuffer(),o.numIndices=i.length,o.indexObject=e.createBuffer(),this.fastEdgesGeometry=o,this.fastEdgesIndicesArray=i}_buildAdvancedEdgesGeometry(){let e=this.gl,n=[0,1,0,0,1,1,1,0],r=new Object;r.edgeVertexTypeBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r.edgeVertexTypeBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),r.verticesBuffer=e.createBuffer(),r.colorBuffer=e.createBuffer(),r.sizeBuffer=e.createBuffer(),r.indexBuffer=e.createBuffer(),this.edgesGeometry=r,this.edgesGeometry.count=this.network.indexedEdges.length/2,this.edgesGeometry.edgesIndexArray=new Float32Array(this.network.indexedEdges.length*4/2),this._edgeIndicesUpdate=!0}_buildEdgesGeometry(){this.fastEdges?this._buildFastEdgesGeometry():this._buildAdvancedEdgesGeometry(),this.updateEdgesGeometry()}_updateEdgeIndices(){if(this._edgeIndicesUpdate){let e=this.gl;for(let n=0;n<this.network.indexedEdges.length/2;n++){let r=this.network.index2Node.length+n;this._pickeableEdges.has(n)?(this.edgesGeometry.edgesIndexArray[4*n]=(r+1>>0&255)/255,this.edgesGeometry.edgesIndexArray[4*n+1]=(r+1>>8&255)/255,this.edgesGeometry.edgesIndexArray[4*n+2]=(r+1>>16&255)/255,this.edgesGeometry.edgesIndexArray[4*n+3]=(r+1>>24&255)/255):(this.edgesGeometry.edgesIndexArray[4*n]=0,this.edgesGeometry.edgesIndexArray[4*n+1]=0,this.edgesGeometry.edgesIndexArray[4*n+2]=0,this.edgesGeometry.edgesIndexArray[4*n+3]=0)}e.bindBuffer(e.ARRAY_BUFFER,this.edgesGeometry.indexBuffer),e.bufferData(e.ARRAY_BUFFER,this.edgesGeometry.edgesIndexArray,e.DYNAMIC_DRAW),this._edgeIndicesUpdate=!1}}updateEdgesGeometry(){let e=this.gl;this.network.indexedEdges;let n=this.network.positions,r=this.network.colors;if(this.fastEdges)this.fastEdgesGeometry||this._buildEdgesGeometry(),e.bindBuffer(e.ARRAY_BUFFER,this.fastEdgesGeometry.vertexObject),e.bufferData(e.ARRAY_BUFFER,n,e.STREAM_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.fastEdgesGeometry.colorObject),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.fastEdgesGeometry.indexObject),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.fastEdgesIndicesArray,e.STREAM_DRAW);else{let i=this.gl;this.network.updateEdgePositions(),this.network.updateEdgeColors(),this.network.updateEdgeSizes(),this._updateEdgeIndices(),this.network.positions,i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.verticesBuffer),i.bufferData(i.ARRAY_BUFFER,this.network.edgePositions,i.DYNAMIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.colorBuffer),i.bufferData(i.ARRAY_BUFFER,this.network.edgeColors,i.DYNAMIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.sizeBuffer),i.bufferData(i.ARRAY_BUFFER,this.network.edgeSizes,i.DYNAMIC_DRAW)}}resizeGL(e,n){this.pickingFramebuffer.setSize(e*this.pickingResolutionRatio,n*this.pickingResolutionRatio),this.render(!0)}_setupCamera(){this.zoom=Sl().on("zoom",e=>{this.interacting=!0,this._zoomFactor=e.transform.k,this.triggerHoverEvents(e),this.prevK===void 0&&(this.prevK=e.transform.k);let n=0,r=0;this.prevK==e.transform.k&&(this.prevX===void 0?(n=e.transform.x,r=e.transform.y):(n=e.transform.x-this.prevX*this._zoomFactor,r=e.transform.y-this.prevY*this._zoomFactor)),this.prevX=e.transform.x/this._zoomFactor,this.prevY=e.transform.y/this._zoomFactor,this.prevK=e.transform.k;let i=ze();this._use2D||e.sourceEvent?.shiftKey?(this.cameraDistance*this._zoomFactor,this.canvasElement.width/this.canvasElement.height,this._centerNodes.length==0&&(this.panX=this.panX+n/this._zoomFactor,this.panY=this.panY-r/this._zoomFactor)):(Qt(i),yn(i,i,wn(n/2),[0,1,0]),yn(i,i,wn(r/2),[1,0,0]),it(this.rotationMatrix,i,this.rotationMatrix)),this.update(),this.render()}).on("end",e=>{this.interacting=!1}),K(this.canvasElement).call(this.zoom).on("dblclick.zoom",null)}zoomFactor(e,n){return e!==void 0?(n===void 0?K(this.canvasElement).call(this.zoom.transform,Ct.translate(0,0).scale(e)):K(this.canvasElement).transition().ease(vl).duration(n).call(this.zoom.transform,Ct.translate(0,0).scale(e)),this):this._zoomFactor}willResizeEvent(e){let n=window.devicePixelRatio||1;(n<2||this.forceSupersample)&&(n=2),this.canvasElement.style.width=this.element.clientWidth+"px",this.canvasElement.style.height=this.element.clientHeight+"px",this.canvasElement.width=n*this.element.clientWidth,this.canvasElement.height=n*this.element.clientHeight,this.resizeGL(this.canvasElement.width,this.canvasElement.height),this.onResizeCallback?.(e)}redraw(){return this._redrawAll(null,!1),this._redrawAll(this.pickingFramebuffer,!0),this.onDrawCallback?.(),this.triggerHoverEvents(null),this}update(e=!1,n=!0,r=!0){return this.scheduler.schedule({name:"9.0.update",callback:null,delay:0,repeat:!1,synchronized:!0,immediateUpdates:e,updateNodesGeometry:n,updateEdgesGeometry:r}),this}render(e=!1){return this.scheduler.schedule({name:"9.9.render",callback:null,delay:0,repeat:!1,synchronized:!0,immediateUpdates:e,redraw:!0}),this}_redrawPrepare(e,n,r){let i=this.gl;const o=e?.size.width||this.canvasElement.width,a=e?.size.height||this.canvasElement.height;e==null?(i.bindFramebuffer(i.FRAMEBUFFER,null),i.clearColor(...this._backgroundColor)):n?(i.bindFramebuffer(i.FRAMEBUFFER,e),i.clearColor(0,0,0,0)):(i.bindFramebuffer(i.FRAMEBUFFER,e),typeof e.backgroundColor>"u"?i.clearColor(...this._backgroundColor):i.clearColor(...e.backgroundColor)),typeof r>"u"?i.viewport(0,0,o,a):i.viewport(...r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.depthFunc(i.LEQUAL),this.projectionMatrix=ze(),this.viewMatrix=ze(),pi(this.projectionMatrix,Math.PI*2/360*70,o/a,1,1e4),Qt(this.viewMatrix),vn(this.viewMatrix,this.viewMatrix,[this.panX,this.panY,-this.cameraDistance/this._zoomFactor]),it(this.viewMatrix,this.viewMatrix,this.rotationMatrix),vn(this.viewMatrix,this.viewMatrix,this.translatePosition)}_redrawNodes(e,n){let r=this.gl,i=r.getExtension("ANGLE_instanced_arrays"),o;n?(r.disable(r.BLEND),o=this.nodesPickingShaderProgram):(r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),this.useShadedNodes?o=this.nodesShaderProgram:o=this.nodesFastShaderProgram),o.use(r),o.attributes.enable("vertex"),o.attributes.enable("position"),o.attributes.enable("size"),o.attributes.enable("outlineWidth"),o.attributes.enable("outlineColor"),o.attributes.enable("encodedIndex"),r.bindBuffer(r.ARRAY_BUFFER,this.nodesGeometry.vertexObject),r.vertexAttribPointer(o.attributes.vertex,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.vertex,0),this.nodesGeometry.indexObject&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.nodesGeometry.indexObject),r.uniformMatrix4fv(o.uniforms.projectionMatrix,!1,this.projectionMatrix),r.uniformMatrix4fv(o.uniforms.viewMatrix,!1,this.viewMatrix),r.uniform1f(o.uniforms.globalOpacityScale,this._nodesGlobalOpacityScale),r.uniform1f(o.uniforms.globalOpacityBase,this._nodesGlobalOpacityBase),r.uniform1f(o.uniforms.globalSizeScale,this._nodesGlobalSizeScale),r.uniform1f(o.uniforms.globalSizeBase,this._nodesGlobalSizeBase),r.uniform1f(o.uniforms.globalOutlineWidthScale,this._nodesGlobalOutlineWidthScale),r.uniform1f(o.uniforms.globalOutlineWidthBase,this._nodesGlobalOutlineWidthBase);let a=di();gi(a,this.viewMatrix),r.uniformMatrix3fv(o.uniforms.normalMatrix,!1,a),this.network.colors,this.network.positions,this.network.sizes,this.network.outlineWidths,r.bindBuffer(r.ARRAY_BUFFER,this.nodesPositionBuffer),r.enableVertexAttribArray(o.attributes.position),r.vertexAttribPointer(o.attributes.position,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.position,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesColorBuffer),r.enableVertexAttribArray(o.attributes.color),r.vertexAttribPointer(o.attributes.color,4,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.color,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesSizeBuffer),r.enableVertexAttribArray(o.attributes.size),r.vertexAttribPointer(o.attributes.size,1,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.size,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesOutlineColorBuffer),r.enableVertexAttribArray(o.attributes.outlineColor),r.vertexAttribPointer(o.attributes.outlineColor,4,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.outlineColor,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesOutlineWidthBuffer),r.enableVertexAttribArray(o.attributes.outlineWidth),r.vertexAttribPointer(o.attributes.outlineWidth,1,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.outlineWidth,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesIndexBuffer),r.enableVertexAttribArray(o.attributes.encodedIndex),r.vertexAttribPointer(o.attributes.encodedIndex,4,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.attributes.encodedIndex,1),this.nodesGeometry.indexObject?i.drawElementsInstancedANGLE(r.TRIANGLES,this.nodesGeometry.numIndices,this.nodesGeometry.indexType,0,this.network.positions.length/3):i.drawArraysInstancedANGLE(r.TRIANGLE_STRIP,0,this.nodesGeometry.numIndices,this.network.positions.length/3),o.attributes.disable("vertex"),o.attributes.disable("position"),o.attributes.disable("size"),o.attributes.disable("outlineWidth"),o.attributes.disable("outlineColor"),o.attributes.disable("encodedIndex")}_redrawEdges(e,n){let r=this.onEdgeClickCallback||this.onEdgeHoverMoveCallback||this.onEdgeHoverStartCallback||this.onEdgeHoverEndCallback||this.onEdgeDoubleClickCallback||this.onEdgeClickCallback;if(n&&(this.fastEdges||!r))return;let i=this.gl,o=i.getExtension("ANGLE_instanced_arrays"),a;n?(i.disable(i.BLEND),a=this.edgesPickingShaderProgram):(i.enable(i.BLEND),this.useAdditiveBlending?i.blendFunc(i.SRC_ALPHA,i.ONE):i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE),this.fastEdges?a=this.edgesFastShaderProgram:a=this.edgesShaderProgram),this.fastEdges?(a.use(i),a.attributes.enable("vertex"),a.attributes.enable("color"),this.projectionViewMatrix=ze(),it(this.projectionViewMatrix,this.projectionMatrix,this.viewMatrix),i.bindBuffer(i.ARRAY_BUFFER,this.fastEdgesGeometry.vertexObject),i.vertexAttribPointer(a.attributes.vertex,3,i.FLOAT,!1,0,0),o.vertexAttribDivisorANGLE(a.attributes.vertex,0),i.bindBuffer(i.ARRAY_BUFFER,this.fastEdgesGeometry.colorObject),i.vertexAttribPointer(a.attributes.color,4,i.FLOAT,!1,0,0),o.vertexAttribDivisorANGLE(a.attributes.color,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.fastEdgesGeometry.indexObject),i.uniformMatrix4fv(a.uniforms.projectionViewMatrix,!1,this.projectionViewMatrix),i.uniform1f(a.uniforms.globalOpacityScale,this._edgesGlobalOpacityScale),i.uniform1f(a.uniforms.globalOpacityBase,this._edgesGlobalOpacityBase),i.drawElements(i.LINES,this.fastEdgesGeometry.numIndices,this.fastEdgesGeometry.indexType,0),a.attributes.disable("vertex"),a.attributes.disable("color")):(a.use(i),a.attributes.enable("fromVertex"),a.attributes.enable("toVertex"),a.attributes.enable("vertexType"),a.attributes.enable("fromColor"),a.attributes.enable("toColor"),a.attributes.enable("fromSize"),a.attributes.enable("toSize"),a.attributes.enable("encodedIndex"),this.projectionViewMatrix=ze(),it(this.projectionViewMatrix,this.projectionMatrix,this.viewMatrix),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.edgeVertexTypeBuffer),i.vertexAttribPointer(a.attributes.vertexType,2,i.FLOAT,!1,0,0),o.vertexAttribDivisorANGLE(a.attributes.vertexType,0),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.verticesBuffer),i.vertexAttribPointer(a.attributes.fromVertex,3,i.FLOAT,!1,4*3*2,0),o.vertexAttribDivisorANGLE(a.attributes.fromVertex,1),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.verticesBuffer),i.vertexAttribPointer(a.attributes.toVertex,3,i.FLOAT,!1,4*3*2,4*3),o.vertexAttribDivisorANGLE(a.attributes.toVertex,1),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.colorBuffer),i.vertexAttribPointer(a.attributes.fromColor,4,i.FLOAT,!1,4*4*2,0),o.vertexAttribDivisorANGLE(a.attributes.fromColor,1),i.vertexAttribPointer(a.attributes.toColor,4,i.FLOAT,!1,4*4*2,4*4),o.vertexAttribDivisorANGLE(a.attributes.toColor,1),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.sizeBuffer),i.vertexAttribPointer(a.attributes.fromSize,1,i.FLOAT,!1,4*2,0),o.vertexAttribDivisorANGLE(a.attributes.fromSize,1),i.vertexAttribPointer(a.attributes.toSize,1,i.FLOAT,!1,4*2,4),o.vertexAttribDivisorANGLE(a.attributes.toSize,1),i.bindBuffer(i.ARRAY_BUFFER,this.edgesGeometry.indexBuffer),i.enableVertexAttribArray(a.attributes.encodedIndex),i.vertexAttribPointer(a.attributes.encodedIndex,4,i.FLOAT,!1,0,0),o.vertexAttribDivisorANGLE(a.attributes.encodedIndex,1),i.uniformMatrix4fv(a.uniforms.projectionMatrix,!1,this.projectionMatrix),i.uniformMatrix4fv(a.uniforms.viewMatrix,!1,this.viewMatrix),i.uniform1f(a.uniforms.globalOpacityScale,this._edgesGlobalOpacityScale),i.uniform1f(a.uniforms.globalOpacityBase,this._edgesGlobalOpacityBase),i.uniform1f(a.uniforms.globalWidthScale,this._edgesGlobalWidthScale),i.uniform1f(a.uniforms.globalWidthBase,this._edgesGlobalWidthBase),i.uniform1f(a.uniforms.globalSizeScale,this._nodesGlobalSizeScale),i.uniform1f(a.uniforms.globalSizeBase,this._nodesGlobalSizeBase),o.drawArraysInstancedANGLE(i.TRIANGLE_STRIP,0,4,this.edgesGeometry.count),a.attributes.disable("fromVertex"),a.attributes.disable("toVertex"),a.attributes.disable("vertexType"),a.attributes.disable("fromColor"),a.attributes.disable("toColor"),a.attributes.disable("fromSize"),a.attributes.disable("toSize"),a.attributes.disable("encodedIndex"))}_redrawAll(e,n){typeof n>"u"&&(n=!1);let r=this.gl;this._redrawPrepare(e,n),r.depthMask(!0),this._use2D?(r.disable(r.DEPTH_TEST),r.depthMask(!1),this._redrawEdges(e,n),this._redrawNodes(e,n)):(r.enable(r.DEPTH_TEST),this._redrawNodes(e,n),r.depthMask(!1),this._redrawEdges(e,n),r.depthMask(!0))}_updateCenterNodesPosition(){if(this.targetTranslatePosition[0]=0,this.targetTranslatePosition[1]=0,this.targetTranslatePosition[2]=0,this._centerNodes&&this._centerNodes.length>0){for(let n=0;n<this._centerNodes.length;n++){let i=this._centerNodes[n].position;this.targetTranslatePosition[0]-=i[0],this.targetTranslatePosition[1]-=i[1],this.targetTranslatePosition[2]-=i[2]}let e=this._centerNodes.length;this.targetTranslatePosition[0]/=e,this.targetTranslatePosition[1]/=e,this.targetTranslatePosition[2]/=e}}centerOnNodes(e,n){this._centerNodes=[];for(let r=0;r<e.length;r++){let i=e[r];i.ID===void 0&&(i=this.network.nodes[i]),this._centerNodes.push(i)}return this.lastTranslatePosition[0]=this.translatePosition[0],this.lastTranslatePosition[1]=this.translatePosition[1],this.lastTranslatePosition[2]=this.translatePosition[2],this.lastPanX=this.panX,this.lastPanY=this.panY,n===void 0||n<=0?(this.translateDuration=0,this.translateStartTime=null):(this.translateDuration=n,this.translateStartTime=performance.now()),this.scheduleCameraInterpolation(),this}centeredNodes(){return this._centerNodes}updateCameraInterpolation(e=!1){if(this.translateDuration==0)return e||(this.translatePosition[0]=this.targetTranslatePosition[0],this.translatePosition[1]=this.targetTranslatePosition[1],this.translatePosition[2]=this.targetTranslatePosition[2],this.panX=0,this.panY=0),!1;{let r=(performance.now()-this.translateStartTime)/this.translateDuration;return r>1&&(r=1),this.translatePosition[0]=(1-r)*this.lastTranslatePosition[0],this.translatePosition[1]=(1-r)*this.lastTranslatePosition[1],this.translatePosition[2]=(1-r)*this.lastTranslatePosition[2],this.translatePosition[0]+=r*this.targetTranslatePosition[0],this.translatePosition[1]+=r*this.targetTranslatePosition[1],this.translatePosition[2]+=r*this.targetTranslatePosition[2],this.panX=(1-r)*this.lastPanX,this.panY=(1-r)*this.lastPanY,this.panX+=r*this.targetPanX,this.panY+=r*this.targetPanY,!(r>=1)}}scheduleCameraInterpolation(){let e={name:"1.1.cameraInterpolator",callback:(n,r)=>{this._updateCenterNodesPosition(),this.updateCameraInterpolation()||this.scheduler.unschedule("1.1.cameraInterpolator")},delay:0,repeat:!0,synchronized:!0,immediateUpdates:!1,redraw:!0,updateNodesGeometry:!1,updateEdgesGeometry:!1};this.scheduler.schedule({name:"1.0.cameraInterpolator",callback:(n,r)=>{this.scheduler.schedule(e)},delay:0,repeat:!1,synchronized:!0,immediateUpdates:!1,redraw:!1,updateNodesGeometry:!1,updateEdgesGeometry:!1})}onResize(e){return this.onResizeCallback=e,this}onNodeClick(e){return this.onNodeClickCallback=e,this}onNodeDoubleClick(e){return this.onNodeDoubleClickCallback=e,this}onNodeHoverStart(e){return this.onNodeHoverStartCallback=e,this}onNodeHoverEnd(e){return this.onNodeHoverEndCallback=e,this}onNodeHoverMove(e){return this.onNodeHoverMoveCallback=e,this}onEdgeClick(e){return this.onEdgeClickCallback=e,this}onEdgeDoubleClick(e){return this.onEdgeDoubleClickCallback=e,this}onEdgeHoverStart(e){return this.onEdgeHoverStartCallback=e,this}onEdgeHoverEnd(e){return this.onEdgeHoverEndCallback=e,this}onEdgeHoverMove(e){return this.onEdgeHoverMoveCallback=e,this}onZoom(e){return this.onZoomCallback=e,this}onRotation(e){return this.onRotationCallback=e,this}onLayoutStart(e){return this.onLayoutStartCallback=e,this?.layoutWorker.onStart(()=>{this.onLayoutStartCallback?.()}),this}onLayoutStop(e){return this.onLayoutStopCallback=e,this?.layoutWorker.onStop(()=>{this.onLayoutStopCallback?.()}),this}onDraw(e){return this.onDrawCallback=e,this}onReady(e){this.isReady?e?.(this):this.onReadyCallback=e}backgroundColor(e){return typeof e>"u"?this._backgroundColor:(this._backgroundColor=e,this)}nodeColor(e,n){if(typeof n>"u"){if(typeof e>"u")return this.network.colors;if(typeof e=="function"){let r=this.network.index2Node;for(let i=0;i<r.length;i++){let o=r[i],a=e(o,i,this.network);this.network.colors[i*4+0]=a[0],this.network.colors[i*4+1]=a[1],this.network.colors[i*4+2]=a[2],a.length>3&&(this.network.colors[i*4+3]=a[3])}}else{if(typeof e=="number")return this.network.colors[this.network.ID2index[e]];{let r=this.network.index2Node;for(let i=0;i<r.length;i++)this.network.colors[i*4+0]=e[0],this.network.colors[i*4+1]=e[1],this.network.colors[i*4+2]=e[2],e.length>3&&(this.network.colors[i*4+3]=e[3])}}}else if(typeof e=="function"){let r=this.network.ID2index[n],i=e(n,r,this.network);this.network.colors[r*4+0]=i[0],this.network.colors[r*4+1]=i[1],this.network.colors[r*4+2]=i[2],i.length>3&&(this.network.colors[r*4+3]=i[3])}else{let r=this.network.ID2index[n];this.network.colors[r*4+0]=e[0],this.network.colors[r*4+1]=e[1],this.network.colors[r*4+2]=e[2],e.length>3&&(this.network.colors[r*4+3]=e[3])}return this}nodeSize(e,n){if(typeof n>"u"){if(typeof e>"u")return this.network.sizes;if(typeof e=="function"){let r=this.network.index2Node;for(let i=0;i<r.length;i++){let o=r[i],a=e(o,this.network);this.network.sizes[i]=a}}else{let r=this.network.index2Node;for(let i=0;i<r.length;i++)this.network.sizes[i]=e}}else if(typeof e=="function"){let r=e(n,this.network),i=this.network.ID2index[n];this.network.sizes[i]=r}else{let r=this.network.ID2index[n];this.network.sizes[r]=e}return this}nodeOutlineColor(e,n){if(typeof n>"u"){if(typeof e>"u")return this.network.outlineColors;if(typeof e=="function"){let r=this.network.index2Node;for(let i=0;i<r.length;i++){let o=r[i],a=e(o,i,this.network);this.network.outlineColors[i*4+0]=a[0],this.network.outlineColors[i*4+1]=a[1],this.network.outlineColors[i*4+2]=a[2],a.length>3&&(this.network.outlineColors[i*4+3]=a[3])}}else{if(typeof e=="number")return this.network.outlineColors[this.network.ID2index[e]];{let r=this.network.index2Node;for(let i=0;i<r.length;i++)this.network.outlineColors[i*4+0]=e[0],this.network.outlineColors[i*4+1]=e[1],this.network.outlineColors[i*4+2]=e[2],e.length>3&&(this.network.outlineColors[i*4+3]=e[3])}}}else if(typeof e=="function"){let r=this.network.ID2index[n],i=e(n,r,this.network);this.network.outlineColors[r*4+0]=i[0],this.network.outlineColors[r*4+1]=i[1],this.network.outlineColors[r*4+2]=i[2],i.length>3&&(this.network.outlineColors[r*4+3]=i[3])}else{let r=this.network.ID2index[n];this.network.outlineColors[r*4+0]=e[0],this.network.outlineColors[r*4+1]=e[1],this.network.outlineColors[r*4+2]=e[2],e.length>3&&(this.network.outlineColors[r*4+3]=e[3])}return this}nodeOutlineWidth(e,n){if(typeof n>"u"){if(typeof e>"u")return this.network.outlineWidths;if(typeof e=="function"){let r=this.network.index2Node;for(let i=0;i<r.length;i++){let o=r[i],a=e(o,this.network);this.network.outlineWidths[o.index]=a}}else{let r=this.network.index2Node;for(let i=0;i<r.length;i++)this.network.outlineWidths[i]=e}}else if(typeof e=="function"){let r=e(n,this.network),i=this.network.ID2index[n];this.network.outlineWidths[i]=r}else{let r=this.network.ID2index[n];this.network.outlineWidths[r]=e}return this}pickPoint(e,n){const r=this.canvasElement.width*this.pickingResolutionRatio,i=this.canvasElement.height*this.pickingResolutionRatio,o=Math.round(e*r/this.canvasElement.clientWidth-.5),a=Math.round(i-n*i/this.canvasElement.clientHeight-.5),c=new Uint8Array(4);let h=this.gl;return h.bindFramebuffer(h.FRAMEBUFFER,this.pickingFramebuffer),h.readPixels(o,a,1,1,h.RGBA,h.UNSIGNED_BYTE,c),c[0]+(c[1]<<8)+(c[2]<<16)+(c[3]<<24)-1}edgesGlobalOpacityScale(e){return typeof e>"u"?this._edgesGlobalOpacityScale:(this._edgesGlobalOpacityScale=e,this)}edgesGlobalOpacityBase(e){return typeof e>"u"?this._edgesGlobalOpacityBase:(this._edgesGlobalOpacityBase=e,this)}edgesGlobalWidthScale(e){return typeof e>"u"?this._edgesGlobalWidthScale:(this._edgesGlobalWidthScale=e,this)}edgesGlobalWidthBase(e){return typeof e>"u"?this._edgesGlobalWidthBase:(this._edgesGlobalWidthBase=e,this)}nodesGlobalOpacityScale(e){return typeof e>"u"?this._nodesGlobalOpacityScale:(this._nodesGlobalOpacityScale=e,this)}nodesGlobalOpacityBase(e){return typeof e>"u"?this._nodesGlobalOpacityBase:(this._nodesGlobalOpacityBase=e,this)}nodesGlobalSizeScale(e){return typeof e>"u"?this._nodesGlobalSizeScale:(this._nodesGlobalSizeScale=e,this)}nodesGlobalSizeBase(e){return typeof e>"u"?this._nodesGlobalSizeBase:(this._nodesGlobalSizeBase=e,this)}nodesGlobalOutlineWidthScale(e){return typeof e>"u"?this._nodesGlobalOutlineWidthScale:(this._nodesGlobalOutlineWidthScale=e,this)}nodesGlobalOutlineWidthBase(e){return typeof e>"u"?this._nodesGlobalOutlineWidthBase:(this._nodesGlobalOutlineWidthBase=e,this)}nodeOpacity(e){if(typeof e>"u")return this.network.colors.map(n=>n[3]);if(typeof e=="function"){let n=this.network.index2Node;for(let r=0;r<n.length;r++){let i=n[r],o=e(i,r,this.network);this.network.colors[r*4+3]=o}}else for(let n=0;n<allNodes.length;n++)this.network.colors[n*4+3]=e;return this}additiveBlending(e){return typeof e>"u"?this.useAdditiveBlending:(this.useAdditiveBlending=e,this)}shadedNodes(e){return typeof e>"u"?this.useShadedNodes:(this.useShadedNodes=e,this)}pickeableEdges(e){return typeof e>"u"?this._pickeableEdges:(e=="all"||(this._pickeableEdges=new Set(e),this._edgeIndicesUpdate=!0,this.update()),this)}cleanup(e){this.isReady=!1,this.layoutWorker.cleanup(),this.scheduler.stop(),this.layoutWorker=null;let n=this.gl;if(this.onReadyCallback=null,this.onNodeClickCallback=null,this.onNodeDoubleClickCallback=null,this.onNodeHoverStartCallback=null,this.onNodeHoverMoveCallback=null,this.onNodeHoverEndCallback=null,this.onEdgeClickCallback=null,this.onEdgeDoubleClickCallback=null,this.onEdgeHoverStartCallback=null,this.onEdgeHoverMoveCallback=null,this.onEdgeHoverEndCallback=null,this.onZoomCallback=null,this.onRotationCallback=null,this.onResizeCallback=null,this.onLayoutStartCallback=null,this.onLayoutStopCallback=null,this.onDrawCallback=null,this.onReadyCallback=null,this.isReady=!1,window.removeEventListener("resize",this._onresizeEvent),this.canvasElement&&(this.canvasElement.removeEventListener("click",this._clickEventListener),this.canvasElement.removeEventListener("dblclick",this._doubleClickEventListener),this.canvasElement.removeEventListener("mousemove",this._hoverMoveEventListener),this.canvasElement.removeEventListener("mouseleave",this._hoverLeaveEventListener),document.body.removeEventListener("mouseout",this._hoverLeaveWindowEventListener)),!e&&n){let r=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);this.pickingFramebuffer?.discard();for(let i=0;i<r;++i)n.activeTexture(n.TEXTURE0+i),n.bindTexture(n.TEXTURE_2D,null),n.bindTexture(n.TEXTURE_CUBE_MAP,null);n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteBuffer(this.nodesPositionBuffer),n.deleteBuffer(this.nodesColorBuffer),n.deleteBuffer(this.nodesSizeBuffer),n.deleteBuffer(this.nodesSizeBuffer),n.deleteBuffer(this.nodesOutlineWidthBuffer),n.deleteBuffer(this.nodesOutlineColorBuffer),n.deleteBuffer(this.nodesIndexBuffer),this.edgesGeometry&&(n.deleteBuffer(this.edgesGeometry.edgeVertexTypeBuffer),n.deleteBuffer(this.edgesGeometry.verticesBuffer),n.deleteBuffer(this.edgesGeometry.colorBuffer),n.deleteBuffer(this.edgesGeometry.sizeBuffer)),this.fastEdgesGeometry&&(n.deleteBuffer(this.fastEdgesGeometry.indexBuffer),n.deleteBuffer(this.fastEdgesGeometry.vertexObject),n.deleteBuffer(this.fastEdgesGeometry.colorObject),n.deleteBuffer(this.fastEdgesGeometry.indexObject))}this._autoCleanup&&this._mutationObserver.disconnect(),this.canvasElement&&this.canvasElement.remove()}}function $(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const ql=$("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Xl=$("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),$l=$("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),jl=$("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Vl=$("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Zl=$("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Kl=$("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Jl=$("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ef=$("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),tf=$("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Z=t=>jo(t[t.length-1]);var Br=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map($);const nf=Z(Br);var kr=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map($);const rf=Z(kr);var Mr=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map($);const af=Z(Mr);var Sr=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map($);const of=Z(Sr);var Rr=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map($);const sf=Z(Rr);var Nr=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map($);const lf=Z(Nr);var Fr=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map($);const ff=Z(Fr);var zr=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map($);const cf=Z(zr);var Or=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map($);const uf=Z(Or);var Tr=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map($);const hf=Z(Tr);var Dr=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map($);const df=Z(Dr);var Pr=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map($);const gf=Z(Pr);var Qr=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map($);const bf=Z(Qr);var Gr=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map($);const pf=Z(Gr);var Lr=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map($);const Af=Z(Lr);var Ur=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map($);const mf=Z(Ur);var Wr=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map($);const vf=Z(Wr);var Hr=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map($);const yf=Z(Hr);var Yr=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map($);const _f=Z(Yr);var qr=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map($);const xf=Z(qr);var Xr=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map($);const wf=Z(Xr);var $r=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map($);const Ef=Z($r);var jr=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map($);const Cf=Z(jr);var Vr=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map($);const If=Z(Vr);var Zr=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map($);const Bf=Z(Zr);var Kr=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map($);const kf=Z(Kr);var Jr=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map($);const Mf=Z(Jr);function Sf(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Rf=gn(me(300,.5,0),me(-240,.5,1));var Nf=gn(me(-100,.75,.35),me(80,1.5,.8)),Ff=gn(me(260,.75,.35),me(80,1.5,.8)),ct=me();function zf(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ct.h=360*t-100,ct.s=1.5-1.5*e,ct.l=.8-.9*e,ct+""}var ut=xe(),Of=Math.PI/3,Tf=Math.PI*2/3;function Df(t){var e;return t=(.5-t)*Math.PI,ut.r=255*(e=Math.sin(t))*e,ut.g=255*(e=Math.sin(t+Of))*e,ut.b=255*(e=Math.sin(t+Tf))*e,ut+""}function Pf(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function zt(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Qf=zt($("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Gf=zt($("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Lf=zt($("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Uf=zt($("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const Wf=Object.freeze(Object.defineProperty({__proto__:null,schemeCategory10:ql,schemeAccent:Xl,schemeDark2:$l,schemePaired:jl,schemePastel1:Vl,schemePastel2:Zl,schemeSet1:Kl,schemeSet2:Jl,schemeSet3:ef,schemeTableau10:tf,interpolateBrBG:nf,schemeBrBG:Br,interpolatePRGn:rf,schemePRGn:kr,interpolatePiYG:af,schemePiYG:Mr,interpolatePuOr:of,schemePuOr:Sr,interpolateRdBu:sf,schemeRdBu:Rr,interpolateRdGy:lf,schemeRdGy:Nr,interpolateRdYlBu:ff,schemeRdYlBu:Fr,interpolateRdYlGn:cf,schemeRdYlGn:zr,interpolateSpectral:uf,schemeSpectral:Or,interpolateBuGn:hf,schemeBuGn:Tr,interpolateBuPu:df,schemeBuPu:Dr,interpolateGnBu:gf,schemeGnBu:Pr,interpolateOrRd:bf,schemeOrRd:Qr,interpolatePuBuGn:pf,schemePuBuGn:Gr,interpolatePuBu:Af,schemePuBu:Lr,interpolatePuRd:mf,schemePuRd:Ur,interpolateRdPu:vf,schemeRdPu:Wr,interpolateYlGnBu:yf,schemeYlGnBu:Hr,interpolateYlGn:_f,schemeYlGn:Yr,interpolateYlOrBr:xf,schemeYlOrBr:qr,interpolateYlOrRd:wf,schemeYlOrRd:Xr,interpolateBlues:Ef,schemeBlues:$r,interpolateGreens:Cf,schemeGreens:jr,interpolateGreys:If,schemeGreys:Vr,interpolatePurples:Bf,schemePurples:Zr,interpolateReds:kf,schemeReds:Kr,interpolateOranges:Mf,schemeOranges:Jr,interpolateCividis:Sf,interpolateCubehelixDefault:Rf,interpolateRainbow:zf,interpolateWarm:Nf,interpolateCool:Ff,interpolateSinebow:Df,interpolateTurbo:Pf,interpolateViridis:Qf,interpolateMagma:Gf,interpolateInferno:Lf,interpolatePlasma:Uf},Symbol.toStringTag,{value:"Module"}));class Yn extends Map{constructor(e,n=qf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(qn(this,e))}has(e){return super.has(qn(this,e))}set(e,n){return super.set(Hf(this,e),n)}delete(e){return super.delete(Yf(this,e))}}function qn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Hf({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Yf({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qf(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Jt=Math.sqrt(50),en=Math.sqrt(10),tn=Math.sqrt(2);function Xf(t,e,n){var r,i=-1,o,a,c;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(c=ei(t,e,n))===0||!isFinite(c))return[];if(c>0){let h=Math.round(t/c),u=Math.round(e/c);for(h*c<t&&++h,u*c>e&&--u,a=new Array(o=u-h+1);++i<o;)a[i]=(h+i)*c}else{c=-c;let h=Math.round(t*c),u=Math.round(e*c);for(h/c<t&&++h,u/c>e&&--u,a=new Array(o=u-h+1);++i<o;)a[i]=(h+i)/c}return r&&a.reverse(),a}function ei(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Jt?10:o>=en?5:o>=tn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Jt?10:o>=en?5:o>=tn?2:1)}function $f(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Jt?i*=10:o>=en?i*=5:o>=tn&&(i*=2),e<t?-i:i}function jf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Vf(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Xn=Symbol("implicit");function ti(){var t=new Yn,e=[],n=[],r=Xn;function i(o){let a=t.get(o);if(a===void 0){if(r!==Xn)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Yn;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ti(e,n).unknown(r)},jf.apply(i,arguments),i}function ni(t){return t}function Zf(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function It(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function We(t){return t=It(Math.abs(t)),t?t[1]:NaN}function Kf(t,e){return function(n,r){for(var i=n.length,o=[],a=0,c=t[0],h=0;i>0&&c>0&&(h+c+1>r&&(c=Math.max(1,r-h)),o.push(n.substring(i-=c,i+c)),!((h+=c+1)>r));)c=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Jf(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ec=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bt(t){if(!(e=ec.exec(t)))throw new Error("invalid format: "+t);var e;return new mn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Bt.prototype=mn.prototype;function mn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tc(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ri;function nc(t,e){var n=It(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(ri=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+It(t,Math.max(0,e+o-1))[0]}function $n(t,e){var n=It(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const jn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zf,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$n(t*100,e),r:$n,s:nc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Vn(t){return t}var Zn=Array.prototype.map,Kn=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function rc(t){var e=t.grouping===void 0||t.thousands===void 0?Vn:Kf(Zn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Vn:Jf(Zn.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"\u2212":t.minus+"",h=t.nan===void 0?"NaN":t.nan+"";function u(s){s=Bt(s);var f=s.fill,b=s.align,m=s.sign,g=s.symbol,_=s.zero,x=s.width,C=s.comma,E=s.precision,A=s.trim,y=s.type;y==="n"?(C=!0,y="g"):jn[y]||(E===void 0&&(E=12),A=!0,y="g"),(_||f==="0"&&b==="=")&&(_=!0,f="0",b="=");var v=g==="$"?n:g==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",k=g==="$"?r:/[%p]/.test(y)?a:"",w=jn[y],S=/[defgprs%]/.test(y);E=E===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function T(I){var z=v,O=k,p,M,d;if(y==="c")O=w(I)+O,I="";else{I=+I;var R=I<0||1/I<0;if(I=isNaN(I)?h:w(Math.abs(I),E),A&&(I=tc(I)),R&&+I==0&&m!=="+"&&(R=!1),z=(R?m==="("?m:c:m==="-"||m==="("?"":m)+z,O=(y==="s"?Kn[8+ri/3]:"")+O+(R&&m==="("?")":""),S){for(p=-1,M=I.length;++p<M;)if(d=I.charCodeAt(p),48>d||d>57){O=(d===46?i+I.slice(p+1):I.slice(p))+O,I=I.slice(0,p);break}}}C&&!_&&(I=e(I,1/0));var B=z.length+I.length+O.length,N=B<x?new Array(x-B+1).join(f):"";switch(C&&_&&(I=e(N+I,N.length?x-O.length:1/0),N=""),b){case"<":I=z+I+O+N;break;case"=":I=z+N+I+O;break;case"^":I=N.slice(0,B=N.length>>1)+z+I+O+N.slice(B);break;default:I=N+z+I+O;break}return o(I)}return T.toString=function(){return s+""},T}function l(s,f){var b=u((s=Bt(s),s.type="f",s)),m=Math.max(-8,Math.min(8,Math.floor(We(f)/3)))*3,g=Math.pow(10,-m),_=Kn[8+m/3];return function(x){return b(g*x)+_}}return{format:u,formatPrefix:l}}var ht,ii,ai;ic({thousands:",",grouping:[3],currency:["$",""]});function ic(t){return ht=rc(t),ii=ht.format,ai=ht.formatPrefix,ht}function ac(t){return Math.max(0,-We(Math.abs(t)))}function oc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(We(e)/3)))*3-We(Math.abs(t)))}function sc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,We(e)-We(t))+1}function lc(t,e,n,r){var i=$f(t,e,n),o;switch(r=Bt(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=oc(i,a))&&(r.precision=o),ai(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=sc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ac(i))&&(r.precision=o-(r.type==="%")*2);break}}return ii(r)}function fc(t){var e=t.domain;return t.ticks=function(n){var r=e();return Xf(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return lc(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],c=r[o],h,u,l=10;for(c<a&&(u=a,a=c,c=u,u=i,i=o,o=u);l-- >0;){if(u=ei(a,c,n),u===h)return r[i]=a,r[o]=c,e(r);if(u>0)a=Math.floor(a/u)*u,c=Math.ceil(c/u)*u;else if(u<0)a=Math.ceil(a*u)/u,c=Math.floor(c*u)/u;else break;h=u}return t},t}function cc(){var t=0,e=1,n,r,i,o,a=ni,c=!1,h;function u(s){return s==null||isNaN(s=+s)?h:a(i===0?.5:(s=(o(s)-n)*i,c?Math.max(0,Math.min(1,s)):s))}u.domain=function(s){return arguments.length?([t,e]=s,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(s){return arguments.length?(c=!!s,u):c},u.interpolator=function(s){return arguments.length?(a=s,u):a};function l(s){return function(f){var b,m;return arguments.length?([b,m]=f,a=s(b,m),u):[a(0),a(1)]}}return u.range=l(dn),u.rangeRound=l(rs),u.unknown=function(s){return arguments.length?(h=s,u):h},function(s){return o=s,n=s(t),r=s(e),i=n===r?0:1/(r-n),u}}function uc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function oi(){var t=fc(cc()(ni));return t.copy=function(){return uc(t,oi())},Vf.apply(t,arguments)}let hc=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#bcbd22","#17becf","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d2","#dbdb8d","#9edae5"];const dc=Object.freeze(Object.defineProperty({__proto__:null,schemeCategory18:hc},Symbol.toStringTag,{value:"Module"}));let Pe={};Object.assign(Pe,Wf);Object.assign(Pe,dc);console.log(Pe);let gc=new Set(["ID","edges","neighbors"]);function bc(t){let e=t.reduce((r,i)=>(r.set(i,(r.get(i)||0)+1),r),new Map);return Array.from(e.keys()).sort((r,i)=>e.get(i)-e.get(r))}function pc(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function Ac(){let t=300,e=10,n=K(this),r=n.node().getComputedTextLength(),i=n.text();for(;r>t-2*e&&i.length>0;)i=i.slice(0,-1),n.text(i+"..."),r=n.node().getComputedTextLength()}const mc=window.location.search,oe=new URLSearchParams(mc);let si="WS_10000_10_001";oe.has("network")&&(si=oe.get("network"));let li=!1;oe.has("use2d")&&(li=!0);let nn=!1;oe.has("shaded")&&(nn=!0);let fi=!1;oe.has("advanced")&&(fi=!0);let rn=null;oe.has("size")&&(rn=+oe.get("size"));let an=null;oe.has("opacity")&&(an=+oe.get("opacity"));let on=null;oe.has("zoom")&&(on=+oe.get("zoom"));let mt=null;oe.has("layout")&&(mt=+oe.get("layout")!=0);let Ze=!1,Ve=[1,1,1,1];oe.has("dark")&&(Ze=!0,Ve=[0,0,0,1]);let ci=!1;oe.has("additive")&&Ze&&(ci=!0);let vc=t=>{Ui("networks/"+t+".xnet").then(async e=>{window.network=e;let n="index",r=1,i=1,o=Ve,a=.25,c=P=>P._originalSize;nn&&(a=0);let h=.75,u=.35,l=4,s=1,f=1,b=2,m=1e10,g=3,_=1e10,x=[.9,.9,0],C=2,E=1.5,A=1,y=.5,v=1.5,k=.5,w="interpolateInferno",S="schemeCategory10",T=!1,I=document.getElementById("tooltip"),z=e.nodesCount,O=z>1e5;console.log(e);let p={},M=[];for(let P=0;P<z;P++)p[""+P]={ID:""+P},e.labels&&(p[""+P].label=e.labels[P]);for(const[P,L]of Object.entries(e.verticesProperties))for(let H=0;H<z;H++)p[""+H][P.toLowerCase()]=L[H];for(let P=0;P<e.edges.length;P++)M.push({source:""+e.edges[P][0],target:""+e.edges[P][1]});mt===null&&(mt=!O);let d=new Yl({elementID:"netviz",nodes:p,edges:M,use2D:li,fastEdges:!fi&&O,autoStartLayout:!1});for(let[P,L]of Object.entries(d.network.nodes)){let H=L.edges.length;L._originalSize=r*Math.log10(H+1)}let R=P=>{typeof P._highlighted>"u"&&(P._highlighted=!1),typeof P._selected>"u"&&(P._selected=!1),typeof P._selectedNeighbor>"u"&&(P._selectedNeighbor=!1);let L=P._originalSize,H=a,j=i;P._selected?(L*=g,j*=_,P.outlineColor=x,H*=g):P._selectedNeighbor?(L*=C,j*=E,P.outlineColor=o,H*=C):P.outlineColor=o,P._highlighted&&(L*=b,j*=m,H*=b),P.size=L,P.opacity=j,P.outlineWidth=H},B=(P,L,H=!0)=>{P.forEach(j=>{j._highlighted=L,R(j)}),H&&(d.update(),d.render())},N=(P,L,H=!0)=>{P.forEach(j=>{j._selected=L,j._selectedNeighbor=L,j.neighbors.forEach(V=>{V._selectedNeighbor=L,R(V)}),R(j)}),P?.length&&L?(U(!0),W(!0)):(U(),W()),H&&(d.update(),d.render())},F=P=>{!P||P.length>0?(d.zoomFactor()<l&&d.zoomFactor(l,500),N(d.centeredNodes(),!1,!1),N(P,!0,!1),d.centerOnNodes(P,500),P.forEach(L=>{d.pickeableEdges(L.edges)}),d.update(),d.render()):(N(d.centeredNodes(),!1,!1),d.zoomFactor(h,500),d.centerOnNodes([],500),d.pickeableEdges([]),d.update(),d.render())},D=(P,L,H,j,V)=>{P?(I.style.left=H+"px",I.style.top=j+"px",V&&(I.style.display="block",Ze?(I.style.color=xe(L[0]*255,L[1]*255,L[2]*255).brighter(2).formatRgb(),I.style["text-shadow"]="-1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black"):(I.style.color=xe(L[0]*255,L[1]*255,L[2]*255).darker(2).formatRgb(),I.style["text-shadow"]="-1px -1px 0 white, 1px -1px 0 white, -1px 1px 0 white, 1px 1px 0 white")),I.textContent=P):I.style.display="none"},Q=(P,L,H,j)=>{if(P){let V=P.label??P.title??P.ID;D(V,P.color,L,H,j)}else D(null)},G=(P,L,H,j)=>{if(P){let V=P.source.label??P.source.title??P.source.ID,fe=P.target.label??P.target.title??P.target.ID,ne=V+" - "+fe;D(ne,P.source.color,L,H,j)}else D(null)},U=P=>{typeof P>"u"&&(P=d.network.index2Node.some(L=>L._selected)),P?(d.nodesGlobalOpacityScale(A),d.nodesGlobalSizeScale(y*s),d.nodesGlobalOutlineWidthScale(y*s),d.edgesGlobalOpacityScale(f*A)):(d.nodesGlobalOpacityScale(i),d.nodesGlobalSizeScale(s),d.nodesGlobalOutlineWidthScale(s),d.edgesGlobalOpacityScale(f))},W=P=>{typeof P>"u"&&(P=d.network.index2Node.some(L=>L._selected||L._highlighted||L._selectedNeighbor)),P?d.nodeColor(L=>L._selected||L._highlighted||L._selectedNeighbor?L._originalColor:Ze?L._darkerColor:L._brighterColor):d.nodeColor(L=>L._originalColor)},Y=Math.log10(d.network.indexedEdges.length/d.network.index2Node.length),q=Math.log10(d.network.index2Node.length),X=Math.log10(2*d.network.indexedEdges.length/d.network.index2Node.length/(d.network.index2Node.length-1)),J=Math.pow(10,1.2601+.2488*Y+-.3631*q+0*X),ue=Math.pow(10,1.9968+-.6822*Y+-.4954*q+0*X);O?J=u:J=h;let te=Math.log10(J),le=Math.pow(10,.8744+.1766*Y+-.2989*q+-.9187*te+0*X);rn?s=rn:s=le,an?f=an:f=ue,h=J,d.onNodeHoverStart((P,L)=>{Q(P,L?.clientX,L?.clientY,!0),B([P],!0)}),d.onNodeHoverMove((P,L)=>{Q(P,L?.clientX,L?.clientY,!1)}),d.onNodeHoverEnd((P,L)=>{P&&B([P],!1),Q(null)}),d.onNodeClick((P,L)=>{console.log(P?`Clicked: ${P.ID}`:"Clicked on background")}),d.onNodeDoubleClick((P,L)=>{P?(console.log(`Double Clicked: ${P.ID}`),F([P]),"mag id"in P&&window.open(`https://explore.openalex.org/works/W${P["mag id"]}`,"helios_mag")):(console.log("Double clicked on background"),F([]))}),d.onEdgeHoverStart((P,L)=>{G(P,L?.clientX,L?.clientY,!0),P&&B([P.source,P.target].filter(H=>!H._selected),!0)}),d.onEdgeHoverMove((P,L)=>{G(P,L?.clientX,L?.clientY,!1)}),d.onEdgeHoverEnd((P,L)=>{P&&B([P.source,P.target].filter(H=>!H._selected),!1),G(null)}),d.onEdgeClick((P,L)=>{console.log("Edge clicked"),console.log(P)}),d.onLayoutStart(()=>{console.log("Layout start"),K("#loading").style("display","block"),K("#message").style("display","none")}),d.onLayoutStop(()=>{console.log("Layout end"),K("#loading").style("display","none"),K("#message").style("display","block")}),d.backgroundColor(Ve).edgesGlobalOpacityScale(1).nodeSize(c).nodeOutlineWidth(a).nodeOutlineColor(Ve).additiveBlending(ci).shadedNodes(nn);let be={Export:{name:"\u2B07\uFE0E",mapColor:"#B1C3B6",color:"#008758",action:(P,L,H)=>{if(H.shiftKey){let j=d.network.positions,V="";for(let fe=0;fe<j.length;fe+=3)V+=`${j[fe]} ${j[fe+1]} ${j[fe+2]}
`;pc(t+"_positions.txt",V)}else console.log("Action!"),d.exportFigure(t+".png",{scale:2,supersampleFactor:2,backgroundColor:Ve})},extra:P=>{}},Size:{name:"Size",mapColor:"#AFB9C9",color:"#1E6099",action:null,extra:P=>{P.append("input").attr("type","range").attr("min","-1").attr("max","1").attr("step","0.1").attr("value",""+Math.log10(s)).attr("id","nodeSizeSlider").classed("slider",!0).style("min-width","60px").on("input",(L,H)=>{s=Math.pow(10,parseFloat(K("#nodeSizeSlider").property("value"))),U(),d.render(),L.stopPropagation()})}},Color:{name:"Color",mapColor:"#AFB9C9",color:"#1E6099",action:null,extra:P=>{P.append("select").attr("id","colorSelector").classed("selector",!0).style("min-width","60px").on("change",(L,H)=>{se()}).selectAll("option").data(Object.entries(d.network.index2Node[0])).enter().filter(L=>!L[0].startsWith("_")).filter(L=>!gc.has(L[0])&&!L[0].startsWith("_")).append("option").attr("value",L=>L[0]).property("selected",L=>L[0]==n).text(L=>L[0]),P.append("select").attr("id","colormapSelector").classed("selector",!0).style("min-width","60px")}},Edges:{name:"Edges",mapColor:"#B1A58C",color:"#903C22",action:null,extra:P=>{console.log("CALLED"),P.append("input").attr("type","range").attr("min","0").attr("max","1").attr("step",1/255+"").attr("value",""+Math.round(255*f)/255).attr("id","edgeOpacitySlider").classed("slider",!0).style("min-width","60px").on("input",(L,H)=>{f=parseFloat(K("#edgeOpacitySlider").property("value")),d.edgesGlobalOpacityScale(f),d.render(),L.stopPropagation()})}}},Ye=K("body").append("svg").classed("overlay",!0).attr("id","legendView").style("left","10px").style("top","10px").style("pointer-events:","none"),nt=P=>{Ye.selectAll("*").remove();let L=Ye.selectAll(".legend").data(P.keys());Ye.style("width",350+"px").style("height",(P.size+1)*20+"px");let H=L.enter().append("g").classed("legend",!0).attr("transform",(j,V)=>"translate(0,"+V*20+")");H.append("rect"),H.append("g").append("text"),L=L.merge(H),L.select("rect").attr("x",0).attr("y",0).attr("width",30).attr("height",15).attr("fill",j=>P.get(j)),L.select("g").attr("transform",j=>`translate(${35},${15/2})`).select("text").style("alignment-baseline","central").style("font-size","12px").append("tspan").style("alignment-baseline","central").text(j=>j).attr("fill",Ze?"white":"black").each(Ac)};function Ot(){let P=[];for(let[re,ie]of Object.entries(d.network.nodes))P.push(ie[n]);let L=bc(P),H=Pe[S];if(H.filter(Array.isArray).length>0){let re=H.findIndex(ie=>typeof ie<"u");typeof H[L.length-1]<"u"?H=H[L.length]:L.length-1<re?H=H[re]:H=H[H.length-1]}let V=ti(H),fe=new Map,ne=new Map;L.forEach((re,ie)=>{ie<H.length?(fe.set(re,V(re)),ne.set(re,H[ie])):fe.set(re,"#bbbbbb")}),ne.size<L.length&&ne.set("Other","#bbbbbb");for(let[re,ie]of Object.entries(d.network.nodes)){let ye=xe(fe.get(ie[n])),Dt=ye.darker(v),Pt=ye.brighter(k);ie._originalColor=[ye.r/255,ye.g/255,ye.b/255],ie._darkerColor=[Dt.r/255,Dt.g/255,Dt.b/255],ie._brighterColor=[Pt.r/255,Pt.g/255,Pt.b/255]}W(),d.update(),d.render(),nt(ne)}function Tt(){nt(new Map);let P=[],L=-1/0,H=1/0;for(let[fe,ne]of Object.entries(d.network.nodes))P.push(ne[n]),L=Math.max(L,ne[n]),H=Math.min(H,ne[n]);let j=Pe[w],V=oi(j).domain([H,L]);for(let[fe,ne]of Object.entries(d.network.nodes)){let re=xe(V(ne[n])),ie=re.darker(v),ye=re.brighter(k);ne._originalColor=[re.r/255,re.g/255,re.b/255],ne._darkerColor=[ie.r/255,ie.g/255,ie.b/255],ne._brighterColor=[ye.r/255,ye.g/255,ye.b/255]}W(),d.update(),d.render()}let rt=()=>{T?(S=K("#colormapSelector").property("value"),Ot()):(w=K("#colormapSelector").property("value"),Tt())},se=()=>{n=K("#colorSelector").property("value");let P=!1;for(let[L,H]of Object.entries(d.network.nodes))if(typeof H[n]!="number"){P=!0;break}T=P,console.log(P?"categorical":"continuous"),K("#colormapSelector").classed("selector",!0).style("min-width","60px").on("change",(L,H)=>{rt()}).selectAll("option").data(Object.entries(Pe).filter(L=>L[0].startsWith(P?"scheme":"interpolate"))).join("option").attr("value",L=>L[0]).property("selected",L=>L[0]==(P?S:w)).text(L=>L[0].replace("interpolate","").replace("scheme","")),rt()},Fe=["Export","Size","Color","Edges"];K("#selectionmenu").selectAll("span.menuEntry").data(Fe).enter().append("span").classed("menuEntry",!0).style("--color",P=>be[P].color).text(P=>be[P].name).each(function(P){K(this).call(be[P].extra)}),K("#selectionmenu").selectAll("span.menuEntry").filter(P=>be[P].action!=null).on("click",(P,L)=>{be[L].action&&be[L].action(K(globalThis),L,P)}).classed("hasAction",!0),document.addEventListener("keyup",P=>{P.code==="Space"&&(d.layoutWorker.isRunning()?d.pauseLayout():d.resumeLayout())}),on?(h=on,d.zoomFactor(h)):O?d.zoomFactor(h):(d.zoomFactor(.05),d.zoomFactor(h,1e3)),d.nodesGlobalSizeScale(s),d.nodesGlobalOutlineWidthScale(s),d.edgesGlobalOpacityScale(f),d.onReady(()=>{mt&&d.resumeLayout(),se()}),window.helios=d})};vc(si)});export default yc();
//# sourceMappingURL=main.44ed6621.js.map
