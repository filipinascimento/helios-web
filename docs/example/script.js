var ii=Object.defineProperty;var $t=(e,t)=>{for(var n in t)ii(e,n,{get:t[n],enumerable:!0})};var Pe={};$t(Pe,{MODE:()=>ai,NODE_ENV:()=>si,SSR:()=>oi});var ai="production",si="production",oi=!1;var Q=1e-6,Y=typeof Float32Array!="undefined"?Float32Array:Array,An=Math.random;var dh=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function wn(){var e=new Y(9);return Y!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ci(e){var t=new Y(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function li(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function hi(e,t,n,r,i,a,s,o,c){var f=new Y(9);return f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=i,f[5]=a,f[6]=s,f[7]=o,f[8]=c,f}function di(e,t,n,r,i,a,s,o,c,f){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e[6]=o,e[7]=c,e[8]=f,e}function ui(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function vi(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function pi(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8],h=l*s-o*f,d=-l*a+o*c,u=f*a-s*c,v=n*h+r*d+i*u;return v?(v=1/v,e[0]=h*v,e[1]=(-l*r+i*f)*v,e[2]=(o*r-i*s)*v,e[3]=d*v,e[4]=(l*n-i*c)*v,e[5]=(-o*n+i*a)*v,e[6]=u*v,e[7]=(-f*n+r*c)*v,e[8]=(s*n-r*a)*v,e):null}function gi(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8];return e[0]=s*l-o*f,e[1]=i*f-r*l,e[2]=r*o-i*s,e[3]=o*c-a*l,e[4]=n*l-i*c,e[5]=i*a-n*o,e[6]=a*f-s*c,e[7]=r*c-n*f,e[8]=n*s-r*a,e}function mi(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],c=e[7],f=e[8];return t*(f*a-s*c)+n*(-f*i+s*o)+r*(c*i-a*o)}function xn(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=t[8],d=n[0],u=n[1],v=n[2],m=n[3],p=n[4],A=n[5],x=n[6],_=n[7],w=n[8];return e[0]=d*r+u*s+v*f,e[1]=d*i+u*o+v*l,e[2]=d*a+u*c+v*h,e[3]=m*r+p*s+A*f,e[4]=m*i+p*o+A*l,e[5]=m*a+p*c+A*h,e[6]=x*r+_*s+w*f,e[7]=x*i+_*o+w*l,e[8]=x*a+_*c+w*h,e}function bi(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=t[8],d=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=c,e[6]=d*r+u*s+f,e[7]=d*i+u*o+l,e[8]=d*a+u*c+h,e}function yi(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=t[8],d=Math.sin(n),u=Math.cos(n);return e[0]=u*r+d*s,e[1]=u*i+d*o,e[2]=u*a+d*c,e[3]=u*s-d*r,e[4]=u*o-d*i,e[5]=u*c-d*a,e[6]=f,e[7]=l,e[8]=h,e}function Ai(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function wi(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function xi(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function _i(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Mi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Ii(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n+n,o=r+r,c=i+i,f=n*s,l=r*s,h=r*o,d=i*s,u=i*o,v=i*c,m=a*s,p=a*o,A=a*c;return e[0]=1-h-v,e[3]=l-A,e[6]=d+p,e[1]=l+A,e[4]=1-f-v,e[7]=u-m,e[2]=d-p,e[5]=u+m,e[8]=1-f-h,e}function Ei(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8],h=t[9],d=t[10],u=t[11],v=t[12],m=t[13],p=t[14],A=t[15],x=n*o-r*s,_=n*c-i*s,w=n*f-a*s,M=r*c-i*o,E=r*f-a*o,F=i*f-a*c,R=l*m-h*v,$=l*p-d*v,N=l*A-u*v,S=h*p-d*m,T=h*A-u*m,B=d*A-u*p,b=x*B-_*T+w*S+M*N-E*$+F*R;return b?(b=1/b,e[0]=(o*B-c*T+f*S)*b,e[1]=(c*N-s*B-f*$)*b,e[2]=(s*T-o*N+f*R)*b,e[3]=(i*T-r*B-a*S)*b,e[4]=(n*B-i*N+a*$)*b,e[5]=(r*N-n*T-a*R)*b,e[6]=(m*F-p*E+A*M)*b,e[7]=(p*w-v*F-A*_)*b,e[8]=(v*E-m*w+A*x)*b,e):null}function Bi(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Ci(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function ki(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ri(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function _n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Si(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Fi(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function $i(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Ni(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],l=e[8],h=t[0],d=t[1],u=t[2],v=t[3],m=t[4],p=t[5],A=t[6],x=t[7],_=t[8];return Math.abs(n-h)<=Q*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=Q*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-u)<=Q*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-v)<=Q*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-m)<=Q*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-p)<=Q*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(c-A)<=Q*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-x)<=Q*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(l-_)<=Q*Math.max(1,Math.abs(l),Math.abs(_))}var zi=xn,Di=_n,Nt=Object.freeze({__proto__:null,create:wn,fromMat4:fi,clone:ci,copy:li,fromValues:hi,set:di,identity:ui,transpose:vi,invert:pi,adjoint:gi,determinant:mi,multiply:xn,translate:bi,rotate:yi,scale:Ai,fromTranslation:wi,fromRotation:xi,fromScaling:_i,fromMat2d:Mi,fromQuat:Ii,normalFromMat4:Ei,projection:Bi,str:Ci,frob:ki,add:Ri,subtract:_n,multiplyScalar:Si,multiplyScalarAndAdd:Fi,exactEquals:$i,equals:Ni,mul:zi,sub:Di});function Ti(){var e=new Y(16);return Y!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Pi(e){var t=new Y(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Li(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Oi(e,t,n,r,i,a,s,o,c,f,l,h,d,u,v,m){var p=new Y(16);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=a,p[6]=s,p[7]=o,p[8]=c,p[9]=f,p[10]=l,p[11]=h,p[12]=d,p[13]=u,p[14]=v,p[15]=m,p}function qi(e,t,n,r,i,a,s,o,c,f,l,h,d,u,v,m,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=s,e[6]=o,e[7]=c,e[8]=f,e[9]=l,e[10]=h,e[11]=d,e[12]=u,e[13]=v,e[14]=m,e[15]=p,e}function Mn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qi(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function ji(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8],h=t[9],d=t[10],u=t[11],v=t[12],m=t[13],p=t[14],A=t[15],x=n*o-r*s,_=n*c-i*s,w=n*f-a*s,M=r*c-i*o,E=r*f-a*o,F=i*f-a*c,R=l*m-h*v,$=l*p-d*v,N=l*A-u*v,S=h*p-d*m,T=h*A-u*m,B=d*A-u*p,b=x*B-_*T+w*S+M*N-E*$+F*R;return b?(b=1/b,e[0]=(o*B-c*T+f*S)*b,e[1]=(i*T-r*B-a*S)*b,e[2]=(m*F-p*E+A*M)*b,e[3]=(d*E-h*F-u*M)*b,e[4]=(c*N-s*B-f*$)*b,e[5]=(n*B-i*N+a*$)*b,e[6]=(p*w-v*F-A*_)*b,e[7]=(l*F-d*w+u*_)*b,e[8]=(s*T-o*N+f*R)*b,e[9]=(r*N-n*T-a*R)*b,e[10]=(v*E-m*w+A*x)*b,e[11]=(h*w-l*E-u*x)*b,e[12]=(o*$-s*S-c*R)*b,e[13]=(n*S-r*$+i*R)*b,e[14]=(m*_-v*M-p*x)*b,e[15]=(l*M-h*_+d*x)*b,e):null}function Ui(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],l=t[8],h=t[9],d=t[10],u=t[11],v=t[12],m=t[13],p=t[14],A=t[15];return e[0]=o*(d*A-u*p)-h*(c*A-f*p)+m*(c*u-f*d),e[1]=-(r*(d*A-u*p)-h*(i*A-a*p)+m*(i*u-a*d)),e[2]=r*(c*A-f*p)-o*(i*A-a*p)+m*(i*f-a*c),e[3]=-(r*(c*u-f*d)-o*(i*u-a*d)+h*(i*f-a*c)),e[4]=-(s*(d*A-u*p)-l*(c*A-f*p)+v*(c*u-f*d)),e[5]=n*(d*A-u*p)-l*(i*A-a*p)+v*(i*u-a*d),e[6]=-(n*(c*A-f*p)-s*(i*A-a*p)+v*(i*f-a*c)),e[7]=n*(c*u-f*d)-s*(i*u-a*d)+l*(i*f-a*c),e[8]=s*(h*A-u*m)-l*(o*A-f*m)+v*(o*u-f*h),e[9]=-(n*(h*A-u*m)-l*(r*A-a*m)+v*(r*u-a*h)),e[10]=n*(o*A-f*m)-s*(r*A-a*m)+v*(r*f-a*o),e[11]=-(n*(o*u-f*h)-s*(r*u-a*h)+l*(r*f-a*o)),e[12]=-(s*(h*p-d*m)-l*(o*p-c*m)+v*(o*d-c*h)),e[13]=n*(h*p-d*m)-l*(r*p-i*m)+v*(r*d-i*h),e[14]=-(n*(o*p-c*m)-s*(r*p-i*m)+v*(r*c-i*o)),e[15]=n*(o*d-c*h)-s*(r*d-i*h)+l*(r*c-i*o),e}function Gi(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],u=e[12],v=e[13],m=e[14],p=e[15],A=t*s-n*a,x=t*o-r*a,_=t*c-i*a,w=n*o-r*s,M=n*c-i*s,E=r*c-i*o,F=f*v-l*u,R=f*m-h*u,$=f*p-d*u,N=l*m-h*v,S=l*p-d*v,T=h*p-d*m;return A*T-x*S+_*N+w*$-M*R+E*F}function In(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=t[8],d=t[9],u=t[10],v=t[11],m=t[12],p=t[13],A=t[14],x=t[15],_=n[0],w=n[1],M=n[2],E=n[3];return e[0]=_*r+w*o+M*h+E*m,e[1]=_*i+w*c+M*d+E*p,e[2]=_*a+w*f+M*u+E*A,e[3]=_*s+w*l+M*v+E*x,_=n[4],w=n[5],M=n[6],E=n[7],e[4]=_*r+w*o+M*h+E*m,e[5]=_*i+w*c+M*d+E*p,e[6]=_*a+w*f+M*u+E*A,e[7]=_*s+w*l+M*v+E*x,_=n[8],w=n[9],M=n[10],E=n[11],e[8]=_*r+w*o+M*h+E*m,e[9]=_*i+w*c+M*d+E*p,e[10]=_*a+w*f+M*u+E*A,e[11]=_*s+w*l+M*v+E*x,_=n[12],w=n[13],M=n[14],E=n[15],e[12]=_*r+w*o+M*h+E*m,e[13]=_*i+w*c+M*d+E*p,e[14]=_*a+w*f+M*u+E*A,e[15]=_*s+w*l+M*v+E*x,e}function Yi(e,t,n){var r=n[0],i=n[1],a=n[2],s,o,c,f,l,h,d,u,v,m,p,A;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(s=t[0],o=t[1],c=t[2],f=t[3],l=t[4],h=t[5],d=t[6],u=t[7],v=t[8],m=t[9],p=t[10],A=t[11],e[0]=s,e[1]=o,e[2]=c,e[3]=f,e[4]=l,e[5]=h,e[6]=d,e[7]=u,e[8]=v,e[9]=m,e[10]=p,e[11]=A,e[12]=s*r+l*i+v*a+t[12],e[13]=o*r+h*i+m*a+t[13],e[14]=c*r+d*i+p*a+t[14],e[15]=f*r+u*i+A*a+t[15]),e}function Hi(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Wi(e,t,n,r){var i=r[0],a=r[1],s=r[2],o=Math.hypot(i,a,s),c,f,l,h,d,u,v,m,p,A,x,_,w,M,E,F,R,$,N,S,T,B,b,g;return o<Q?null:(o=1/o,i*=o,a*=o,s*=o,c=Math.sin(n),f=Math.cos(n),l=1-f,h=t[0],d=t[1],u=t[2],v=t[3],m=t[4],p=t[5],A=t[6],x=t[7],_=t[8],w=t[9],M=t[10],E=t[11],F=i*i*l+f,R=a*i*l+s*c,$=s*i*l-a*c,N=i*a*l-s*c,S=a*a*l+f,T=s*a*l+i*c,B=i*s*l+a*c,b=a*s*l-i*c,g=s*s*l+f,e[0]=h*F+m*R+_*$,e[1]=d*F+p*R+w*$,e[2]=u*F+A*R+M*$,e[3]=v*F+x*R+E*$,e[4]=h*N+m*S+_*T,e[5]=d*N+p*S+w*T,e[6]=u*N+A*S+M*T,e[7]=v*N+x*S+E*T,e[8]=h*B+m*b+_*g,e[9]=d*B+p*b+w*g,e[10]=u*B+A*b+M*g,e[11]=v*B+x*b+E*g,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Xi(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],s=t[5],o=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+f*r,e[5]=s*i+l*r,e[6]=o*i+h*r,e[7]=c*i+d*r,e[8]=f*i-a*r,e[9]=l*i-s*r,e[10]=h*i-o*r,e[11]=d*i-c*r,e}function Vi(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],s=t[1],o=t[2],c=t[3],f=t[8],l=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-f*r,e[1]=s*i-l*r,e[2]=o*i-h*r,e[3]=c*i-d*r,e[8]=a*r+f*i,e[9]=s*r+l*i,e[10]=o*r+h*i,e[11]=c*r+d*i,e}function Zi(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],s=t[1],o=t[2],c=t[3],f=t[4],l=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+f*r,e[1]=s*i+l*r,e[2]=o*i+h*r,e[3]=c*i+d*r,e[4]=f*i-a*r,e[5]=l*i-s*r,e[6]=h*i-o*r,e[7]=d*i-c*r,e}function Ki(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Ji(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ea(e,t,n){var r=n[0],i=n[1],a=n[2],s=Math.hypot(r,i,a),o,c,f;return s<Q?null:(s=1/s,r*=s,i*=s,a*=s,o=Math.sin(t),c=Math.cos(t),f=1-c,e[0]=r*r*f+c,e[1]=i*r*f+a*o,e[2]=a*r*f-i*o,e[3]=0,e[4]=r*i*f-a*o,e[5]=i*i*f+c,e[6]=a*i*f+r*o,e[7]=0,e[8]=r*a*f+i*o,e[9]=i*a*f-r*o,e[10]=a*a*f+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ta(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function na(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ra(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function En(e,t,n){var r=t[0],i=t[1],a=t[2],s=t[3],o=r+r,c=i+i,f=a+a,l=r*o,h=r*c,d=r*f,u=i*c,v=i*f,m=a*f,p=s*o,A=s*c,x=s*f;return e[0]=1-(u+m),e[1]=h+x,e[2]=d-A,e[3]=0,e[4]=h-x,e[5]=1-(l+m),e[6]=v+p,e[7]=0,e[8]=d+A,e[9]=v-p,e[10]=1-(l+u),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function ia(e,t){var n=new Y(3),r=-t[0],i=-t[1],a=-t[2],s=t[3],o=t[4],c=t[5],f=t[6],l=t[7],h=r*r+i*i+a*a+s*s;return h>0?(n[0]=(o*s+l*r+c*a-f*i)*2/h,n[1]=(c*s+l*i+f*r-o*a)*2/h,n[2]=(f*s+l*a+o*i-c*r)*2/h):(n[0]=(o*s+l*r+c*a-f*i)*2,n[1]=(c*s+l*i+f*r-o*a)*2,n[2]=(f*s+l*a+o*i-c*r)*2),En(e,t,n),e}function aa(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Bn(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],s=t[5],o=t[6],c=t[8],f=t[9],l=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,s,o),e[2]=Math.hypot(c,f,l),e}function sa(e,t){var n=new Y(3);Bn(n,t);var r=1/n[0],i=1/n[1],a=1/n[2],s=t[0]*r,o=t[1]*i,c=t[2]*a,f=t[4]*r,l=t[5]*i,h=t[6]*a,d=t[8]*r,u=t[9]*i,v=t[10]*a,m=s+l+v,p=0;return m>0?(p=Math.sqrt(m+1)*2,e[3]=.25*p,e[0]=(h-u)/p,e[1]=(d-c)/p,e[2]=(o-f)/p):s>l&&s>v?(p=Math.sqrt(1+s-l-v)*2,e[3]=(h-u)/p,e[0]=.25*p,e[1]=(o+f)/p,e[2]=(d+c)/p):l>v?(p=Math.sqrt(1+l-s-v)*2,e[3]=(d-c)/p,e[0]=(o+f)/p,e[1]=.25*p,e[2]=(h+u)/p):(p=Math.sqrt(1+v-s-l)*2,e[3]=(o-f)/p,e[0]=(d+c)/p,e[1]=(h+u)/p,e[2]=.25*p),e}function oa(e,t,n,r){var i=t[0],a=t[1],s=t[2],o=t[3],c=i+i,f=a+a,l=s+s,h=i*c,d=i*f,u=i*l,v=a*f,m=a*l,p=s*l,A=o*c,x=o*f,_=o*l,w=r[0],M=r[1],E=r[2];return e[0]=(1-(v+p))*w,e[1]=(d+_)*w,e[2]=(u-x)*w,e[3]=0,e[4]=(d-_)*M,e[5]=(1-(h+p))*M,e[6]=(m+A)*M,e[7]=0,e[8]=(u+x)*E,e[9]=(m-A)*E,e[10]=(1-(h+v))*E,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function fa(e,t,n,r,i){var a=t[0],s=t[1],o=t[2],c=t[3],f=a+a,l=s+s,h=o+o,d=a*f,u=a*l,v=a*h,m=s*l,p=s*h,A=o*h,x=c*f,_=c*l,w=c*h,M=r[0],E=r[1],F=r[2],R=i[0],$=i[1],N=i[2],S=(1-(m+A))*M,T=(u+w)*M,B=(v-_)*M,b=(u-w)*E,g=(1-(d+A))*E,y=(p+x)*E,I=(v+_)*F,C=(p-x)*F,k=(1-(d+m))*F;return e[0]=S,e[1]=T,e[2]=B,e[3]=0,e[4]=b,e[5]=g,e[6]=y,e[7]=0,e[8]=I,e[9]=C,e[10]=k,e[11]=0,e[12]=n[0]+R-(S*R+b*$+I*N),e[13]=n[1]+$-(T*R+g*$+C*N),e[14]=n[2]+N-(B*R+y*$+k*N),e[15]=1,e}function ca(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n+n,o=r+r,c=i+i,f=n*s,l=r*s,h=r*o,d=i*s,u=i*o,v=i*c,m=a*s,p=a*o,A=a*c;return e[0]=1-h-v,e[1]=l+A,e[2]=d-p,e[3]=0,e[4]=l-A,e[5]=1-f-v,e[6]=u+m,e[7]=0,e[8]=d+p,e[9]=u-m,e[10]=1-f-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function la(e,t,n,r,i,a,s){var o=1/(n-t),c=1/(i-r),f=1/(a-s);return e[0]=a*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a*2*c,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*c,e[10]=(s+a)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*f,e[15]=0,e}function ha(e,t,n,r,i){var a=1/Math.tan(t/2),s;return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==Infinity?(s=1/(r-i),e[10]=(i+r)*s,e[14]=2*i*r*s):(e[10]=-1,e[14]=-2*r),e}function da(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),c=2/(s+o),f=2/(i+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-((s-o)*c*.5),e[9]=(i-a)*f*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function ua(e,t,n,r,i,a,s){var o=1/(t-n),c=1/(r-i),f=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*c,e[14]=(s+a)*f,e[15]=1,e}function va(e,t,n,r){var i,a,s,o,c,f,l,h,d,u,v=t[0],m=t[1],p=t[2],A=r[0],x=r[1],_=r[2],w=n[0],M=n[1],E=n[2];return Math.abs(v-w)<Q&&Math.abs(m-M)<Q&&Math.abs(p-E)<Q?Mn(e):(l=v-w,h=m-M,d=p-E,u=1/Math.hypot(l,h,d),l*=u,h*=u,d*=u,i=x*d-_*h,a=_*l-A*d,s=A*h-x*l,u=Math.hypot(i,a,s),u?(u=1/u,i*=u,a*=u,s*=u):(i=0,a=0,s=0),o=h*s-d*a,c=d*i-l*s,f=l*a-h*i,u=Math.hypot(o,c,f),u?(u=1/u,o*=u,c*=u,f*=u):(o=0,c=0,f=0),e[0]=i,e[1]=o,e[2]=l,e[3]=0,e[4]=a,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=f,e[10]=d,e[11]=0,e[12]=-(i*v+a*m+s*p),e[13]=-(o*v+c*m+f*p),e[14]=-(l*v+h*m+d*p),e[15]=1,e)}function pa(e,t,n,r){var i=t[0],a=t[1],s=t[2],o=r[0],c=r[1],f=r[2],l=i-n[0],h=a-n[1],d=s-n[2],u=l*l+h*h+d*d;u>0&&(u=1/Math.sqrt(u),l*=u,h*=u,d*=u);var v=c*d-f*h,m=f*l-o*d,p=o*h-c*l;return u=v*v+m*m+p*p,u>0&&(u=1/Math.sqrt(u),v*=u,m*=u,p*=u),e[0]=v,e[1]=m,e[2]=p,e[3]=0,e[4]=h*p-d*m,e[5]=d*v-l*p,e[6]=l*m-h*v,e[7]=0,e[8]=l,e[9]=h,e[10]=d,e[11]=0,e[12]=i,e[13]=a,e[14]=s,e[15]=1,e}function ga(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ma(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ba(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Cn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function ya(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Aa(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function wa(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function xa(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],u=e[11],v=e[12],m=e[13],p=e[14],A=e[15],x=t[0],_=t[1],w=t[2],M=t[3],E=t[4],F=t[5],R=t[6],$=t[7],N=t[8],S=t[9],T=t[10],B=t[11],b=t[12],g=t[13],y=t[14],I=t[15];return Math.abs(n-x)<=Q*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(r-_)<=Q*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-w)<=Q*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-M)<=Q*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-E)<=Q*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(o-F)<=Q*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(c-R)<=Q*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-$)<=Q*Math.max(1,Math.abs(f),Math.abs($))&&Math.abs(l-N)<=Q*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(h-S)<=Q*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-T)<=Q*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(u-B)<=Q*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(v-b)<=Q*Math.max(1,Math.abs(v),Math.abs(b))&&Math.abs(m-g)<=Q*Math.max(1,Math.abs(m),Math.abs(g))&&Math.abs(p-y)<=Q*Math.max(1,Math.abs(p),Math.abs(y))&&Math.abs(A-I)<=Q*Math.max(1,Math.abs(A),Math.abs(I))}var _a=In,Ma=Cn,W=Object.freeze({__proto__:null,create:Ti,clone:Pi,copy:Li,fromValues:Oi,set:qi,identity:Mn,transpose:Qi,invert:ji,adjoint:Ui,determinant:Gi,multiply:In,translate:Yi,scale:Hi,rotate:Wi,rotateX:Xi,rotateY:Vi,rotateZ:Zi,fromTranslation:Ki,fromScaling:Ji,fromRotation:ea,fromXRotation:ta,fromYRotation:na,fromZRotation:ra,fromRotationTranslation:En,fromQuat2:ia,getTranslation:aa,getScaling:Bn,getRotation:sa,fromRotationTranslationScale:oa,fromRotationTranslationScaleOrigin:fa,fromQuat:ca,frustum:la,perspective:ha,perspectiveFromFieldOfView:da,ortho:ua,lookAt:va,targetTo:pa,str:ga,frob:ma,add:ba,subtract:Cn,multiplyScalar:ya,multiplyScalarAndAdd:Aa,exactEquals:wa,equals:xa,mul:_a,sub:Ma});function zt(){var e=new Y(3);return Y!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ia(e){var t=new Y(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function kn(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Dt(e,t,n){var r=new Y(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ea(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ba(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Ca(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Rn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Sn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Fn(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function ka(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Ra(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Sa(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Fa(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function $a(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Na(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function za(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function $n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function Nn(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function zn(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Da(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Ta(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Dn(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Tt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ze(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[0],o=n[1],c=n[2];return e[0]=i*c-a*o,e[1]=a*s-r*c,e[2]=r*o-i*s,e}function Pa(e,t,n,r){var i=t[0],a=t[1],s=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=s+r*(n[2]-s),e}function La(e,t,n,r,i,a){var s=a*a,o=s*(2*a-3)+1,c=s*(a-2)+a,f=s*(a-1),l=s*(3-2*a);return e[0]=t[0]*o+n[0]*c+r[0]*f+i[0]*l,e[1]=t[1]*o+n[1]*c+r[1]*f+i[1]*l,e[2]=t[2]*o+n[2]*c+r[2]*f+i[2]*l,e}function Oa(e,t,n,r,i,a){var s=1-a,o=s*s,c=a*a,f=o*s,l=3*a*o,h=3*c*s,d=c*a;return e[0]=t[0]*f+n[0]*l+r[0]*h+i[0]*d,e[1]=t[1]*f+n[1]*l+r[1]*h+i[1]*d,e[2]=t[2]*f+n[2]*l+r[2]*h+i[2]*d,e}function qa(e,t){t=t||1;var n=An()*2*Math.PI,r=An()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function Qa(e,t,n){var r=t[0],i=t[1],a=t[2],s=n[3]*r+n[7]*i+n[11]*a+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/s,e}function ja(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function Ua(e,t,n){var r=n[0],i=n[1],a=n[2],s=n[3],o=t[0],c=t[1],f=t[2],l=i*f-a*c,h=a*o-r*f,d=r*c-i*o,u=i*d-a*h,v=a*l-r*d,m=r*h-i*l,p=s*2;return l*=p,h*=p,d*=p,u*=2,v*=2,m*=2,e[0]=o+l+u,e[1]=c+h+v,e[2]=f+d+m,e}function Ga(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Ya(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Ha(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Wa(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],s=t[1],o=t[2],c=Math.sqrt(n*n+r*r+i*i),f=Math.sqrt(a*a+s*s+o*o),l=c*f,h=l&&Tt(e,t)/l;return Math.acos(Math.min(Math.max(h,-1),1))}function Xa(e){return e[0]=0,e[1]=0,e[2]=0,e}function Va(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Za(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Ka(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],s=t[1],o=t[2];return Math.abs(n-a)<=Q*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=Q*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=Q*Math.max(1,Math.abs(i),Math.abs(o))}var Ja=Rn,es=Sn,ts=Fn,ns=$n,rs=Nn,Tn=kn,is=zn,as=function(){var e=zt();return function(t,n,r,i,a,s){var o,c;for(n||(n=3),r||(r=0),i?c=Math.min(i*n+r,t.length):c=t.length,o=r;o<c;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],a(e,e,s),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}}(),Pn=Object.freeze({__proto__:null,create:zt,clone:Ia,length:kn,fromValues:Dt,copy:Ea,set:Ba,add:Ca,subtract:Rn,multiply:Sn,divide:Fn,ceil:ka,floor:Ra,min:Sa,max:Fa,round:$a,scale:Na,scaleAndAdd:za,distance:$n,squaredDistance:Nn,squaredLength:zn,negate:Da,inverse:Ta,normalize:Dn,dot:Tt,cross:Ze,lerp:Pa,hermite:La,bezier:Oa,random:qa,transformMat4:Qa,transformMat3:ja,transformQuat:Ua,rotateX:Ga,rotateY:Ya,rotateZ:Ha,angle:Wa,zero:Xa,str:Va,exactEquals:Za,equals:Ka,sub:Ja,mul:es,div:ts,dist:ns,sqrDist:rs,len:Tn,sqrLen:is,forEach:as});function ss(){var e=new Y(4);return Y!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function os(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],s=n*n+r*r+i*i+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=a*s,e}var uh=function(){var e=ss();return function(t,n,r,i,a,s){var o,c;for(n||(n=4),r||(r=0),i?c=Math.min(i*n+r,t.length):c=t.length,o=r;o<c;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],a(e,e,s),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}}();function Ln(){var e=new Y(4);return Y!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function fs(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Pt(e,t,n,r){var i=t[0],a=t[1],s=t[2],o=t[3],c=n[0],f=n[1],l=n[2],h=n[3],d,u,v,m,p;return u=i*c+a*f+s*l+o*h,u<0&&(u=-u,c=-c,f=-f,l=-l,h=-h),1-u>Q?(d=Math.acos(u),v=Math.sin(d),m=Math.sin((1-r)*d)/v,p=Math.sin(r*d)/v):(m=1-r,p=r),e[0]=m*i+p*c,e[1]=m*a+p*f,e[2]=m*s+p*l,e[3]=m*o+p*h,e}function cs(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var a=(i+1)%3,s=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[a*3+a]-t[s*3+s]+1),e[i]=.5*r,r=.5/r,e[3]=(t[a*3+s]-t[s*3+a])*r,e[a]=(t[a*3+i]+t[i*3+a])*r,e[s]=(t[s*3+i]+t[i*3+s])*r}return e}var On=os;var vh=function(){var e=zt(),t=Dt(1,0,0),n=Dt(0,1,0);return function(r,i,a){var s=Tt(i,a);return s<-.999999?(Ze(e,t,i),Tn(e)<1e-6&&Ze(e,n,i),Dn(e,e),fs(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Ze(e,i,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,On(r,r))}}(),ph=function(){var e=Ln(),t=Ln();return function(n,r,i,a,s,o){return Pt(e,r,s,o),Pt(t,i,a,o),Pt(n,e,t,2*o*(1-o)),n}}(),gh=function(){var e=wn();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],On(t,cs(t,e))}}();function ls(){var e=new Y(2);return Y!=Float32Array&&(e[0]=0,e[1]=0),e}var mh=function(){var e=ls();return function(t,n,r,i,a,s){var o,c;for(n||(n=2),r||(r=0),i?c=Math.min(i*n+r,t.length):c=t.length,o=r;o<c;o+=n)e[0]=t[o],e[1]=t[o+1],a(e,e,s),t[o]=e[0],t[o+1]=e[1];return t}}();function Lt(e,t,n,r){if(r<=n)return n;let i=Math.floor(n+(r-n)/2),a=t-e[i].value,s=t-e[i+1].value;return a<0?Lt(e,t,n,i-1):s<0?i:Lt(e,t,i+1,r)}var hs=(e,t,n)=>{let r=(e-t)/(n-t);return[1-r,r]};function ds(e){return e.value!==void 0&&e.mapped!==void 0}function us(e){return e.length>0&&ds(e[0])}function qn(e,t,n,r){return[e*t[0]+n*r[0],e*t[1]+n*r[1],e*t[2]+n*r[2]]}function Qn(e){return e||hs}function jn(e,t,n){return!Array.isArray(e)||e.length<1?gs:us(e)?vs(e,t,Qn(n),qn):ps(e,t,Qn(n),qn)}function vs(e,t,n,r){let i=e.sort((a,s)=>a.value<s.value?-1:1);return function(a){let s=t(a),o=Lt(i,s,0,i.length-1);if(o==0&&s<i[0].value)return i[o].mapped;if(o==i.length-1)return i[o].mapped;let[c,f]=n(s,i[o].value,i[o+1].value);return r(c,i[o].mapped,f,i[o+1].mapped)}}function ps(e,t,n,r){return function(i){let a=t(i),s=(e.length-1)*a;if(s<=0)return e[0];if(s>=e.length-1)return e[e.length-1];let o=Math.floor(s),[c,f]=n(s,o,o+1);return r(c,e[o],f,e[o+1])}}function gs(e){return[0,0,0]}function Un(e,t){let[n,r]=e,[i,a]=t;return Math.abs(n-r)<Number.EPSILON&&(r=n+1),function(s){return i+(a-i)*((s-n)/(r-n))}}var Gn=[[.001462,466e-6,.013866],[.002267,.00127,.01857],[.003299,.002249,.024239],[.004547,.003392,.030909],[.006006,.004692,.038558],[.007676,.006136,.046836],[.009561,.007713,.055143],[.011663,.009417,.06346],[.013995,.011225,.071862],[.016561,.013136,.080282],[.019373,.015133,.088767],[.022447,.017199,.097327],[.025793,.019331,.10593],[.029432,.021503,.114621],[.033385,.023702,.123397],[.037668,.025921,.132232],[.042253,.028139,.141141],[.046915,.030324,.150164],[.051644,.032474,.159254],[.056449,.034569,.168414],[.06134,.03659,.177642],[.066331,.038504,.186962],[.071429,.040294,.196354],[.076637,.041905,.205799],[.081962,.043328,.215289],[.087411,.044556,.224813],[.09299,.045583,.234358],[.098702,.046402,.243904],[.104551,.047008,.25343],[.110536,.047399,.262912],[.116656,.047574,.272321],[.122908,.047536,.281624],[.129285,.047293,.290788],[.135778,.046856,.299776],[.142378,.046242,.308553],[.149073,.045468,.317085],[.15585,.044559,.325338],[.162689,.043554,.333277],[.169575,.042489,.340874],[.176493,.041402,.348111],[.183429,.040329,.354971],[.190367,.039309,.361447],[.197297,.0384,.367535],[.204209,.037632,.373238],[.211095,.03703,.378563],[.217949,.036615,.383522],[.224763,.036405,.388129],[.231538,.036405,.3924],[.238273,.036621,.396353],[.244967,.037055,.400007],[.25162,.037705,.403378],[.258234,.038571,.406485],[.26481,.039647,.409345],[.271347,.040922,.411976],[.27785,.042353,.414392],[.284321,.043933,.416608],[.290763,.045644,.418637],[.297178,.04747,.420491],[.303568,.049396,.422182],[.309935,.051407,.423721],[.316282,.05349,.425116],[.32261,.055634,.426377],[.328921,.057827,.427511],[.335217,.06006,.428524],[.3415,.062325,.429425],[.347771,.064616,.430217],[.354032,.066925,.430906],[.360284,.069247,.431497],[.366529,.071579,.431994],[.372768,.073915,.4324],[.379001,.076253,.432719],[.385228,.078591,.432955],[.391453,.080927,.433109],[.397674,.083257,.433183],[.403894,.08558,.433179],[.410113,.087896,.433098],[.416331,.090203,.432943],[.422549,.092501,.432714],[.428768,.09479,.432412],[.434987,.097069,.432039],[.441207,.099338,.431594],[.447428,.101597,.43108],[.453651,.103848,.430498],[.459875,.106089,.429846],[.4661,.108322,.429125],[.472328,.110547,.428334],[.478558,.112764,.427475],[.484789,.114974,.426548],[.491022,.117179,.425552],[.497257,.119379,.424488],[.503493,.121575,.423356],[.50973,.123769,.422156],[.515967,.12596,.420887],[.522206,.12815,.419549],[.528444,.130341,.418142],[.534683,.132534,.416667],[.54092,.134729,.415123],[.547157,.136929,.413511],[.553392,.139134,.411829],[.559624,.141346,.410078],[.565854,.143567,.408258],[.572081,.145797,.406369],[.578304,.148039,.404411],[.584521,.150294,.402385],[.590734,.152563,.40029],[.59694,.154848,.398125],[.603139,.157151,.395891],[.60933,.159474,.393589],[.615513,.161817,.391219],[.621685,.164184,.388781],[.627847,.166575,.386276],[.633998,.168992,.383704],[.640135,.171438,.381065],[.64626,.173914,.378359],[.652369,.176421,.375586],[.658463,.178962,.372748],[.66454,.181539,.369846],[.670599,.184153,.366879],[.676638,.186807,.363849],[.682656,.189501,.360757],[.688653,.192239,.357603],[.694627,.195021,.354388],[.700576,.197851,.351113],[.7065,.200728,.347777],[.712396,.203656,.344383],[.718264,.206636,.340931],[.724103,.20967,.337424],[.729909,.212759,.333861],[.735683,.215906,.330245],[.741423,.219112,.326576],[.747127,.222378,.322856],[.752794,.225706,.319085],[.758422,.229097,.315266],[.76401,.232554,.311399],[.769556,.236077,.307485],[.775059,.239667,.303526],[.780517,.243327,.299523],[.785929,.247056,.295477],[.791293,.250856,.29139],[.796607,.254728,.287264],[.801871,.258674,.283099],[.807082,.262692,.278898],[.812239,.266786,.274661],[.817341,.270954,.27039],[.822386,.275197,.266085],[.827372,.279517,.26175],[.832299,.283913,.257383],[.837165,.288385,.252988],[.841969,.292933,.248564],[.846709,.297559,.244113],[.851384,.30226,.239636],[.855992,.307038,.235133],[.860533,.311892,.230606],[.865006,.316822,.226055],[.869409,.321827,.221482],[.873741,.326906,.216886],[.878001,.33206,.212268],[.882188,.337287,.207628],[.886302,.342586,.202968],[.890341,.347957,.198286],[.894305,.353399,.193584],[.898192,.358911,.18886],[.902003,.364492,.184116],[.905735,.37014,.17935],[.90939,.375856,.174563],[.912966,.381636,.169755],[.916462,.387481,.164924],[.919879,.393389,.16007],[.923215,.399359,.155193],[.92647,.405389,.150292],[.929644,.411479,.145367],[.932737,.417627,.140417],[.935747,.423831,.13544],[.938675,.430091,.130438],[.941521,.436405,.125409],[.944285,.442772,.120354],[.946965,.449191,.115272],[.949562,.45566,.110164],[.952075,.462178,.105031],[.954506,.468744,.099874],[.956852,.475356,.094695],[.959114,.482014,.089499],[.961293,.488716,.084289],[.963387,.495462,.079073],[.965397,.502249,.073859],[.967322,.509078,.068659],[.969163,.515946,.063488],[.970919,.522853,.058367],[.97259,.529798,.053324],[.974176,.53678,.048392],[.975677,.543798,.043618],[.977092,.55085,.03905],[.978422,.557937,.034931],[.979666,.565057,.031409],[.980824,.572209,.028508],[.981895,.579392,.02625],[.982881,.586606,.024661],[.983779,.593849,.02377],[.984591,.601122,.023606],[.985315,.608422,.024202],[.985952,.61575,.025592],[.986502,.623105,.027814],[.986964,.630485,.030908],[.987337,.63789,.034916],[.987622,.64532,.039886],[.987819,.652773,.045581],[.987926,.66025,.05175],[.987945,.667748,.058329],[.987874,.675267,.065257],[.987714,.682807,.072489],[.987464,.690366,.07999],[.987124,.697944,.087731],[.986694,.70554,.095694],[.986175,.713153,.103863],[.985566,.720782,.112229],[.984865,.728427,.120785],[.984075,.736087,.129527],[.983196,.743758,.138453],[.982228,.751442,.147565],[.981173,.759135,.156863],[.980032,.766837,.166353],[.978806,.774545,.176037],[.977497,.782258,.185923],[.976108,.789974,.196018],[.974638,.797692,.206332],[.973088,.805409,.216877],[.971468,.813122,.227658],[.969783,.820825,.238686],[.968041,.828515,.249972],[.966243,.836191,.261534],[.964394,.843848,.273391],[.962517,.851476,.285546],[.960626,.859069,.29801],[.95872,.866624,.31082],[.956834,.874129,.323974],[.954997,.881569,.337475],[.953215,.888942,.351369],[.951546,.896226,.365627],[.950018,.903409,.380271],[.948683,.910473,.395289],[.947594,.917399,.410665],[.946809,.924168,.426373],[.946392,.930761,.442367],[.946403,.937159,.458592],[.946903,.943348,.47497],[.947937,.949318,.491426],[.949545,.955063,.50786],[.95174,.960587,.524203],[.954529,.965896,.540361],[.957896,.971003,.556275],[.961812,.975924,.571925],[.966249,.980678,.587206],[.971162,.985282,.602154],[.976511,.989753,.61676],[.982257,.994109,.631017],[.988362,.998364,.644924]];var Yn=class{constructor(t,n,r,i){for(let[a,s]of Object.entries(t))a=="color"||a=="size"||a=="position"||a=="outlineColor"||a=="outlineWidth"||(this[a]=s);this._network=i,this.ID=n,this.index=r}set color(t){let n=this.index;this._network.colors[n*3+0]=t[0],this._network.colors[n*3+1]=t[1],this._network.colors[n*3+2]=t[2]}get color(){let t=this.index;return[this._network.colors[t*3+0],this._network.colors[t*3+1],this._network.colors[t*3+2]]}set size(t){this._network.sizes[this.index]=t}get size(){return this._network.sizes[this.index]}set outlineColor(t){let n=this.index;this._network.outlineColors[n*3+0]=t[0],this._network.outlineColors[n*3+1]=t[1],this._network.outlineColors[n*3+2]=t[2]}get outlineColor(){let t=this.index;return[this._network.outlineColors[t*3+0],this._network.outlineColors[t*3+1],this._network.outlineColors[t*3+2]]}set outlineWidth(t){this._network.outlineWidths[this.index]=t}get outlineWidth(){return this._network.outlineWidths[this.index]}get network(){return this._network}set position(t){let n=this.index;this._network.positions[n*3+0]=t[0],this._network.positions[n*3+1]=t[1],this._network.positions[n*3+2]=t[2]}get position(){let t=this.index;return[this._network.positions[t*3+0],this._network.positions[t*3+1],this._network.positions[t*3+2]]}},Ot=class{constructor(t,n,r){this.ID2index=new Object,this.index2Node=[];for(let[s,o]of Object.entries(t))if(!this.ID2index.hasOwnProperty(s)){let c=this.index2Node.length;this.ID2index[s]=c,o.index=c,o.ID=s,this.index2Node.push(o)}this.indexedEdges=new Int32Array(n.length*2);for(let s=0;s<n.length;s++){let o=n[s];this.indexedEdges[s*2]=this.ID2index[o.source],this.indexedEdges[s*2+1]=this.ID2index[o.target]}this.positions=new Float32Array(3*this.index2Node.length),this.colors=new Float32Array(3*this.index2Node.length),this.sizes=new Float32Array(this.index2Node.length),this.intensities=new Float32Array(this.index2Node.length),this.outlineColors=new Float32Array(3*this.index2Node.length),this.outlineWidths=new Float32Array(this.index2Node.length),this.nodes={};let i=Un([0,this.index2Node.length],[0,1]),a=jn(Gn,i);for(let s=0;s<this.index2Node.length;s++){let o=this.index2Node[s];if(o.hasOwnProperty("position")?(this.positions[s*3]=o.position[0],this.positions[s*3+1]=o.position[1],this.positions[s*3+2]=o.position[2]):(this.positions[s*3+0]=(Math.random()-.5)*2*200,this.positions[s*3+1]=(Math.random()-.5)*2*200,this.positions[s*3+2]=(Math.random()-.5)*2*200),o.hasOwnProperty("color"))s==0&&console.log("NODE COLOR:",o.color),this.colors[s*3+0]=o.color[0],this.colors[s*3+1]=o.color[1],this.colors[s*3+2]=o.color[2];else{let f=a(s);this.colors[s*3+0]=f[0],this.colors[s*3+1]=f[1],this.colors[s*3+2]=f[2]}o.hasOwnProperty("size")?this.sizes[s]=o.size:this.sizes[s]=1,o.hasOwnProperty("outlineColor")?(this.outlineColors[s*3+0]=o.outlineColor[0],this.outlineColors[s*3+1]=o.outlineColor[1],this.outlineColors[s*3+2]=o.outlineColor[2]):(this.outlineColors[s*3+0]=255,this.outlineColors[s*3+1]=255,this.outlineColors[s*3+2]=255),o.hasOwnProperty("outlineWidth")?this.outlineWidths[s]=o.outlineWidth:this.outlineWidths[s]=0,this.intensities[s]=1;let c=new Yn(o,o.ID,s,this);this.index2Node[s]=c,this.nodes[o.ID]=c}}};import.meta.env=Pe;var kh=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(e,1e3/60)}}(),Rh=window.cancelAnimationFrame||window.mozCancelAnimationFrame;function Hn(e,t){let n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null;for(let i=0;i<n.length;++i){try{r=e.getContext(n[i],t)}catch(a){}if(r)break}return r}async function ke(e,t){let n=document.getElementById(t);if(!n)return null;let r="",i=n.firstChild;for(;i;)i.nodeType==3&&(r+=i.textContent),i=i.nextSibling;n.src&&(r=await fetch(n.src).then(s=>s.text()));let a;if(n.type=="text/glsl-fragment")a=e.createShader(e.FRAGMENT_SHADER);else if(n.type=="text/glsl-vertex")a=e.createShader(e.VERTEX_SHADER);else return null;return e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(console.log("ERROR with script: ",t),console.log(e.getShaderInfoLog(a)),null)}function Ke(e,t,n,r,i){let a=i.createProgram();if(i.attachShader(a,e),i.attachShader(a,t),i.linkProgram(a),!i.getProgramParameter(a,i.LINK_STATUS)){alert("Shader Compilation Error."+i.getProgramInfoLog(a));return}if(this.ID=a,this.uniforms=new Object,this.attributes=new Object,n)for(let s=0;s<n.length;s++)this.uniforms[n[s]]=i.getUniformLocation(this.ID,n[s]);if(this.attributes.enable=function(s){i.enableVertexAttribArray(this[s])},this.attributes.disable=function(s){i.disableVertexAttribArray(this[s])},r)for(let s=0;s<r.length;s++)this.attributes[r[s]]=i.getAttribLocation(this.ID,r[s]);this.use=function(s){s.useProgram(this.ID)}}function Wn(e,t=!0,n=!0){let r=[-1,1,0,-1,-1,0,1,1,0,1,-1,0],i=[0,0,1,0,0,1,0,0,1,0,0,1],a=[0,1,0,1,0,0,1,1,0,0,0,0],s={};return n&&(s.texCoordObject=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s.texCoordObject),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW)),t&&(s.normalObject=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s.normalObject),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)),s.vertexObject=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s.vertexObject),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),s.numIndices=4,s}function qt(e){return e*Math.PI/180}var Le={};$t(Le,{loadXNET:()=>Xn,loadXNETFile:()=>Cs});"use strict";var ms=e=>{let t=e.split(/\s/);return t.length<2?null:[+t[0],+t[1]]},bs=e=>{let t=e.split(/\s/);return t.length<3?null:[+t[0],+t[1],+t[2]]},ys=e=>isNaN(e)?0:+e,As=/#([ve]) \"(.+)\" ([sn]|v2|v3)/,ws={s:String,n:ys,v2:ms,v3:bs},xs=e=>{for(;e.lineIndex+1<e.lines.length&&e.lines[e.lineIndex].length==0;)e.lineIndex++;let n=e.lines[e.lineIndex].split(/\s/),r=0;if(n.length==0||n[0].toLowerCase()!="#vertices"||isNaN(n[1])||!Number.isInteger(+n[1]))throw`Malformed xnet data (Reading Vertices Header)[line: ${e.lineIndex}]
	> ${e.lines[e.lineIndex]}`;return r=+n[1],e.lineIndex++,r},_s=e=>{let t=[];for(;e.lineIndex<e.lines.length;){let r=e.lines[e.lineIndex],i=r.length;if(i==0){e.lineIndex++;continue}if(r[0]=="#")break;var n=r;r[0]=='"'&&r[i-1]=='"'&&(n=r.slice(1,-1)),t.push(n),e.lineIndex++}return t},Ms=e=>{for(;e.lineIndex+1<e.lines.length&&e.lines[e.lineIndex].length==0;)e.lineIndex++;let n=e.lines[e.lineIndex].split(/\s/),r=!1,i=!1;if(n.length==0||n[0].toLowerCase()!="#edges")throw`Malformed xnet data (Reading Edges Header)[line: ${e.lineIndex}]
	> ${e.lines[e.lineIndex]}`;return n.forEach(a=>{a.toLowerCase()=="weighted"&&(r=!0),a.toLowerCase()=="nonweighted"&&(r=!1),a.toLowerCase()=="directed"&&(i=!0),a.toLowerCase()=="undirected"&&(i=!1)}),e.lineIndex++,{weighted:r,directed:i}},Is=e=>{let t=[],n=[];for(;e.lineIndex<e.lines.length;){let r=e.lines[e.lineIndex];if(r.length==0){e.lineIndex++;continue}if(r[0]=="#")break;let a=r.split(/\s/),s=1;if(a.length<2)throw`Malformed xnet data (Reading Edges)[line: ${e.lineIndex}]
	> ${e.lines[e.lineIndex]}`;a.length>2&&(s=+a[2]),t.push([+a[0],+a[1]]),n.push(s),e.lineIndex++}return{edges:t,weights:n}},Es=e=>{for(;e.lineIndex+1<e.lines.length&&e.lines[e.lineIndex].length==0;)e.lineIndex++;let t=As.exec(e.lines[e.lineIndex]);if(t.length!=4)throw`Malformed xnet data [line: ${e.lineIndex}]
	> ${e.lines[e.lineIndex]}`;let n=t[1],r=t[2],i=t[3];return e.lineIndex++,{type:n,key:r,format:i}},Bs=(e,t)=>{let n=[],r=ws[t.format];for(;e.lineIndex<e.lines.length;){let i=e.lines[e.lineIndex],a=i.length;if(a==0){e.lineIndex++;continue}if(i[0]=="#")break;let s=i;s[0]=='"'&&s[a-1]=='"'&&(s=s.slice(1,-1)),n.push(r(s)),e.lineIndex++}return n},Xn=e=>{let t={lineIndex:0,lines:e.split(`
`)},n=xs(t),r=_s(t),i={nodesCount:n,verticesProperties:{},edgesProperties:{}};if(r.length>0){if(r.length<n)throw`Malformed xnet data [line: ${t.lineIndex}]
	> ${t.lines[t.lineIndex]}`;i.labels=r}let a=Ms(t);i.directed=a.directed,i.weighted=a.weighted;let s=Is(t);i.edges=s.edges,i.weighted&&(i.weights=s.weights);do{for(;t.lineIndex<t.lines.length&&t.lines[t.lineIndex].length==0;)t.lineIndex++;if(!(t.lineIndex<t.lines.length))break;let o=Es(t),c=Bs(t,o);o.type=="e"?i.edgesProperties[o.key]=c:o.type=="v"&&(i.verticesProperties[o.key]=c)}while(t.lineIndex<t.lines.length);return i};async function Cs(e){let t=await fetch(e).then(n=>n.text());return Xn(t)}var Qt="http://www.w3.org/1999/xhtml",Vn={svg:"http://www.w3.org/2000/svg",xhtml:Qt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oe(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vn.hasOwnProperty(t)?{space:Vn[t],local:e}:e}function ks(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qt&&t.documentElement.namespaceURI===Qt?t.createElement(e):t.createElementNS(n,e)}}function Rs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zn(e){var t=Oe(e);return(t.local?Rs:ks)(t)}function Ss(){}function Je(e){return e==null?Ss:function(){return this.querySelector(e)}}function Fs(e){typeof e!="function"&&(e=Je(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=new Array(s),c,f,l=0;l<s;++l)(c=a[l])&&(f=e.call(c,c.__data__,l,a))&&("__data__"in c&&(f.__data__=c.__data__),o[l]=f);return new ee(r,this._parents)}function $s(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ns(){return[]}function jt(e){return e==null?Ns:function(){return this.querySelectorAll(e)}}function zs(e){return function(){return $s(e.apply(this,arguments))}}function Ds(e){typeof e=="function"?e=zs(e):e=jt(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var s=t[a],o=s.length,c,f=0;f<o;++f)(c=s[f])&&(r.push(e.call(c,c.__data__,f,s)),i.push(c));return new ee(r,i)}function Ut(e){return function(){return this.matches(e)}}function Kn(e){return function(t){return t.matches(e)}}var Ts=Array.prototype.find;function Ps(e){return function(){return Ts.call(this.children,e)}}function Ls(){return this.firstElementChild}function Os(e){return this.select(e==null?Ls:Ps(typeof e=="function"?e:Kn(e)))}var qs=Array.prototype.filter;function Qs(){return Array.from(this.children)}function js(e){return function(){return qs.call(this.children,e)}}function Us(e){return this.selectAll(e==null?Qs:js(typeof e=="function"?e:Kn(e)))}function Gs(e){typeof e!="function"&&(e=Ut(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],c,f=0;f<s;++f)(c=a[f])&&e.call(c,c.__data__,f,a)&&o.push(c);return new ee(r,this._parents)}function Jn(e){return new Array(e.length)}function Ys(){return new ee(this._enter||this._groups.map(Jn),this._parents)}function et(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}et.prototype={constructor:et,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hs(e){return function(){return e}}function Ws(e,t,n,r,i,a){for(var s=0,o,c=t.length,f=a.length;s<f;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new et(e,a[s]);for(;s<c;++s)(o=t[s])&&(i[s]=o)}function Xs(e,t,n,r,i,a,s){var o,c,f=new Map,l=t.length,h=a.length,d=new Array(l),u;for(o=0;o<l;++o)(c=t[o])&&(d[o]=u=s.call(c,c.__data__,o,t)+"",f.has(u)?i[o]=c:f.set(u,c));for(o=0;o<h;++o)u=s.call(e,a[o],o,a)+"",(c=f.get(u))?(r[o]=c,c.__data__=a[o],f.delete(u)):n[o]=new et(e,a[o]);for(o=0;o<l;++o)(c=t[o])&&f.get(d[o])===c&&(i[o]=c)}function Vs(e){return e.__data__}function Ks(e,t){if(!arguments.length)return Array.from(this,Vs);var n=t?Xs:Ws,r=this._parents,i=this._groups;typeof e!="function"&&(e=Hs(e));for(var a=i.length,s=new Array(a),o=new Array(a),c=new Array(a),f=0;f<a;++f){var l=r[f],h=i[f],d=h.length,u=Zs(e.call(l,l&&l.__data__,f,r)),v=u.length,m=o[f]=new Array(v),p=s[f]=new Array(v),A=c[f]=new Array(d);n(l,h,m,p,A,u,t);for(var x=0,_=0,w,M;x<v;++x)if(w=m[x]){for(x>=_&&(_=x+1);!(M=p[_])&&++_<v;);w._next=M||null}}return s=new ee(s,r),s._enter=o,s._exit=c,s}function Zs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Js(){return new ee(this._exit||this._groups.map(Jn),this._parents)}function eo(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function to(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),c=0;c<s;++c)for(var f=n[c],l=r[c],h=f.length,d=o[c]=new Array(h),u,v=0;v<h;++v)(u=f[v]||l[v])&&(d[v]=u);for(;c<i;++c)o[c]=n[c];return new ee(o,this._parents)}function no(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function io(e){e||(e=ro);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,c=i[a]=new Array(o),f,l=0;l<o;++l)(f=s[l])&&(c[l]=f);c.sort(t)}return new ee(i,this._parents).order()}function ro(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ao(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function so(){return Array.from(this)}function oo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function fo(){let e=0;for(let t of this)++e;return e}function co(){return!this.node()}function lo(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function ho(e){return function(){this.removeAttribute(e)}}function uo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vo(e,t){return function(){this.setAttribute(e,t)}}function po(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function go(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bo(e,t){var n=Oe(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?uo:ho:typeof t=="function"?n.local?mo:go:n.local?po:vo)(n,t))}function er(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yo(e){return function(){this.style.removeProperty(e)}}function Ao(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wo(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xo(e,t,n){return arguments.length>1?this.each((t==null?yo:typeof t=="function"?wo:Ao)(e,t,n??"")):Ae(this.node(),e)}function Ae(e,t){return e.style.getPropertyValue(t)||er(e).getComputedStyle(e,null).getPropertyValue(t)}function _o(e){return function(){delete this[e]}}function Mo(e,t){return function(){this[e]=t}}function Io(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Eo(e,t){return arguments.length>1?this.each((t==null?_o:typeof t=="function"?Io:Mo)(e,t)):this.node()[e]}function tr(e){return e.trim().split(/^|\s+/)}function Gt(e){return e.classList||new nr(e)}function nr(e){this._node=e,this._names=tr(e.getAttribute("class")||"")}nr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rr(e,t){for(var n=Gt(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ir(e,t){for(var n=Gt(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Bo(e){return function(){rr(this,e)}}function Co(e){return function(){ir(this,e)}}function ko(e,t){return function(){(t.apply(this,arguments)?rr:ir)(this,e)}}function Ro(e,t){var n=tr(e+"");if(arguments.length<2){for(var r=Gt(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ko:t?Bo:Co)(n,t))}function So(){this.textContent=""}function Fo(e){return function(){this.textContent=e}}function $o(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function No(e){return arguments.length?this.each(e==null?So:(typeof e=="function"?$o:Fo)(e)):this.node().textContent}function zo(){this.innerHTML=""}function Do(e){return function(){this.innerHTML=e}}function To(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Po(e){return arguments.length?this.each(e==null?zo:(typeof e=="function"?To:Do)(e)):this.node().innerHTML}function Lo(){this.nextSibling&&this.parentNode.appendChild(this)}function Oo(){return this.each(Lo)}function qo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qo(){return this.each(qo)}function jo(e){var t=typeof e=="function"?e:Zn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Uo(){return null}function Go(e,t){var n=typeof e=="function"?e:Zn(e),r=t==null?Uo:typeof t=="function"?t:Je(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yo(){var e=this.parentNode;e&&e.removeChild(this)}function Ho(){return this.each(Yo)}function Wo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vo(e){return this.select(e?Xo:Wo)}function Zo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ko(e){return function(t){e.call(this,t,this.__data__)}}function Jo(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ef(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function tf(e,t,n){return function(){var r=this.__on,i,a=Ko(t);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function nf(e,t,n){var r=Jo(e+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,f=o.length,l;c<f;++c)for(i=0,l=o[c];i<a;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(o=t?tf:ef,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function ar(e,t,n){var r=er(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function rf(e,t){return function(){return ar(this,e,t)}}function af(e,t){return function(){return ar(this,e,t.apply(this,arguments))}}function sf(e,t){return this.each((typeof t=="function"?af:rf)(e,t))}function*of(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var sr=[null];function ee(e,t){this._groups=e,this._parents=t}function Re(){return new ee([[document.documentElement]],sr)}function ff(){return this}ee.prototype=Re.prototype={constructor:ee,select:Fs,selectAll:Ds,selectChild:Os,selectChildren:Us,filter:Gs,data:Ks,enter:Ys,exit:Js,join:eo,merge:to,selection:ff,order:no,sort:io,call:ao,nodes:so,node:oo,size:fo,empty:co,each:lo,attr:bo,style:xo,property:Eo,classed:Ro,text:No,html:Po,raise:Oo,lower:Qo,append:jo,insert:Go,remove:Ho,clone:Vo,datum:Zo,on:nf,dispatch:sf,[Symbol.iterator]:of};function G(e){return typeof e=="string"?new ee([[document.querySelector(e)]],[document.documentElement]):new ee([[e]],sr)}var cf={value:()=>{}};function we(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new tt(n)}function tt(e){this._=e}function lf(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}tt.prototype=we.prototype={constructor:tt,on:function(e,t){var n=this._,r=lf(e+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(e=r[a]).type)&&(i=hf(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=r[a]).type)n[i]=or(n[i],e.name,t);else if(t==null)for(i in n)n[i]=or(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function hf(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function or(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=cf,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Se=0,qe=0,Qe=0,fr=1e3,nt,je,rt=0,xe=0,it=0,Ue=typeof performance=="object"&&performance.now?performance:Date,cr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function at(){return xe||(cr(df),xe=Ue.now()+it)}function df(){xe=0}function Ge(){this._call=this._time=this._next=null}Ge.prototype=st.prototype={constructor:Ge,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?at():+n)+(t==null?0:+t),!this._next&&je!==this&&(je?je._next=this:nt=this,je=this),this._call=e,this._time=n,Yt()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Yt())}};function st(e,t,n){var r=new Ge;return r.restart(e,t,n),r}function uf(){at(),++Se;for(var e=nt,t;e;)(t=xe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Se}function lr(){xe=(rt=Ue.now())+it,Se=qe=0;try{uf()}finally{Se=0,vf(),xe=0}}function pf(){var e=Ue.now(),t=e-rt;t>fr&&(it-=t,rt=e)}function vf(){for(var e,t=nt,n,r=Infinity;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nt=n);je=e,Yt(r)}function Yt(e){if(!Se){qe&&(qe=clearTimeout(qe));var t=e-xe;t>24?(e<Infinity&&(qe=setTimeout(lr,e-Ue.now()-it)),Qe&&(Qe=clearInterval(Qe))):(Qe||(rt=Ue.now(),Qe=setInterval(pf,fr)),Se=1,cr(lr))}}function te(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ht=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wt=new RegExp(Ht.source,"g");function gf(e){return function(){return e}}function mf(e){return function(t){return e(t)+""}}function ot(e,t){var n=Ht.lastIndex=Wt.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(e=e+"",t=t+"";(r=Ht.exec(e))&&(i=Wt.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:te(r,i)})),n=Wt.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?mf(c[0].x):gf(t):(t=c.length,function(f){for(var l=0,h;l<t;++l)o[(h=c[l]).i]=h.x(f);return o.join("")})}function Ye(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ft(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _e(){}var ye=.7,Me=1/ye,Fe="\\s*([+-]?\\d+)\\s*",He="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bf=/^#([0-9a-f]{3,8})$/,yf=new RegExp("^rgb\\("+[Fe,Fe,Fe]+"\\)$"),Af=new RegExp("^rgb\\("+[oe,oe,oe]+"\\)$"),wf=new RegExp("^rgba\\("+[Fe,Fe,Fe,He]+"\\)$"),xf=new RegExp("^rgba\\("+[oe,oe,oe,He]+"\\)$"),_f=new RegExp("^hsl\\("+[He,oe,oe]+"\\)$"),Mf=new RegExp("^hsla\\("+[He,oe,oe,He]+"\\)$"),hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ye(_e,de,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHsl:If,formatRgb:ur,toString:ur});function dr(){return this.rgb().formatHex()}function If(){return vr(this).formatHsl()}function ur(){return this.rgb().formatRgb()}function de(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pr(t):n===3?new X(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ct(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ct(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yf.exec(e))?new X(t[1],t[2],t[3],1):(t=Af.exec(e))?new X(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wf.exec(e))?ct(t[1],t[2],t[3],t[4]):(t=xf.exec(e))?ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_f.exec(e))?gr(t[1],t[2]/100,t[3]/100,1):(t=Mf.exec(e))?gr(t[1],t[2]/100,t[3]/100,t[4]):hr.hasOwnProperty(e)?pr(hr[e]):e==="transparent"?new X(NaN,NaN,NaN,0):null}function pr(e){return new X(e>>16&255,e>>8&255,e&255,1)}function ct(e,t,n,r){return r<=0&&(e=t=n=NaN),new X(e,t,n,r)}function Xt(e){return e instanceof _e||(e=de(e)),e?(e=e.rgb(),new X(e.r,e.g,e.b,e.opacity)):new X}function ne(e,t,n,r){return arguments.length===1?Xt(e):new X(e,t,n,r??1)}function X(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ye(X,ne,ft(_e,{brighter:function(e){return e=e==null?Me:Math.pow(Me,e),new X(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ye:Math.pow(ye,e),new X(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mr,formatHex:mr,formatRgb:br,toString:br}));function mr(){return"#"+Vt(this.r)+Vt(this.g)+Vt(this.b)}function br(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Vt(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function gr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fe(e,t,n,r)}function vr(e){if(e instanceof fe)return new fe(e.h,e.s,e.l,e.opacity);if(e instanceof _e||(e=de(e)),!e)return new fe;if(e instanceof fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(t===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-t)/o+2:s=(t-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new fe(s,o,c,e.opacity)}function Ef(e,t,n,r){return arguments.length===1?vr(e):new fe(e,t,n,r??1)}function fe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ye(fe,Ef,ft(_e,{brighter:function(e){return e=e==null?Me:Math.pow(Me,e),new fe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ye:Math.pow(ye,e),new fe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new X(Zt(e>=240?e-240:e+120,i,r),Zt(e,i,r),Zt(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Zt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Bf(e,t,n,r,i){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*r+s*i)/6}function Cf(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],s=r>0?e[r-1]:2*i-a,o=r<t-1?e[r+2]:2*a-i;return Bf((n-r/t)*t,s,i,a,o)}}var We=e=>()=>e;function yr(e,t){return function(n){return e+n*t}}function kf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ar(e,t){var n=t-e;return n?yr(e,n>180||n<-180?n-360*Math.round(n/360):n):We(isNaN(e)?t:e)}function Rf(e){return(e=+e)==1?Ie:function(t,n){return n-t?kf(t,n,e):We(isNaN(t)?n:t)}}function Ie(e,t){var n=t-e;return n?yr(e,n):We(isNaN(e)?t:e)}var $e=function e(t){var n=Rf(t);function r(i,a){var s=n((i=ne(i)).r,(a=ne(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),f=Ie(i.opacity,a.opacity);return function(l){return i.r=s(l),i.g=o(l),i.b=c(l),i.opacity=f(l),i+""}}return r.gamma=e,r}(1);function Sf(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=ne(t[s]),r[s]=o.r||0,i[s]=o.g||0,a[s]=o.b||0;return r=e(r),i=e(i),a=e(a),o.opacity=1,function(c){return o.r=r(c),o.g=i(c),o.b=a(c),o+""}}}var wr=Sf(Cf);function Ff(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ae(e,t){if(e=Ff(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var xr={passive:!1},Ne={capture:!0,passive:!1};function lt(e){e.stopImmediatePropagation()}function Ee(e){e.preventDefault(),e.stopImmediatePropagation()}function ht(e){var t=e.document.documentElement,n=G(e).on("dragstart.drag",Ee,Ne);"onselectstart"in t?n.on("selectstart.drag",Ee,Ne):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function dt(e,t){var n=e.document.documentElement,r=G(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ee,Ne),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function _r(e,t,n){var r=new Ge;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Mr=180/Math.PI,Kt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ir(e,t,n,r,i,a){var s,o,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,c/=o),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Mr,skewX:Math.atan(c)*Mr,scaleX:s,scaleY:o}}var ut;function $f(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Kt:Ir(t.a,t.b,t.c,t.d,t.e,t.f)}function Nf(e){return e==null||(ut||(ut=document.createElementNS("http://www.w3.org/2000/svg","g")),ut.setAttribute("transform",e),!(e=ut.transform.baseVal.consolidate()))?Kt:(e=e.matrix,Ir(e.a,e.b,e.c,e.d,e.e,e.f))}function Er(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function a(f,l,h,d,u,v){if(f!==h||l!==d){var m=u.push("translate(",null,t,null,n);v.push({i:m-4,x:te(f,h)},{i:m-2,x:te(l,d)})}else(h||d)&&u.push("translate("+h+t+d+n)}function s(f,l,h,d){f!==l?(f-l>180?l+=360:l-f>180&&(f+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:te(f,l)})):l&&h.push(i(h)+"rotate("+l+r)}function o(f,l,h,d){f!==l?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:te(f,l)}):l&&h.push(i(h)+"skewX("+l+r)}function c(f,l,h,d,u,v){if(f!==h||l!==d){var m=u.push(i(u)+"scale(",null,",",null,")");v.push({i:m-4,x:te(f,h)},{i:m-2,x:te(l,d)})}else(h!==1||d!==1)&&u.push(i(u)+"scale("+h+","+d+")")}return function(f,l){var h=[],d=[];return f=e(f),l=e(l),a(f.translateX,f.translateY,l.translateX,l.translateY,h,d),s(f.rotate,l.rotate,h,d),o(f.skewX,l.skewX,h,d),c(f.scaleX,f.scaleY,l.scaleX,l.scaleY,h,d),f=l=null,function(u){for(var v=-1,m=d.length,p;++v<m;)h[(p=d[v]).i]=p.x(u);return h.join("")}}}var zf=Er($f,"px, ","px)","deg)"),Df=Er(Nf,", ",")",")"),Tf=1e-12;function Br(e){return((e=Math.exp(e))+1/e)/2}function Pf(e){return((e=Math.exp(e))-1/e)/2}function Lf(e){return((e=Math.exp(2*e))-1)/(e+1)}var Of=function e(t,n,r){function i(a,s){var o=a[0],c=a[1],f=a[2],l=s[0],h=s[1],d=s[2],u=l-o,v=h-c,m=u*u+v*v,p,A;if(m<Tf)A=Math.log(d/f)/t,p=function(F){return[o+F*u,c+F*v,f*Math.exp(t*F*A)]};else{var x=Math.sqrt(m),_=(d*d-f*f+r*m)/(2*f*n*x),w=(d*d-f*f-r*m)/(2*d*n*x),M=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);A=(E-M)/t,p=function(F){var R=F*A,$=Br(M),N=f/(n*x)*($*Lf(t*R+M)-Pf(M));return[o+N*u,c+N*v,f*$/Br(t*R+M)]}}return p.duration=A*1e3*t/Math.SQRT2,p}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,c=o*o;return e(s,o,c)},i}(Math.SQRT2,2,4),qf=we("start","end","cancel","interrupt"),Qf=[],Cr=0,kr=1,Jt=2,vt=3,Rr=4,en=5,pt=6;function gt(e,t,n,r,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;jf(e,n,{name:t,index:r,group:i,on:qf,tween:Qf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Cr})}function tn(e,t){var n=se(e,t);if(n.state>Cr)throw new Error("too late; already scheduled");return n}function ce(e,t){var n=se(e,t);if(n.state>vt)throw new Error("too late; already running");return n}function se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=st(a,0,n.time);function a(f){n.state=kr,n.timer.restart(s,n.delay,n.time),n.delay<=f&&s(f-n.delay)}function s(f){var l,h,d,u;if(n.state!==kr)return c();for(l in r)if(u=r[l],u.name===n.name){if(u.state===vt)return _r(s);u.state===Rr?(u.state=pt,u.timer.stop(),u.on.call("interrupt",e,e.__data__,u.index,u.group),delete r[l]):+l<t&&(u.state=pt,u.timer.stop(),u.on.call("cancel",e,e.__data__,u.index,u.group),delete r[l])}if(_r(function(){n.state===vt&&(n.state=Rr,n.timer.restart(o,n.delay,n.time),o(f))}),n.state=Jt,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jt){for(n.state=vt,i=new Array(d=n.tween.length),l=0,h=-1;l<d;++l)(u=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=u);i.length=h+1}}function o(f){for(var l=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=en,1),h=-1,d=i.length;++h<d;)i[h].call(e,l);n.state===en&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=pt,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function mt(e,t){var n=e.__transition,r,i,a=!0,s;if(!!n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){a=!1;continue}i=r.state>Jt&&r.state<en,r.state=pt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}a&&delete e.__transition}}function Uf(e){return this.each(function(){mt(this,e)})}function Gf(e,t){var n,r;return function(){var i=ce(this,e),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Yf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ce(this,e),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:t,value:n},c=0,f=i.length;c<f;++c)if(i[c].name===t){i[c]=o;break}c===f&&i.push(o)}a.tween=i}}function Hf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=se(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Gf:Yf)(n,e,t))}function nn(e,t,n){var r=e._id;return e.each(function(){var i=ce(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return se(i,r).value[t]}}function Sr(e,t){var n;return(typeof t=="number"?te:t instanceof de?$e:(n=de(t))?(t=n,$e):ot)(e,t)}function Wf(e){return function(){this.removeAttribute(e)}}function Xf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vf(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===r?a:a=t(r=s,n)}}function Zf(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?a:a=t(r=s,n)}}function Kf(e,t,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=t(r=s,o)))}}function Jf(e,t,n){var r,i,a;return function(){var s,o=n(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=o+"",s===c?null:s===r&&c===i?a:(i=c,a=t(r=s,o)))}}function e1(e,t){var n=Oe(e),r=n==="transform"?Df:Sr;return this.attrTween(e,typeof t=="function"?(n.local?Jf:Kf)(n,r,nn(this,"attr."+e,t)):t==null?(n.local?Xf:Wf)(n):(n.local?Zf:Vf)(n,r,t))}function t1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function n1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function r1(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&n1(e,a)),n}return i._value=t,i}function i1(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&t1(e,a)),n}return i._value=t,i}function a1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Oe(e);return this.tween(n,(r.local?r1:i1)(r,t))}function s1(e,t){return function(){tn(this,e).delay=+t.apply(this,arguments)}}function o1(e,t){return t=+t,function(){tn(this,e).delay=t}}function f1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?s1:o1)(t,e)):se(this.node(),t).delay}function c1(e,t){return function(){ce(this,e).duration=+t.apply(this,arguments)}}function l1(e,t){return t=+t,function(){ce(this,e).duration=t}}function h1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?c1:l1)(t,e)):se(this.node(),t).duration}function d1(e,t){if(typeof t!="function")throw new Error;return function(){ce(this,e).ease=t}}function u1(e){var t=this._id;return arguments.length?this.each(d1(t,e)):se(this.node(),t).ease}function v1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ce(this,e).ease=n}}function p1(e){if(typeof e!="function")throw new Error;return this.each(v1(this._id,e))}function g1(e){typeof e!="function"&&(e=Ut(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],c,f=0;f<s;++f)(c=a[f])&&e.call(c,c.__data__,f,a)&&o.push(c);return new ue(r,this._parents,this._name,this._id)}function m1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var c=t[o],f=n[o],l=c.length,h=s[o]=new Array(l),d,u=0;u<l;++u)(d=c[u]||f[u])&&(h[u]=d);for(;o<r;++o)s[o]=t[o];return new ue(s,this._parents,this._name,this._id)}function b1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function y1(e,t,n){var r,i,a=b1(t)?tn:ce;return function(){var s=a(this,e),o=s.on;o!==r&&(i=(r=o).copy()).on(t,n),s.on=i}}function A1(e,t){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(e):this.each(y1(n,e,t))}function w1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function x1(){return this.on("end.remove",w1(this._id))}function _1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Je(e));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],c=o.length,f=a[s]=new Array(c),l,h,d=0;d<c;++d)(l=o[d])&&(h=e.call(l,l.__data__,d,o))&&("__data__"in l&&(h.__data__=l.__data__),f[d]=h,gt(f[d],t,n,d,f,se(l,n)));return new ue(a,this._parents,t,n)}function M1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jt(e));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var c=r[o],f=c.length,l,h=0;h<f;++h)if(l=c[h]){for(var d=e.call(l,l.__data__,h,c),u,v=se(l,n),m=0,p=d.length;m<p;++m)(u=d[m])&&gt(u,t,n,m,d,v);a.push(d),s.push(l)}return new ue(a,s,t,n)}var I1=Re.prototype.constructor;function E1(){return new I1(this._groups,this._parents)}function B1(e,t){var n,r,i;return function(){var a=Ae(this,e),s=(this.style.removeProperty(e),Ae(this,e));return a===s?null:a===n&&s===r?i:i=t(n=a,r=s)}}function Fr(e){return function(){this.style.removeProperty(e)}}function C1(e,t,n){var r,i=n+"",a;return function(){var s=Ae(this,e);return s===i?null:s===r?a:a=t(r=s,n)}}function k1(e,t,n){var r,i,a;return function(){var s=Ae(this,e),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),Ae(this,e))),s===c?null:s===r&&c===i?a:(i=c,a=t(r=s,o))}}function R1(e,t){var n,r,i,a="style."+t,s="end."+a,o;return function(){var c=ce(this,e),f=c.on,l=c.value[a]==null?o||(o=Fr(t)):void 0;(f!==n||i!==l)&&(r=(n=f).copy()).on(s,i=l),c.on=r}}function S1(e,t,n){var r=(e+="")==="transform"?zf:Sr;return t==null?this.styleTween(e,B1(e,r)).on("end.style."+e,Fr(e)):typeof t=="function"?this.styleTween(e,k1(e,r,nn(this,"style."+e,t))).each(R1(this._id,e)):this.styleTween(e,C1(e,r,t),n).on("end.style."+e,null)}function F1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function $1(e,t,n){var r,i;function a(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&F1(e,s,n)),r}return a._value=t,a}function N1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,$1(e,t,n??""))}function z1(e){return function(){this.textContent=e}}function D1(e){return function(){var t=e(this);this.textContent=t??""}}function T1(e){return this.tween("text",typeof e=="function"?D1(nn(this,"text",e)):z1(e==null?"":e+""))}function P1(e){return function(t){this.textContent=e.call(this,t)}}function L1(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&P1(i)),t}return r._value=e,r}function O1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,L1(e))}function q1(){for(var e=this._name,t=this._id,n=$r(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,f=0;f<o;++f)if(c=s[f]){var l=se(c,t);gt(c,e,n,f,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ue(r,this._parents,e,n)}function Q1(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},c={value:function(){--i==0&&a()}};n.each(function(){var f=ce(this,r),l=f.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),f.on=t}),i===0&&a()})}var j1=0;function ue(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $r(){return++j1}var ve=Re.prototype;ue.prototype={constructor:ue,select:_1,selectAll:M1,selectChild:ve.selectChild,selectChildren:ve.selectChildren,filter:g1,merge:m1,selection:E1,transition:q1,call:ve.call,nodes:ve.nodes,node:ve.node,size:ve.size,empty:ve.empty,each:ve.each,on:A1,attr:e1,attrTween:a1,style:S1,styleTween:N1,text:T1,textTween:O1,remove:x1,tween:Hf,delay:f1,duration:h1,ease:u1,easeVarying:p1,end:Q1,[Symbol.iterator]:ve[Symbol.iterator]};function U1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var G1={time:null,delay:0,duration:250,ease:U1};function Y1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function H1(e){var t,n;e instanceof ue?(t=e._id,e=e._name):(t=$r(),(n=G1).time=at(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,c,f=0;f<o;++f)(c=s[f])&&gt(c,e,t,f,s,n||Y1(c,t));return new ue(r,this._parents,e,t)}Re.prototype.interrupt=Uf;Re.prototype.transition=H1;var bt=e=>()=>e;function W1(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function pe(e,t,n){this.k=e,this.x=t,this.y=n}pe.prototype={constructor:pe,scale:function(e){return e===1?this:new pe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new pe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rn=new pe(1,0,0);X1.prototype=pe.prototype;function X1(e){for(;!e.__zoom;)if(!(e=e.parentNode))return rn;return e.__zoom}function an(e){e.stopImmediatePropagation()}function Xe(e){e.preventDefault(),e.stopImmediatePropagation()}function V1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Z1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Nr(){return this.__zoom||rn}function K1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function J1(){return navigator.maxTouchPoints||"ontouchstart"in this}function ec(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function zr(){var e=V1,t=Z1,n=ec,r=K1,i=J1,a=[0,Infinity],s=[[-Infinity,-Infinity],[Infinity,Infinity]],o=250,c=Of,f=we("start","zoom","end"),l,h,d,u=500,v=150,m=0,p=10;function A(b){b.property("__zoom",Nr).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",N).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(b,g,y,I){var C=b.selection?b.selection():b;C.property("__zoom",Nr),b!==C?M(b,g,y,I):C.interrupt().each(function(){E(this,arguments).event(I).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},A.scaleBy=function(b,g,y,I){A.scaleTo(b,function(){var C=this.__zoom.k,k=typeof g=="function"?g.apply(this,arguments):g;return C*k},y,I)},A.scaleTo=function(b,g,y,I){A.transform(b,function(){var C=t.apply(this,arguments),k=this.__zoom,z=y==null?w(C):typeof y=="function"?y.apply(this,arguments):y,D=k.invert(z),P=typeof g=="function"?g.apply(this,arguments):g;return n(_(x(k,P),z,D),C,s)},y,I)},A.translateBy=function(b,g,y,I){A.transform(b,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof y=="function"?y.apply(this,arguments):y),t.apply(this,arguments),s)},null,I)},A.translateTo=function(b,g,y,I,C){A.transform(b,function(){var k=t.apply(this,arguments),z=this.__zoom,D=I==null?w(k):typeof I=="function"?I.apply(this,arguments):I;return n(rn.translate(D[0],D[1]).scale(z.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof y=="function"?-y.apply(this,arguments):-y),k,s)},I,C)};function x(b,g){return g=Math.max(a[0],Math.min(a[1],g)),g===b.k?b:new pe(g,b.x,b.y)}function _(b,g,y){var I=g[0]-y[0]*b.k,C=g[1]-y[1]*b.k;return I===b.x&&C===b.y?b:new pe(b.k,I,C)}function w(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function M(b,g,y,I){b.on("start.zoom",function(){E(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(I).end()}).tween("zoom",function(){var C=this,k=arguments,z=E(C,k).event(I),D=t.apply(C,k),P=y==null?w(D):typeof y=="function"?y.apply(C,k):y,O=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),q=C.__zoom,H=typeof g=="function"?g.apply(C,k):g,re=c(q.invert(P).concat(O/q.k),H.invert(P).concat(O/H.k));return function(ie){if(ie===1)ie=H;else{var he=re(ie),Ft=O/he[2];ie=new pe(Ft,P[0]-he[0]*Ft,P[1]-he[1]*Ft)}z.zoom(null,ie)}})}function E(b,g,y){return!y&&b.__zooming||new F(b,g)}function F(b,g){this.that=b,this.args=g,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,g),this.taps=0}F.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active==1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,g){return this.mouse&&b!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active==0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var g=G(this.that).datum();f.call(b,this.that,new W1(b,{sourceEvent:this.sourceEvent,target:A,type:b,transform:this.that.__zoom,dispatch:f}),g)}};function R(b,...g){if(!e.apply(this,arguments))return;var y=E(this,g).event(b),I=this.__zoom,C=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,r.apply(this,arguments)))),k=ae(b);if(y.wheel)(y.mouse[0][0]!==k[0]||y.mouse[0][1]!==k[1])&&(y.mouse[1]=I.invert(y.mouse[0]=k)),clearTimeout(y.wheel);else{if(I.k===C)return;y.mouse=[k,I.invert(k)],mt(this),y.start()}Xe(b),y.wheel=setTimeout(z,v),y.zoom("mouse",n(_(x(I,C),y.mouse[0],y.mouse[1]),y.extent,s));function z(){y.wheel=null,y.end()}}function $(b,...g){if(d||!e.apply(this,arguments))return;var y=b.currentTarget,I=E(this,g,!0).event(b),C=G(b.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",O,!0),k=ae(b,y),z=b.clientX,D=b.clientY;ht(b.view),an(b),I.mouse=[k,this.__zoom.invert(k)],mt(this),I.start();function P(q){if(Xe(q),!I.moved){var H=q.clientX-z,re=q.clientY-D;I.moved=H*H+re*re>m}I.event(q).zoom("mouse",n(_(I.that.__zoom,I.mouse[0]=ae(q,y),I.mouse[1]),I.extent,s))}function O(q){C.on("mousemove.zoom mouseup.zoom",null),dt(q.view,I.moved),Xe(q),I.event(q).end()}}function N(b,...g){if(!!e.apply(this,arguments)){var y=this.__zoom,I=ae(b.changedTouches?b.changedTouches[0]:b,this),C=y.invert(I),k=y.k*(b.shiftKey?.5:2),z=n(_(x(y,k),I,C),t.apply(this,g),s);Xe(b),o>0?G(this).transition().duration(o).call(M,z,I,b):G(this).call(A.transform,z,I,b)}}function S(b,...g){if(!!e.apply(this,arguments)){var y=b.touches,I=y.length,C=E(this,g,b.changedTouches.length===I).event(b),k,z,D,P;for(an(b),z=0;z<I;++z)D=y[z],P=ae(D,this),P=[P,this.__zoom.invert(P),D.identifier],C.touch0?!C.touch1&&C.touch0[2]!==P[2]&&(C.touch1=P,C.taps=0):(C.touch0=P,k=!0,C.taps=1+!!l);l&&(l=clearTimeout(l)),k&&(C.taps<2&&(h=P[0],l=setTimeout(function(){l=null},u)),mt(this),C.start())}}function T(b,...g){if(!!this.__zooming){var y=E(this,g).event(b),I=b.changedTouches,C=I.length,k,z,D,P;for(Xe(b),k=0;k<C;++k)z=I[k],D=ae(z,this),y.touch0&&y.touch0[2]===z.identifier?y.touch0[0]=D:y.touch1&&y.touch1[2]===z.identifier&&(y.touch1[0]=D);if(z=y.that.__zoom,y.touch1){var O=y.touch0[0],q=y.touch0[1],H=y.touch1[0],re=y.touch1[1],ie=(ie=H[0]-O[0])*ie+(ie=H[1]-O[1])*ie,he=(he=re[0]-q[0])*he+(he=re[1]-q[1])*he;z=x(z,Math.sqrt(ie/he)),D=[(O[0]+H[0])/2,(O[1]+H[1])/2],P=[(q[0]+re[0])/2,(q[1]+re[1])/2]}else if(y.touch0)D=y.touch0[0],P=y.touch0[1];else return;y.zoom("touch",n(_(z,D,P),y.extent,s))}}function B(b,...g){if(!!this.__zooming){var y=E(this,g).event(b),I=b.changedTouches,C=I.length,k,z;for(an(b),d&&clearTimeout(d),d=setTimeout(function(){d=null},u),k=0;k<C;++k)z=I[k],y.touch0&&y.touch0[2]===z.identifier?delete y.touch0:y.touch1&&y.touch1[2]===z.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(z=ae(z,this),Math.hypot(h[0]-z[0],h[1]-z[1])<p)){var D=G(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return A.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:bt(+b),A):r},A.filter=function(b){return arguments.length?(e=typeof b=="function"?b:bt(!!b),A):e},A.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:bt(!!b),A):i},A.extent=function(b){return arguments.length?(t=typeof b=="function"?b:bt([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),A):t},A.scaleExtent=function(b){return arguments.length?(a[0]=+b[0],a[1]=+b[1],A):[a[0],a[1]]},A.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],A):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},A.constrain=function(b){return arguments.length?(n=b,A):n},A.duration=function(b){return arguments.length?(o=+b,A):o},A.interpolate=function(b){return arguments.length?(c=b,A):c},A.on=function(){var b=f.on.apply(f,arguments);return b===f?A:b},A.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,A):Math.sqrt(m)},A.tapDistance=function(b){return arguments.length?(p=+b,A):p},A}var yt=e=>()=>e;function sn(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:c,dy:f,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:l}})}sn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function tc(e){return!e.ctrlKey&&!e.button}function nc(){return this.parentNode}function rc(e,t){return t??{x:e.x,y:e.y}}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dr(){var e=tc,t=nc,n=rc,r=ic,i={},a=we("start","drag","end"),s=0,o,c,f,l,h=0;function d(w){w.on("mousedown.drag",u).filter(r).on("touchstart.drag",p).on("touchmove.drag",A,xr).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(w,M){if(!(l||!e.call(this,w,M))){var E=_(this,t.call(this,w,M),w,M,"mouse");!E||(G(w.view).on("mousemove.drag",v,Ne).on("mouseup.drag",m,Ne),ht(w.view),lt(w),f=!1,o=w.clientX,c=w.clientY,E("start",w))}}function v(w){if(Ee(w),!f){var M=w.clientX-o,E=w.clientY-c;f=M*M+E*E>h}i.mouse("drag",w)}function m(w){G(w.view).on("mousemove.drag mouseup.drag",null),dt(w.view,f),Ee(w),i.mouse("end",w)}function p(w,M){if(!!e.call(this,w,M)){var E=w.changedTouches,F=t.call(this,w,M),R=E.length,$,N;for($=0;$<R;++$)(N=_(this,F,w,M,E[$].identifier,E[$]))&&(lt(w),N("start",w,E[$]))}}function A(w){var M=w.changedTouches,E=M.length,F,R;for(F=0;F<E;++F)(R=i[M[F].identifier])&&(Ee(w),R("drag",w,M[F]))}function x(w){var M=w.changedTouches,E=M.length,F,R;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),F=0;F<E;++F)(R=i[M[F].identifier])&&(lt(w),R("end",w,M[F]))}function _(w,M,E,F,R,$){var N=a.copy(),S=ae($||E,M),T,B,b;if((b=n.call(w,new sn("beforestart",{sourceEvent:E,target:d,identifier:R,active:s,x:S[0],y:S[1],dx:0,dy:0,dispatch:N}),F))!=null)return T=b.x-S[0]||0,B=b.y-S[1]||0,function g(y,I,C){var k=S,z;switch(y){case"start":i[R]=g,z=s++;break;case"end":delete i[R],--s;case"drag":S=ae(C||I,M),z=s;break}N.call(y,w,new sn(y,{sourceEvent:I,subject:b,target:d,identifier:R,active:z,x:S[0]+T,y:S[1]+B,dx:S[0]-k[0],dy:S[1]-k[1],dispatch:N}),F)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:yt(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:yt(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:yt(w),d):n},d.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:yt(!!w),d):r},d.on=function(){var w=a.on.apply(a,arguments);return w===a?d:w},d.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,d):Math.sqrt(h)},d}var At=function(t){sc(t);var n=ac(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function ac(e){var t=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var a=t[n];return a||(a=t[n]=[]),a.push({callback:r,ctx:i}),e},off:function(n,r){var i=typeof n=="undefined";if(i)return t=Object.create(null),e;if(t[n]){var a=typeof r!="function";if(a)delete t[n];else for(var s=t[n],o=0;o<s.length;++o)s[o].callback===r&&s.splice(o,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var a=0;a<r.length;++a){var s=r[a];s.callback.apply(s.ctx,i)}return e}}}function sc(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}function wt(e,t,n){return n={path:t,exports:{},require:function(r,i){return ze(r,i??n.path)}},e(n,n.exports),n.exports}function ze(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var ge=function(t){return t===0?"x":t===1?"y":t===2?"z":"c"+(t+1)},me=function(t){return n;function n(r,i){let a=i&&i.indent||0,s=i&&i.join!==void 0?i.join:`
`,o=Array(a+1).join(" "),c=[];for(let f=0;f<t;++f){let l=ge(f),h=f===0?"":o;c.push(h+r.replace(/{var}/g,l))}return c.join(s)}},xt=oc,fc=Tr,cc=Pr,lc=Lr;function oc(e,t){let n=Tr(e,t),{Body:r}=new Function(n)();return r}function Tr(e,t){return`
${Pr(e,t)}
${Lr(e)}
return {Body: Body, Vector: Vector};
`}function Lr(e){let t=me(e),n=t("{var}",{join:", "});return`
function Body(${n}) {
  this.isPinned = false;
  this.pos = new Vector(${n});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${n}) {
  ${t("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function Pr(e,t){let n=me(e),r="";return t&&(r=`${n(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${n("{var}",{join:", "})}) {
  ${r}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${n("this.{var} = v.{var};",{indent:4})}
    } else {
      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${n("this.{var} = ",{join:""})}0;
  };`}xt.generateCreateBodyFunctionBody=fc;xt.getVectorCode=cc;xt.getBodyCode=lc;var Be=hc,dc=Or,uc=qr,vc=Qr,pc=jr,gc=Ur,mc=Gr;function hc(e){let t=Or(e);return new Function(t)()}function Or(e){let t=me(e),n=Math.pow(2,e);return`
${qr()}
${Qr(e)}
${jr(e)}
${Ur(e)}
${Gr(e)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${s("      node.")}
      node.body = null;
      node.mass = ${t("node.mass_{var} = ",{join:""})}0;
      ${t("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${t("var d{var};",{indent:4})}
    var r; 
    ${t("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${t("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${t("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${t("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${ge(0)} - node.min_${ge(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${t("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${a()}
        }
      }
    }

    ${t("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${t("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${t("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${t("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${t("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${t("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${t("root.min_{var} = {var}min;",{indent:4})}
    ${t("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${t("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${t("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${t("var min_{var} = node.min_{var};",{indent:8})}
        ${t("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${i(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${t("child.min_{var} = min_{var};",{indent:10})}
          ${t("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${t("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${t("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function i(o){let c=[],f=Array(o+1).join(" ");for(let l=0;l<e;++l)c.push(f+`if (${ge(l)} > max_${ge(l)}) {`),c.push(f+`  quadIdx = quadIdx + ${Math.pow(2,l)};`),c.push(f+`  min_${ge(l)} = max_${ge(l)};`),c.push(f+`  max_${ge(l)} = node.max_${ge(l)};`),c.push(f+"}");return c.join(`
`)}function a(){let o=Array(11).join(" "),c=[];for(let f=0;f<n;++f)c.push(o+`if (node.quad${f}) {`),c.push(o+`  queue[pushIdx] = node.quad${f};`),c.push(o+"  queueLength += 1;"),c.push(o+"  pushIdx += 1;"),c.push(o+"}");return c.join(`
`)}function s(o){let c=[];for(let f=0;f<n;++f)c.push(`${o}quad${f} = null;`);return c.join(`
`)}}function jr(e){let t=me(e);return`
  function isSamePosition(point1, point2) {
    ${t("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${t("d{var} < 1e-8",{join:" && "})};
  }  
`}function Gr(e){var t=Math.pow(2,e);return`
function setChild(node, idx, child) {
  ${n()}
}`;function n(){let r=[];for(let i=0;i<t;++i){let a=i===0?"  ":"  else ";r.push(`${a}if (idx === ${i}) node.quad${i} = child;`)}return r.join(`
`)}}function Ur(e){return`function getChild(node, idx) {
${t()}
  return null;
}`;function t(){let n=[],r=Math.pow(2,e);for(let i=0;i<r;++i)n.push(`  if (idx === ${i}) return node.quad${i};`);return n.join(`
`)}}function Qr(e){let t=me(e),n=Math.pow(2,e);var r=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${i("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${t("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${t("this.min_{var} = 0;",{indent:2})}
  ${t("this.max_{var} = 0;",{indent:2})}
}
`;return r;function i(a){let s=[];for(let o=0;o<n;++o)s.push(`${a}quad${o} = null;`);return s.join(`
`)}}function qr(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}Be.generateQuadTreeFunctionBody=dc;Be.getInsertStackCode=uc;Be.getQuadNodeCode=vc;Be.isSamePosition=pc;Be.getChildBodyCode=gc;Be.setChildBodyCode=mc;var Yr=bc,yc=Hr;function bc(e){let t=Hr(e);return new Function("bodies","settings","random",t)}function Hr(e){let t=me(e);return`
  var boundingBox = {
    ${t("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${t("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${t("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${t("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${t("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${t("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${t("var max_{var} = -Infinity;",{indent:4})}
    ${t("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${t("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${t("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${t("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${t("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${t("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}Yr.generateFunctionBody=yc;var Wr=Ac,wc=Xr;function Ac(e){let t=Xr(e);return new Function("options",t)}function Xr(e){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${me(e)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}Wr.generateCreateDragForceFunctionBody=wc;var Vr=xc,_c=Zr;function xc(e){let t=Zr(e);return new Function("options","random",t)}function Zr(e){let t=me(e);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${t("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${t("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${t("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}Vr.generateCreateSpringForceFunctionBody=_c;var Kr=Mc,Ic=Jr;function Mc(e){let t=Jr(e);return new Function("bodies","timeStep","adaptiveTimeStepWeight",t)}function Jr(e){let t=me(e);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${t("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${t("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${t("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${t("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${t("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${t("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${t("body.pos.{var} += d{var};",{indent:4})}

    ${t("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${t("t{var} * t{var}",{join:" + "})})/length;
`}Kr.generateIntegratorFunctionBody=Ic;var Bc=Ec;function Ec(e,t,n,r){this.from=e,this.to=t,this.length=n,this.coefficient=r}var Cc=e0;function e0(e,t){var n;if(e||(e={}),t){for(n in t)if(t.hasOwnProperty(n)){var r=e.hasOwnProperty(n),i=typeof t[n],a=!r||typeof e[n]!==i;a?e[n]=t[n]:i==="object"&&(e[n]=e0(e[n],t[n]))}}return e}var kc=wt(function(e){e.exports=t,e.exports.random=t,e.exports.randomIterator=c;function t(f){var l=typeof f=="number"?f:+new Date;return new n(l)}function n(f){this.seed=f}n.prototype.next=o,n.prototype.nextDouble=s,n.prototype.uniform=s,n.prototype.gaussian=r;function r(){var f,l,h;do l=this.nextDouble()*2-1,h=this.nextDouble()*2-1,f=l*l+h*h;while(f>=1||f===0);return l*Math.sqrt(-2*Math.log(f)/f)}n.prototype.levy=i;function i(){var f=3/2,l=Math.pow(a(1+f)*Math.sin(Math.PI*f/2)/(a((1+f)/2)*f*Math.pow(2,(f-1)/2)),1/f);return this.gaussian()*l/Math.pow(Math.abs(this.gaussian()),1/f)}function a(f){return Math.sqrt(2*Math.PI/f)*Math.pow(1/Math.E*(f+1/(12*f-1/(10*f))),f)}function s(){var f=this.seed;return f=f+2127912214+(f<<12)&4294967295,f=(f^3345072700^f>>>19)&4294967295,f=f+374761393+(f<<5)&4294967295,f=(f+3550635116^f<<9)&4294967295,f=f+4251993797+(f<<3)&4294967295,f=(f^3042594569^f>>>16)&4294967295,this.seed=f,(f&268435455)/268435456}function o(f){return Math.floor(this.nextDouble()*f)}function c(f,l){var h=l||t();if(typeof h.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:u,shuffle:d};function d(){var v,m,p;for(v=f.length-1;v>0;--v)m=h.next(v+1),p=f[m],f[m]=f[v],f[v]=p;return f}function u(v){var m,p,A;for(m=f.length-1;m>0;--m)p=h.next(m+1),A=f[p],f[p]=f[m],f[m]=A,v(A);f.length&&v(f[0])}}}),t0=Rc,n0={};function Rc(e){var t=Bc,n=Cc,r=At;if(e){if(e.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(e.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}e=n(e,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var i=n0[e.dimensions];if(!i){var a=e.dimensions;i={Body:xt(a,e.debug),createQuadTree:Be(a),createBounds:Yr(a),createDragForce:Wr(a),createSpringForce:Vr(a),integrate:Kr(a)},n0[a]=i}var s=i.Body,o=i.createQuadTree,c=i.createBounds,f=i.createDragForce,l=i.createSpringForce,h=i.integrate,d=g=>new s(g),u=kc.random(42),v=[],m=[],p=o(e,u),A=c(v,e,u),x=l(e,u),_=f(e),w=0,M=[],E=new Map,F=0;N("nbody",B),N("spring",b);var R={bodies:v,quadTree:p,springs:m,settings:e,addForce:N,removeForce:S,getForces:T,step:function(){for(var g=0;g<M.length;++g)M[g](F);var y=h(v,e.timeStep,e.adaptiveTimeStepWeight);return F+=1,y},addBody:function(g){if(!g)throw new Error("Body is required");return v.push(g),g},addBodyAt:function(g){if(!g)throw new Error("Body position is required");var y=d(g);return v.push(y),y},removeBody:function(g){if(!!g){var y=v.indexOf(g);if(!(y<0))return v.splice(y,1),v.length===0&&A.reset(),!0}},addSpring:function(g,y,I,C){if(!g||!y)throw new Error("Cannot add null spring to force simulator");typeof I!="number"&&(I=-1);var k=new t(g,y,I,C>=0?C:-1);return m.push(k),k},getTotalMovement:function(){return w},removeSpring:function(g){if(!!g){var y=m.indexOf(g);if(y>-1)return m.splice(y,1),!0}},getBestNewBodyPosition:function(g){return A.getBestNewPosition(g)},getBBox:$,getBoundingBox:$,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(g){return g!==void 0?(e.gravity=g,p.options({gravity:g}),this):e.gravity},theta:function(g){return g!==void 0?(e.theta=g,p.options({theta:g}),this):e.theta},random:u};return Sc(e,R),r(R),R;function $(){return A.update(),A.box}function N(g,y){if(E.has(g))throw new Error("Force "+g+" is already added");E.set(g,y),M.push(y)}function S(g){var y=M.indexOf(E.get(g));y<0||(M.splice(y,1),E.delete(g))}function T(){return E}function B(){if(v.length!==0){p.insertBodies(v);for(var g=v.length;g--;){var y=v[g];y.isPinned||(y.reset(),p.updateBodyForce(y),_.update(y))}}}function b(){for(var g=m.length;g--;)x.update(m[g])}}function Sc(e,t){for(var n in e)Fc(e,t,n)}function Fc(e,t,n){if(!!e.hasOwnProperty(n)&&typeof t[n]!="function"){var r=Number.isFinite(e[n]);r?t[n]=function(i){if(i!==void 0){if(!Number.isFinite(i))throw new Error("Value of "+n+" should be a valid number.");return e[n]=i,t}return e[n]}:t[n]=function(i){return i!==void 0?(e[n]=i,t):e[n]}}}var Nc=$c,zc=t0;function $c(e,t){if(!e)throw new Error("Graph structure cannot be undefined");var n=t&&t.createSimulator||t0,r=n(t);if(Array.isArray(t))throw new Error("Physics settings is expected to be an object");var i=T;t&&typeof t.nodeMass=="function"&&(i=t.nodeMass);var a=new Map,s={},o=0,c=r.settings.springTransform||Dc;_(),p();var f=!1,l={step:function(){if(o===0)return h(!0),!0;var B=r.step();l.lastMove=B,l.fire("step");var b=B/o,g=b<=.01;return h(g),g},getNodePosition:function(B){return S(B).pos},setNodePosition:function(B){var b=S(B);b.setPosition.apply(b,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(B){var b=s[B];if(b)return{from:b.from.pos,to:b.to.pos}},getGraphRect:function(){return r.getBBox()},forEachBody:d,pinNode:function(B,b){var g=S(B.id);g.isPinned=!!b},isNodePinned:function(B){return S(B.id).isPinned},dispose:function(){e.off("changed",x),l.fire("disposed")},getBody:m,getSpring:v,getForceVectorLength:u,simulator:r,graph:e,lastMove:0};return At(l),l;function h(B){f!==B&&(f=B,A(B))}function d(B){a.forEach(B)}function u(){var B=0,b=0;return d(function(g){B+=Math.abs(g.force.x),b+=Math.abs(g.force.y)}),Math.sqrt(B*B+b*b)}function v(B,b){var g;if(b===void 0)typeof B!="object"?g=B:g=B.id;else{var y=e.hasLink(B,b);if(!y)return;g=y.id}return s[g]}function m(B){return a.get(B)}function p(){e.on("changed",x)}function A(B){l.fire("stable",B)}function x(B){for(var b=0;b<B.length;++b){var g=B[b];g.changeType==="add"?(g.node&&w(g.node.id),g.link&&E(g.link)):g.changeType==="remove"&&(g.node&&M(g.node),g.link&&F(g.link))}o=e.getNodesCount()}function _(){o=0,e.forEachNode(function(B){w(B.id),o+=1}),e.forEachLink(E)}function w(B){var b=a.get(B);if(!b){var g=e.getNode(B);if(!g)throw new Error("initBody() was called with unknown node id");var y=g.position;if(!y){var I=R(g);y=r.getBestNewBodyPosition(I)}b=r.addBodyAt(y),b.id=B,a.set(B,b),$(B),N(g)&&(b.isPinned=!0)}}function M(B){var b=B.id,g=a.get(b);g&&(a.delete(b),r.removeBody(g))}function E(B){$(B.fromId),$(B.toId);var b=a.get(B.fromId),g=a.get(B.toId),y=r.addSpring(b,g,B.length);c(B,y),s[B.id]=y}function F(B){var b=s[B.id];if(b){var g=e.getNode(B.fromId),y=e.getNode(B.toId);g&&$(g.id),y&&$(y.id),delete s[B.id],r.removeSpring(b)}}function R(B){var b=[];if(!B.links)return b;for(var g=Math.min(B.links.length,2),y=0;y<g;++y){var I=B.links[y],C=I.fromId!==B.id?a.get(I.fromId):a.get(I.toId);C&&C.pos&&b.push(C)}return b}function $(B){var b=a.get(B);if(b.mass=i(B),Number.isNaN(b.mass))throw new Error("Node mass should be a number")}function N(B){return B&&(B.isPinned||B.data&&B.data.isPinned)}function S(B){var b=a.get(B);return b||(w(B),b=a.get(B)),b}function T(B){var b=e.getLinks(B);return b?1+b.length/3:1}}function Dc(){}Nc.simulator=zc;function Tc(e){var t=+this._x.call(null,e);return r0(this.cover(t),t,e)}function r0(e,t,n){if(isNaN(t))return e;var r,i=e._root,a={data:n},s=e._x0,o=e._x1,c,f,l,h,d;if(!i)return e._root=a,e;for(;i.length;)if((l=t>=(c=(s+o)/2))?s=c:o=c,r=i,!(i=i[h=+l]))return r[h]=a,e;if(f=+e._x.call(null,i.data),t===f)return a.next=i,r?r[h]=a:e._root=a,e;do r=r?r[h]=new Array(2):e._root=new Array(2),(l=t>=(c=(s+o)/2))?s=c:o=c;while((h=+l)==(d=+(f>=c)));return r[d]=i,r[h]=a,e}function Pc(e){var t,n=e.length,r,i=new Array(n),a=Infinity,s=-Infinity;for(t=0;t<n;++t)isNaN(r=+this._x.call(null,e[t]))||(i[t]=r,r<a&&(a=r),r>s&&(s=r));if(a>s)return this;for(this.cover(a).cover(s),t=0;t<n;++t)r0(this,i[t],e[t]);return this}function Lc(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{for(var r=n-t||1,i=this._root,a,s;t>e||e>=n;)switch(s=+(e<t),a=new Array(2),a[s]=i,i=a,r*=2,s){case 0:n=t+r;break;case 1:t=n-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=t,this._x1=n,this}function Oc(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function qc(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function be(e,t,n){this.node=e,this.x0=t,this.x1=n}function Qc(e,t){var n,r=this._x0,i,a,s=this._x1,o=[],c=this._root,f,l;for(c&&o.push(new be(c,r,s)),t==null?t=Infinity:(r=e-t,s=e+t);f=o.pop();)if(!(!(c=f.node)||(i=f.x0)>s||(a=f.x1)<r))if(c.length){var h=(i+a)/2;o.push(new be(c[1],h,a),new be(c[0],i,h)),(l=+(e>=h))&&(f=o[o.length-1],o[o.length-1]=o[o.length-1-l],o[o.length-1-l]=f)}else{var d=Math.abs(e-+this._x.call(null,c.data));d<t&&(t=d,r=e-d,s=e+d,n=c.data)}return n}function jc(e){if(isNaN(c=+this._x.call(null,e)))return this;var t,n=this._root,r,i,a,s=this._x0,o=this._x1,c,f,l,h,d;if(!n)return this;if(n.length)for(;;){if((l=c>=(f=(s+o)/2))?s=f:o=f,t=n,!(n=n[h=+l]))return this;if(!n.length)break;t[h+1&1]&&(r=t,d=h)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[h]=a:delete t[h],(n=t[0]||t[1])&&n===(t[1]||t[0])&&!n.length&&(r?r[d]=n:this._root=n),this):(this._root=a,this)}function Uc(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Gc(){return this._root}function Yc(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Hc(e){var t=[],n,r=this._root,i,a,s;for(r&&t.push(new be(r,this._x0,this._x1));n=t.pop();)if(!e(r=n.node,a=n.x0,s=n.x1)&&r.length){var o=(a+s)/2;(i=r[1])&&t.push(new be(i,o,s)),(i=r[0])&&t.push(new be(i,a,o))}return this}function Wc(e){var t=[],n=[],r;for(this._root&&t.push(new be(this._root,this._x0,this._x1));r=t.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.x1,c=(s+o)/2;(a=i[0])&&t.push(new be(a,s,c)),(a=i[1])&&t.push(new be(a,c,o))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.x1);return this}function Xc(e){return e[0]}function Vc(e){return arguments.length?(this._x=e,this):this._x}function Zc(e,t){var n=new on(t??Xc,NaN,NaN);return e==null?n:n.addAll(e)}function on(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function i0(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var J=Zc.prototype=on.prototype;J.copy=function(){var e=new on(this._x,this._x0,this._x1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=i0(t),e;for(n=[{source:t,target:e._root=new Array(2)}];t=n.pop();)for(var i=0;i<2;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(2)}):t.target[i]=i0(r));return e};J.add=Tc;J.addAll=Pc;J.cover=Lc;J.data=Oc;J.extent=qc;J.find=Qc;J.remove=jc;J.removeAll=Uc;J.root=Gc;J.size=Yc;J.visit=Hc;J.visitAfter=Wc;J.x=Vc;function Kc(e){let t=+this._x.call(null,e),n=+this._y.call(null,e);return a0(this.cover(t,n),t,n,e)}function a0(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a=e._root,s={data:r},o=e._x0,c=e._y0,f=e._x1,l=e._y1,h,d,u,v,m,p,A,x;if(!a)return e._root=s,e;for(;a.length;)if((m=t>=(h=(o+f)/2))?o=h:f=h,(p=n>=(d=(c+l)/2))?c=d:l=d,i=a,!(a=a[A=p<<1|m]))return i[A]=s,e;if(u=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===u&&n===v)return s.next=a,i?i[A]=s:e._root=s,e;do i=i?i[A]=new Array(4):e._root=new Array(4),(m=t>=(h=(o+f)/2))?o=h:f=h,(p=n>=(d=(c+l)/2))?c=d:l=d;while((A=p<<1|m)==(x=(v>=d)<<1|u>=h));return i[x]=a,i[A]=s,e}function Jc(e){var t,n,r=e.length,i,a,s=new Array(r),o=new Array(r),c=Infinity,f=Infinity,l=-Infinity,h=-Infinity;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=i,o[n]=a,i<c&&(c=i),i>l&&(l=i),a<f&&(f=a),a>h&&(h=a));if(c>l||f>h)return this;for(this.cover(c,f).cover(l,h),n=0;n<r;++n)a0(this,s[n],o[n],e[n]);return this}function e2(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var s=i-n||1,o=this._root,c,f;n>e||e>=i||r>t||t>=a;)switch(f=(t<r)<<1|e<n,c=new Array(4),c[f]=o,o=c,s*=2,f){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function t2(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function n2(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Z(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function r2(e,t,n){var r,i=this._x0,a=this._y0,s,o,c,f,l=this._x1,h=this._y1,d=[],u=this._root,v,m;for(u&&d.push(new Z(u,i,a,l,h)),n==null?n=Infinity:(i=e-n,a=t-n,l=e+n,h=t+n,n*=n);v=d.pop();)if(!(!(u=v.node)||(s=v.x0)>l||(o=v.y0)>h||(c=v.x1)<i||(f=v.y1)<a))if(u.length){var p=(s+c)/2,A=(o+f)/2;d.push(new Z(u[3],p,A,c,f),new Z(u[2],s,A,p,f),new Z(u[1],p,o,c,A),new Z(u[0],s,o,p,A)),(m=(t>=A)<<1|e>=p)&&(v=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=v)}else{var x=e-+this._x.call(null,u.data),_=t-+this._y.call(null,u.data),w=x*x+_*_;if(w<n){var M=Math.sqrt(n=w);i=e-M,a=t-M,l=e+M,h=t+M,r=u.data}}return r}function i2(e){if(isNaN(l=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,r,i,a,s=this._x0,o=this._y0,c=this._x1,f=this._y1,l,h,d,u,v,m,p,A;if(!n)return this;if(n.length)for(;;){if((v=l>=(d=(s+c)/2))?s=d:c=d,(m=h>=(u=(o+f)/2))?o=u:f=u,t=n,!(n=n[p=m<<1|v]))return this;if(!n.length)break;(t[p+1&3]||t[p+2&3]||t[p+3&3])&&(r=t,A=p)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[p]=a:delete t[p],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[A]=n:this._root=n),this):(this._root=a,this)}function a2(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function s2(){return this._root}function o2(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function f2(e){var t=[],n,r=this._root,i,a,s,o,c;for(r&&t.push(new Z(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,s=n.y0,o=n.x1,c=n.y1)&&r.length){var f=(a+o)/2,l=(s+c)/2;(i=r[3])&&t.push(new Z(i,f,l,o,c)),(i=r[2])&&t.push(new Z(i,a,l,f,c)),(i=r[1])&&t.push(new Z(i,f,s,o,l)),(i=r[0])&&t.push(new Z(i,a,s,f,l))}return this}function c2(e){var t=[],n=[],r;for(this._root&&t.push(new Z(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,c=r.x1,f=r.y1,l=(s+c)/2,h=(o+f)/2;(a=i[0])&&t.push(new Z(a,s,o,l,h)),(a=i[1])&&t.push(new Z(a,l,o,c,h)),(a=i[2])&&t.push(new Z(a,s,h,l,f)),(a=i[3])&&t.push(new Z(a,l,h,c,f))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function l2(e){return e[0]}function h2(e){return arguments.length?(this._x=e,this):this._x}function d2(e){return e[1]}function u2(e){return arguments.length?(this._y=e,this):this._y}function v2(e,t,n){var r=new fn(t??l2,n??d2,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function fn(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function s0(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var K=v2.prototype=fn.prototype;K.copy=function(){var e=new fn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=s0(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=s0(r));return e};K.add=Kc;K.addAll=Jc;K.cover=e2;K.data=t2;K.extent=n2;K.find=r2;K.remove=i2;K.removeAll=a2;K.root=s2;K.size=o2;K.visit=f2;K.visitAfter=c2;K.x=h2;K.y=u2;function p2(e){var t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return o0(this.cover(t,n,r),t,n,r,e)}function o0(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var a,s=e._root,o={data:i},c=e._x0,f=e._y0,l=e._z0,h=e._x1,d=e._y1,u=e._z1,v,m,p,A,x,_,w,M,E,F,R;if(!s)return e._root=o,e;for(;s.length;)if((w=t>=(v=(c+h)/2))?c=v:h=v,(M=n>=(m=(f+d)/2))?f=m:d=m,(E=r>=(p=(l+u)/2))?l=p:u=p,a=s,!(s=s[F=E<<2|M<<1|w]))return a[F]=o,e;if(A=+e._x.call(null,s.data),x=+e._y.call(null,s.data),_=+e._z.call(null,s.data),t===A&&n===x&&r===_)return o.next=s,a?a[F]=o:e._root=o,e;do a=a?a[F]=new Array(8):e._root=new Array(8),(w=t>=(v=(c+h)/2))?c=v:h=v,(M=n>=(m=(f+d)/2))?f=m:d=m,(E=r>=(p=(l+u)/2))?l=p:u=p;while((F=E<<2|M<<1|w)==(R=(_>=p)<<2|(x>=m)<<1|A>=v));return a[R]=s,a[F]=o,e}function g2(e){var t,n,r=e.length,i,a,s,o=new Array(r),c=new Array(r),f=new Array(r),l=Infinity,h=Infinity,d=Infinity,u=-Infinity,v=-Infinity,m=-Infinity;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t))||(o[n]=i,c[n]=a,f[n]=s,i<l&&(l=i),i>u&&(u=i),a<h&&(h=a),a>v&&(v=a),s<d&&(d=s),s>m&&(m=s));if(l>u||h>v||d>m)return this;for(this.cover(l,h,d).cover(u,v,m),n=0;n<r;++n)o0(this,o[n],c[n],f[n],e[n]);return this}function m2(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,s=this._x1,o=this._y1,c=this._z1;if(isNaN(r))s=(r=Math.floor(e))+1,o=(i=Math.floor(t))+1,c=(a=Math.floor(n))+1;else{for(var f=s-r||1,l=this._root,h,d;r>e||e>=s||i>t||t>=o||a>n||n>=c;)switch(d=(n<a)<<2|(t<i)<<1|e<r,h=new Array(8),h[d]=l,l=h,f*=2,d){case 0:s=r+f,o=i+f,c=a+f;break;case 1:r=s-f,o=i+f,c=a+f;break;case 2:s=r+f,i=o-f,c=a+f;break;case 3:r=s-f,i=o-f,c=a+f;break;case 4:s=r+f,o=i+f,a=c-f;break;case 5:r=s-f,o=i+f,a=c-f;break;case 6:s=r+f,i=o-f,a=c-f;break;case 7:r=s-f,i=o-f,a=c-f;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=c,this}function b2(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function y2(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function j(e,t,n,r,i,a,s){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=s}function A2(e,t,n,r){var i,a=this._x0,s=this._y0,o=this._z0,c,f,l,h,d,u,v=this._x1,m=this._y1,p=this._z1,A=[],x=this._root,_,w;for(x&&A.push(new j(x,a,s,o,v,m,p)),r==null?r=Infinity:(a=e-r,s=t-r,o=n-r,v=e+r,m=t+r,p=n+r,r*=r);_=A.pop();)if(!(!(x=_.node)||(c=_.x0)>v||(f=_.y0)>m||(l=_.z0)>p||(h=_.x1)<a||(d=_.y1)<s||(u=_.z1)<o))if(x.length){var M=(c+h)/2,E=(f+d)/2,F=(l+u)/2;A.push(new j(x[7],M,E,F,h,d,u),new j(x[6],c,E,F,M,d,u),new j(x[5],M,f,F,h,E,u),new j(x[4],c,f,F,M,E,u),new j(x[3],M,E,l,h,d,F),new j(x[2],c,E,l,M,d,F),new j(x[1],M,f,l,h,E,F),new j(x[0],c,f,l,M,E,F)),(w=(n>=F)<<2|(t>=E)<<1|e>=M)&&(_=A[A.length-1],A[A.length-1]=A[A.length-1-w],A[A.length-1-w]=_)}else{var R=e-+this._x.call(null,x.data),$=t-+this._y.call(null,x.data),N=n-+this._z.call(null,x.data),S=R*R+$*$+N*N;if(S<r){var T=Math.sqrt(r=S);a=e-T,s=t-T,o=n-T,v=e+T,m=t+T,p=n+T,i=x.data}}return i}function w2(e){if(isNaN(d=+this._x.call(null,e))||isNaN(u=+this._y.call(null,e))||isNaN(v=+this._z.call(null,e)))return this;var t,n=this._root,r,i,a,s=this._x0,o=this._y0,c=this._z0,f=this._x1,l=this._y1,h=this._z1,d,u,v,m,p,A,x,_,w,M,E;if(!n)return this;if(n.length)for(;;){if((x=d>=(m=(s+f)/2))?s=m:f=m,(_=u>=(p=(o+l)/2))?o=p:l=p,(w=v>=(A=(c+h)/2))?c=A:h=A,t=n,!(n=n[M=w<<2|_<<1|x]))return this;if(!n.length)break;(t[M+1&7]||t[M+2&7]||t[M+3&7]||t[M+4&7]||t[M+5&7]||t[M+6&7]||t[M+7&7])&&(r=t,E=M)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[M]=a:delete t[M],(n=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&n===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=a,this)}function x2(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function _2(){return this._root}function M2(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function I2(e){var t=[],n,r=this._root,i,a,s,o,c,f,l;for(r&&t.push(new j(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=t.pop();)if(!e(r=n.node,a=n.x0,s=n.y0,o=n.z0,c=n.x1,f=n.y1,l=n.z1)&&r.length){var h=(a+c)/2,d=(s+f)/2,u=(o+l)/2;(i=r[7])&&t.push(new j(i,h,d,u,c,f,l)),(i=r[6])&&t.push(new j(i,a,d,u,h,f,l)),(i=r[5])&&t.push(new j(i,h,s,u,c,d,l)),(i=r[4])&&t.push(new j(i,a,s,u,h,d,l)),(i=r[3])&&t.push(new j(i,h,d,o,c,f,u)),(i=r[2])&&t.push(new j(i,a,d,o,h,f,u)),(i=r[1])&&t.push(new j(i,h,s,o,c,d,u)),(i=r[0])&&t.push(new j(i,a,s,o,h,d,u))}return this}function E2(e){var t=[],n=[],r;for(this._root&&t.push(new j(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=t.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,c=r.z0,f=r.x1,l=r.y1,h=r.z1,d=(s+f)/2,u=(o+l)/2,v=(c+h)/2;(a=i[0])&&t.push(new j(a,s,o,c,d,u,v)),(a=i[1])&&t.push(new j(a,d,o,c,f,u,v)),(a=i[2])&&t.push(new j(a,s,u,c,d,l,v)),(a=i[3])&&t.push(new j(a,d,u,c,f,l,v)),(a=i[4])&&t.push(new j(a,s,o,v,d,u,h)),(a=i[5])&&t.push(new j(a,d,o,v,f,u,h)),(a=i[6])&&t.push(new j(a,s,u,v,d,l,h)),(a=i[7])&&t.push(new j(a,d,u,v,f,l,h))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function B2(e){return e[0]}function C2(e){return arguments.length?(this._x=e,this):this._x}function k2(e){return e[1]}function R2(e){return arguments.length?(this._y=e,this):this._y}function S2(e){return e[2]}function F2(e){return arguments.length?(this._z=e,this):this._z}function $2(e,t,n,r){var i=new cn(t??B2,n??k2,r??S2,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function cn(e,t,n,r,i,a,s,o,c){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=c,this._root=void 0}function f0(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var V=$2.prototype=cn.prototype;V.copy=function(){var e=new cn(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=f0(t),e;for(n=[{source:t,target:e._root=new Array(8)}];t=n.pop();)for(var i=0;i<8;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(8)}):t.target[i]=f0(r));return e};V.add=p2;V.addAll=g2;V.cover=m2;V.data=b2;V.extent=y2;V.find=A2;V.remove=w2;V.removeAll=x2;V.root=_2;V.size=M2;V.visit=I2;V.visitAfter=E2;V.x=C2;V.y=R2;V.z=F2;var ld=Math.PI*(3-Math.sqrt(5)),hd=Math.PI*20/(9+Math.sqrt(221));var N2=wt(function(e,t){(function(n){e.exports=n()})(function(){return function(){function n(r,i,a){function s(f,l){if(!i[f]){if(!r[f]){var h=typeof ze=="function"&&ze;if(!l&&h)return h(f,!0);if(o)return o(f,!0);var d=new Error("Cannot find module '"+f+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[f]={exports:{}};r[f][0].call(u.exports,function(v){var m=r[f][1][v];return s(m||v)},u,u.exports,n,r,i,a)}return i[f].exports}for(var o=typeof ze=="function"&&ze,c=0;c<a.length;c++)s(a[c]);return s}return n}()({1:[function(n,r,i){var a=n("inherits"),s=n("multimath"),o=n("./mm_unsharp_mask"),c=n("./mm_resize");function f(l){var h=l||[],d={js:h.indexOf("js")>=0,wasm:h.indexOf("wasm")>=0};s.call(this,d),this.features={js:d.js,wasm:d.wasm&&this.has_wasm()},this.use(o),this.use(c)}a(f,s),f.prototype.resizeAndUnsharp=function(h,d){var u=this.resize(h,d);return h.unsharpAmount&&this.unsharp_mask(u,h.toWidth,h.toHeight,h.unsharpAmount,h.unsharpRadius,h.unsharpThreshold),u},r.exports=f},{"./mm_resize":4,"./mm_unsharp_mask":9,inherits:19,multimath:20}],2:[function(n,r,i){function a(c){return c<0?0:c>255?255:c}function s(c,f,l,h,d,u){var v,m,p,A,x,_,w,M,E,F,R,$=0,N=0;for(E=0;E<h;E++){for(x=0,F=0;F<d;F++){for(_=u[x++],w=u[x++],M=$+_*4|0,v=m=p=A=0;w>0;w--)R=u[x++],A=A+R*c[M+3]|0,p=p+R*c[M+2]|0,m=m+R*c[M+1]|0,v=v+R*c[M]|0,M=M+4|0;f[N+3]=a(A+(1<<13)>>14),f[N+2]=a(p+(1<<13)>>14),f[N+1]=a(m+(1<<13)>>14),f[N]=a(v+(1<<13)>>14),N=N+h*4|0}N=(E+1)*4|0,$=(E+1)*l*4|0}}function o(c,f,l,h,d,u){var v,m,p,A,x,_,w,M,E,F,R,$=0,N=0;for(E=0;E<h;E++){for(x=0,F=0;F<d;F++){for(_=u[x++],w=u[x++],M=$+_*4|0,v=m=p=A=0;w>0;w--)R=u[x++],A=A+R*c[M+3]|0,p=p+R*c[M+2]|0,m=m+R*c[M+1]|0,v=v+R*c[M]|0,M=M+4|0;f[N+3]=a(A+(1<<13)>>14),f[N+2]=a(p+(1<<13)>>14),f[N+1]=a(m+(1<<13)>>14),f[N]=a(v+(1<<13)>>14),N=N+h*4|0}N=(E+1)*4|0,$=(E+1)*l*4|0}}r.exports={convolveHorizontally:s,convolveVertically:o}},{}],3:[function(n,r,i){r.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEXA2AAAGAGf39/f39/AGAHf39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMEAwABAgYGAX8AQQALB1cFEV9fd2FzbV9jYWxsX2N0b3JzAAAIY29udm9sdmUAAQpjb252b2x2ZUhWAAIMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAK7AMDAwABC8YDAQ9/AkAgA0UNACAERQ0AA0AgDCENQQAhE0EAIQcDQCAHQQJqIQYCfyAHQQF0IAVqIgcuAQIiFEUEQEGAwAAhCEGAwAAhCUGAwAAhCkGAwAAhCyAGDAELIBIgBy4BAGohCEEAIQsgFCEHQQAhDiAGIQlBACEPQQAhEANAIAUgCUEBdGouAQAiESAAIAhBAnRqKAIAIgpBGHZsIBBqIRAgCkH/AXEgEWwgC2ohCyAKQRB2Qf8BcSARbCAPaiEPIApBCHZB/wFxIBFsIA5qIQ4gCEEBaiEIIAlBAWohCSAHQQFrIgcNAAsgC0GAQGshCCAOQYBAayEJIA9BgEBrIQogEEGAQGshCyAGIBRqCyEHIAEgDUECdGogCUEOdSIGQf8BIAZB/wFIGyIGQQAgBkEAShtBCHRBgP4DcSAKQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EQdEGAgPwHcSALQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobcjYCACADIA1qIQ0gE0EBaiITIARHDQALIAxBAWoiDCACbCESIAMgDEcNAAsLCx4AQQAgAiADIAQgBSAAEAEgAkEAIAQgBSAGIAEQAQs="},{}],4:[function(n,r,i){r.exports={name:"resize",fn:n("./resize"),wasm_fn:n("./resize_wasm"),wasm_src:n("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(n,r,i){var a=n("./resize_filter_gen"),s=n("./convolve").convolveHorizontally,o=n("./convolve").convolveVertically;function c(f,l,h){for(var d=3,u=l*h*4|0;d<u;)f[d]=255,d=d+4|0}r.exports=function(l){var h=l.src,d=l.width,u=l.height,v=l.toWidth,m=l.toHeight,p=l.scaleX||l.toWidth/l.width,A=l.scaleY||l.toHeight/l.height,x=l.offsetX||0,_=l.offsetY||0,w=l.dest||new Uint8Array(v*m*4),M=typeof l.quality=="undefined"?3:l.quality,E=l.alpha||!1,F=a(M,d,v,p,x),R=a(M,u,m,A,_),$=new Uint8Array(v*u*4);return s(h,$,d,u,v,F),o($,w,u,v,m,R),E||c(w,v,m),w}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(n,r,i){var a=n("./resize_filter_info"),s=14;function o(c){return Math.round(c*((1<<s)-1))}r.exports=function(f,l,h,d,u){var v=a[f].filter,m=1/d,p=Math.min(1,d),A=a[f].win/p,x,_,w,M,E,F,R,$,N,S,T,B,b,g,y,I,C,k=Math.floor((A+1)*2),z=new Int16Array((k+2)*h),D=0,P=!z.subarray||!z.set;for(x=0;x<h;x++){for(_=(x+.5)*m+u,w=Math.max(0,Math.floor(_-A)),M=Math.min(l-1,Math.ceil(_+A)),E=M-w+1,F=new Float32Array(E),R=new Int16Array(E),$=0,N=w,S=0;N<=M;N++,S++)T=v((N+.5-_)*p),$+=T,F[S]=T;for(B=0,S=0;S<F.length;S++)b=F[S]/$,B+=b,R[S]=o(b);for(R[h>>1]+=o(1-B),g=0;g<R.length&&R[g]===0;)g++;if(g<R.length){for(y=R.length-1;y>0&&R[y]===0;)y--;if(I=w+g,C=y-g+1,z[D++]=I,z[D++]=C,!P)z.set(R.subarray(g,y+1),D),D+=C;else for(S=g;S<=y;S++)z[D++]=R[S]}else z[D++]=0,z[D++]=0}return z}},{"./resize_filter_info":7}],7:[function(n,r,i){r.exports=[{win:.5,filter:function(s){return s>=-.5&&s<.5?1:0}},{win:1,filter:function(s){if(s<=-1||s>=1)return 0;if(s>-11920929e-14&&s<11920929e-14)return 1;var o=s*Math.PI;return Math.sin(o)/o*(.54+.46*Math.cos(o/1))}},{win:2,filter:function(s){if(s<=-2||s>=2)return 0;if(s>-11920929e-14&&s<11920929e-14)return 1;var o=s*Math.PI;return Math.sin(o)/o*Math.sin(o/2)/(o/2)}},{win:3,filter:function(s){if(s<=-3||s>=3)return 0;if(s>-11920929e-14&&s<11920929e-14)return 1;var o=s*Math.PI;return Math.sin(o)/o*Math.sin(o/3)/(o/3)}}]},{}],8:[function(n,r,i){var a=n("./resize_filter_gen");function s(l,h,d){for(var u=3,v=h*d*4|0;u<v;)l[u]=255,u=u+4|0}function o(l){return new Uint8Array(l.buffer,0,l.byteLength)}var c=!0;try{c=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch(l){}function f(l,h,d){if(c){h.set(o(l),d);return}for(var u=d,v=0;v<l.length;v++){var m=l[v];h[u++]=m&255,h[u++]=m>>8&255}}r.exports=function(h){var d=h.src,u=h.width,v=h.height,m=h.toWidth,p=h.toHeight,A=h.scaleX||h.toWidth/h.width,x=h.scaleY||h.toHeight/h.height,_=h.offsetX||0,w=h.offsetY||0,M=h.dest||new Uint8Array(m*p*4),E=typeof h.quality=="undefined"?3:h.quality,F=h.alpha||!1,R=a(E,u,m,A,_),$=a(E,v,p,x,w),N=0,S=this.__align(N+Math.max(d.byteLength,M.byteLength)),T=this.__align(S+v*m*4),B=this.__align(T+R.byteLength),b=B+$.byteLength,g=this.__instance("resize",b),y=new Uint8Array(this.__memory.buffer),I=new Uint32Array(this.__memory.buffer),C=new Uint32Array(d.buffer);I.set(C),f(R,y,T),f($,y,B);var k=g.exports.convolveHV||g.exports._convolveHV;k(T,B,S,u,v,m,p);var z=new Uint32Array(M.buffer);return z.set(new Uint32Array(this.__memory.buffer,0,p*m)),F||s(M,m,p),M}},{"./resize_filter_gen":6}],9:[function(n,r,i){r.exports={name:"unsharp_mask",fn:n("./unsharp_mask"),wasm_fn:n("./unsharp_mask_wasm"),wasm_src:n("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(n,r,i){var a=n("glur/mono16");function s(o,c,f){for(var l=c*f,h=new Uint16Array(l),d,u,v,m,p=0;p<l;p++)d=o[4*p],u=o[4*p+1],v=o[4*p+2],m=d>=u&&d>=v?d:u>=v&&u>=d?u:v,h[p]=m<<8;return h}r.exports=function(c,f,l,h,d,u){var v,m,p,A,x;if(!(h===0||d<.5)){d>2&&(d=2);var _=s(c,f,l),w=new Uint16Array(_);a(w,f,l,d);for(var M=h/100*4096+.5|0,E=u<<8,F=f*l,R=0;R<F;R++)v=_[R],A=v-w[R],Math.abs(A)>=E&&(m=v+(M*A+2048>>12),m=m>65280?65280:m,m=m<0?0:m,v=v!==0?v:1,p=(m<<12)/v|0,x=R*4,c[x]=c[x]*p+2048>>12,c[x+1]=c[x+1]*p+2048>>12,c[x+2]=c[x+2]*p+2048>>12)}}},{"glur/mono16":18}],11:[function(n,r,i){r.exports=function(s,o,c,f,l,h){if(!(f===0||l<.5)){l>2&&(l=2);var d=o*c,u=d*4,v=d*2,m=d*2,p=Math.max(o,c)*4,A=8*4,x=0,_=u,w=_+v,M=w+m,E=M+m,F=E+p,R=this.__instance("unsharp_mask",u+v+m*2+p+A,{exp:Math.exp}),$=new Uint32Array(s.buffer),N=new Uint32Array(this.__memory.buffer);N.set($);var S=R.exports.hsv_v16||R.exports._hsv_v16;S(x,_,o,c),S=R.exports.blurMono16||R.exports._blurMono16,S(_,w,M,E,F,o,c,l),S=R.exports.unsharp||R.exports._unsharp,S(x,x,_,w,o,c,f,h),$.set(new Uint32Array(this.__memory.buffer,0,d))}}},{}],12:[function(n,r,i){r.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(n,r,i){var a=100;function s(o,c){this.create=o,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=c||2e3}s.prototype.acquire=function(){var o=this,c;return this.available.length!==0?c=this.available.pop():(c=this.create(),c.id=this.lastId++,c.release=function(){return o.release(c)}),this.acquired[c.id]=c,c},s.prototype.release=function(o){var c=this;delete this.acquired[o.id],o.lastUsed=Date.now(),this.available.push(o),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return c.gc()},a))},s.prototype.gc=function(){var o=this,c=Date.now();this.available=this.available.filter(function(f){return c-f.lastUsed>o.idle?(f.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return o.gc()},a):this.timeoutId=0},r.exports=s},{}],14:[function(n,r,i){var a=2;r.exports=function(o,c,f,l,h,d){var u=f/o,v=l/c,m=(2*d+a+1)/h;if(m>.5)return[[f,l]];var p=Math.ceil(Math.log(Math.min(u,v))/Math.log(m));if(p<=1)return[[f,l]];for(var A=[],x=0;x<p;x++){var _=Math.round(Math.pow(Math.pow(o,p-x-1)*Math.pow(f,x+1),1/p)),w=Math.round(Math.pow(Math.pow(c,p-x-1)*Math.pow(l,x+1),1/p));A.push([_,w])}return A}},{}],15:[function(n,r,i){var a=1e-5;function s(c){var f=Math.round(c);return Math.abs(c-f)<a?f:Math.floor(c)}function o(c){var f=Math.round(c);return Math.abs(c-f)<a?f:Math.ceil(c)}r.exports=function(f){var l=f.toWidth/f.width,h=f.toHeight/f.height,d=s(f.srcTileSize*l)-2*f.destTileBorder,u=s(f.srcTileSize*h)-2*f.destTileBorder;if(d<1||u<1)throw new Error("Internal error in pica: target tile width/height is too small.");var v,m,p,A,x,_,w=[],M;for(A=0;A<f.toHeight;A+=u)for(p=0;p<f.toWidth;p+=d)v=p-f.destTileBorder,v<0&&(v=0),x=p+d+f.destTileBorder-v,v+x>=f.toWidth&&(x=f.toWidth-v),m=A-f.destTileBorder,m<0&&(m=0),_=A+u+f.destTileBorder-m,m+_>=f.toHeight&&(_=f.toHeight-m),M={toX:v,toY:m,toWidth:x,toHeight:_,toInnerX:p,toInnerY:A,toInnerWidth:d,toInnerHeight:u,offsetX:v/l-s(v/l),offsetY:m/h-s(m/h),scaleX:l,scaleY:h,x:s(v/l),y:s(m/h),width:o(x/l),height:o(_/h)},w.push(M);return w}},{}],16:[function(n,r,i){function a(s){return Object.prototype.toString.call(s)}r.exports.isCanvas=function(o){var c=a(o);return c==="[object HTMLCanvasElement]"||c==="[object OffscreenCanvas]"||c==="[object Canvas]"},r.exports.isImage=function(o){return a(o)==="[object HTMLImageElement]"},r.exports.isImageBitmap=function(o){return a(o)==="[object ImageBitmap]"},r.exports.limiter=function(o){var c=0,f=[];function l(){c<o&&f.length&&(c++,f.shift()())}return function(d){return new Promise(function(u,v){f.push(function(){d().then(function(m){u(m),c--,l()},function(m){v(m),c--,l()})}),l()})}},r.exports.cib_quality_name=function(o){switch(o){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},r.exports.cib_support=function(o){return Promise.resolve().then(function(){if(typeof createImageBitmap=="undefined")return!1;var c=o(100,100);return createImageBitmap(c,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(f){var l=f.width===10;return f.close(),c=null,l})}).catch(function(){return!1})},r.exports.worker_offscreen_canvas_support=function(){return new Promise(function(o,c){if(typeof OffscreenCanvas=="undefined"){o(!1);return}function f(d){if(typeof createImageBitmap=="undefined"){d.postMessage(!1);return}Promise.resolve().then(function(){var u=new OffscreenCanvas(10,10),v=u.getContext("2d");return v.rect(0,0,1,1),createImageBitmap(u,0,0,1,1)}).then(function(){return d.postMessage(!0)},function(){return d.postMessage(!1)})}var l=btoa("(".concat(f.toString(),")(self);")),h=new Worker("data:text/javascript;base64,".concat(l));h.onmessage=function(d){return o(d.data)},h.onerror=c}).then(function(o){return o},function(){return!1})},r.exports.can_use_canvas=function(o){var c=!1;try{var f=o(2,1),l=f.getContext("2d"),h=l.createImageData(2,1);h.data[0]=12,h.data[1]=23,h.data[2]=34,h.data[3]=255,h.data[4]=45,h.data[5]=56,h.data[6]=67,h.data[7]=255,l.putImageData(h,0,0),h=null,h=l.getImageData(0,0,2,1),h.data[0]===12&&h.data[1]===23&&h.data[2]===34&&h.data[3]===255&&h.data[4]===45&&h.data[5]===56&&h.data[6]===67&&h.data[7]===255&&(c=!0)}catch(d){}return c},r.exports.cib_can_use_region=function(){return new Promise(function(o){if(typeof createImageBitmap=="undefined"){o(!1);return}var c=new Image;c.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",c.onload=function(){createImageBitmap(c,0,0,c.width,c.height).then(function(f){f.width===c.width&&f.height===c.height?o(!0):o(!1)},function(){return o(!1)})},c.onerror=function(){return o(!1)}})}},{}],17:[function(n,r,i){r.exports=function(){var a=n("./mathlib"),s;onmessage=function(c){var f=c.data.opts,l=!1;if(!f.src&&f.srcBitmap){var h=new OffscreenCanvas(f.width,f.height),d=h.getContext("2d",{alpha:Boolean(f.alpha)});d.drawImage(f.srcBitmap,0,0),f.src=d.getImageData(0,0,f.width,f.height).data,h.width=h.height=0,h=null,f.srcBitmap.close(),f.srcBitmap=null,l=!0}s||(s=new a(c.data.features));var u=s.resizeAndUnsharp(f);if(l){var v=new ImageData(new Uint8ClampedArray(u),f.toWidth,f.toHeight),m=new OffscreenCanvas(f.toWidth,f.toHeight),p=m.getContext("2d",{alpha:Boolean(f.alpha)});p.putImageData(v,0,0),createImageBitmap(m).then(function(A){postMessage({bitmap:A},[A])})}else postMessage({data:u},[u.buffer])}}},{"./mathlib":1}],18:[function(n,r,i){var a,s,o,c,f,l,h,d;function u(p){p<.5&&(p=.5);var A=Math.exp(.726*.726)/p,x=Math.exp(-A),_=Math.exp(-2*A),w=(1-x)*(1-x)/(1+2*A*x-_);return a=w,s=w*(A-1)*x,o=w*(A+1)*x,c=-w*_,f=2*x,l=-_,h=(a+s)/(1-f-l),d=(o+c)/(1-f-l),new Float32Array([a,s,o,c,f,l,h,d])}function v(p,A,x,_,w,M){var E,F,R,$,N,S,T,B,b,g,y,I,C,k;for(b=0;b<M;b++){for(S=b*w,T=b,B=0,E=p[S],N=E*_[6],$=N,y=_[0],I=_[1],C=_[4],k=_[5],g=0;g<w;g++)F=p[S],R=F*y+E*I+$*C+N*k,N=$,$=R,E=F,x[B]=$,B++,S++;for(S--,B--,T+=M*(w-1),E=p[S],N=E*_[7],$=N,F=E,y=_[2],I=_[3],g=w-1;g>=0;g--)R=F*y+E*I+$*C+N*k,N=$,$=R,E=F,F=p[S],A[T]=x[B]+$,S--,B--,T-=M}}function m(p,A,x,_){if(!!_){var w=new Uint16Array(p.length),M=new Float32Array(Math.max(A,x)),E=u(_);v(p,w,M,E,A,x),v(w,p,M,E,x,A)}}r.exports=m},{}],19:[function(n,r,i){typeof Object.create=="function"?r.exports=function(s,o){o&&(s.super_=o,s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(s,o){if(o){s.super_=o;var c=function(){};c.prototype=o.prototype,s.prototype=new c,s.prototype.constructor=s}}},{}],20:[function(n,r,i){var a=n("object-assign"),s=n("./lib/base64decode"),o=n("./lib/wa_detect"),c={js:!0,wasm:!0};function f(l){if(!(this instanceof f))return new f(l);var h=a({},c,l||{});if(this.options=h,this.__cache={},this.__init_promise=null,this.__modules=h.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}f.prototype.has_wasm=o,f.prototype.use=function(l){return this.__modules[l.name]=l,this.options.wasm&&this.has_wasm()&&l.wasm_fn?this[l.name]=l.wasm_fn:this[l.name]=l.fn,this},f.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var l=this;return this.__init_promise=Promise.all(Object.keys(l.__modules).map(function(h){var d=l.__modules[h];return!l.options.wasm||!l.has_wasm()||!d.wasm_fn||l.__wasm[h]?null:WebAssembly.compile(l.__base64decode(d.wasm_src)).then(function(u){l.__wasm[h]=u})})).then(function(){return l}),this.__init_promise},f.prototype.__base64decode=s,f.prototype.__reallocate=function(h){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(h/(64*1024))}),this.__memory;var d=this.__memory.buffer.byteLength;return d<h&&this.__memory.grow(Math.ceil((h-d)/(64*1024))),this.__memory},f.prototype.__instance=function(h,d,u){if(d&&this.__reallocate(d),!this.__wasm[h]){var v=this.__modules[h];this.__wasm[h]=new WebAssembly.Module(this.__base64decode(v.wasm_src))}if(!this.__cache[h]){var m={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[h]=new WebAssembly.Instance(this.__wasm[h],{env:a(m,u||{})})}return this.__cache[h]},f.prototype.__align=function(h,d){d=d||8;var u=h%d;return h+(u?d-u:0)},r.exports=f},{"./lib/base64decode":21,"./lib/wa_detect":22,"object-assign":23}],21:[function(n,r,i){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";r.exports=function(o){for(var c=o.replace(/[\r\n=]/g,""),f=c.length,l=new Uint8Array(f*3>>2),h=0,d=0,u=0;u<f;u++)u%4==0&&u&&(l[d++]=h>>16&255,l[d++]=h>>8&255,l[d++]=h&255),h=h<<6|a.indexOf(c.charAt(u));var v=f%4*6;return v===0?(l[d++]=h>>16&255,l[d++]=h>>8&255,l[d++]=h&255):v===18?(l[d++]=h>>10&255,l[d++]=h>>2&255):v===12&&(l[d++]=h>>4&255),l}},{}],22:[function(n,r,i){var a;r.exports=function(){if(typeof a!="undefined"||(a=!1,typeof WebAssembly=="undefined"))return a;try{var o=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),c=new WebAssembly.Module(o),f=new WebAssembly.Instance(c,{});return f.exports.test(4)!==0&&(a=!0),a}catch(l){}return a}},{}],23:[function(n,r,i){var a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function c(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function f(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var h={},d=0;d<10;d++)h["_"+String.fromCharCode(d)]=d;var u=Object.getOwnPropertyNames(h).map(function(m){return h[m]});if(u.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(m){v[m]=m}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch(m){return!1}}r.exports=f()?Object.assign:function(l,h){for(var d,u=c(l),v,m=1;m<arguments.length;m++){d=Object(arguments[m]);for(var p in d)s.call(d,p)&&(u[p]=d[p]);if(a){v=a(d);for(var A=0;A<v.length;A++)o.call(d,v[A])&&(u[v[A]]=d[v[A]])}}return u}},{}],24:[function(n,r,i){var a=arguments[3],s=arguments[4],o=arguments[5],c=JSON.stringify;r.exports=function(f,l){for(var h,d=Object.keys(o),u=0,v=d.length;u<v;u++){var m=d[u],p=o[m].exports;if(p===f||p&&p.default===f){h=m;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var A={},u=0,v=d.length;u<v;u++){var m=d[u];A[m]=m}s[h]=["function(require,module,exports){"+f+"(self); }",A]}var x=Math.floor(Math.pow(16,8)*Math.random()).toString(16),_={};_[h]=h,s[x]=["function(require,module,exports){var f = require("+c(h)+");(f.default ? f.default : f)(self);}",_];var w={};M(x);function M(S){w[S]=!0;for(var T in s[S][1]){var B=s[S][1][T];w[B]||M(B)}}var E="("+a+")({"+Object.keys(w).map(function(S){return c(S)+":["+s[S][0]+","+c(s[S][1])+"]"}).join(",")+"},{},["+c(x)+"])",F=window.URL||window.webkitURL||window.mozURL||window.msURL,R=new Blob([E],{type:"text/javascript"});if(l&&l.bare)return R;var $=F.createObjectURL(R),N=new Worker($);return N.objectURL=$,N}},{}],"/index.js":[function(n,r,i){function a(g,y){return l(g)||f(g,y)||o(g,y)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(g,y){if(!!g){if(typeof g=="string")return c(g,y);var I=Object.prototype.toString.call(g).slice(8,-1);if(I==="Object"&&g.constructor&&(I=g.constructor.name),I==="Map"||I==="Set")return Array.from(g);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return c(g,y)}}function c(g,y){(y==null||y>g.length)&&(y=g.length);for(var I=0,C=new Array(y);I<y;I++)C[I]=g[I];return C}function f(g,y){var I=g==null?null:typeof Symbol!="undefined"&&g[Symbol.iterator]||g["@@iterator"];if(I!=null){var C=[],k=!0,z=!1,D,P;try{for(I=I.call(g);!(k=(D=I.next()).done)&&(C.push(D.value),!(y&&C.length===y));k=!0);}catch(O){z=!0,P=O}finally{try{!k&&I.return!=null&&I.return()}finally{if(z)throw P}}return C}}function l(g){if(Array.isArray(g))return g}var h=n("object-assign"),d=n("webworkify"),u=n("./lib/mathlib"),v=n("./lib/pool"),m=n("./lib/utils"),p=n("./lib/worker"),A=n("./lib/stepper"),x=n("./lib/tiler"),_={},w=!1;try{typeof navigator!="undefined"&&navigator.userAgent&&(w=navigator.userAgent.indexOf("Safari")>=0)}catch(g){}var M=1;typeof navigator!="undefined"&&(M=Math.min(navigator.hardwareConcurrency||1,4));var E={tile:1024,concurrency:M,features:["js","wasm","ww"],idle:2e3,createCanvas:function(y,I){var C=document.createElement("canvas");return C.width=y,C.height=I,C}},F={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},R=!1,$=!1,N=!1,S=!1,T=!1;function B(){return{value:d(p),destroy:function(){if(this.value.terminate(),typeof window!="undefined"){var y=window.URL||window.webkitURL||window.mozURL||window.msURL;y&&y.revokeObjectURL&&this.value.objectURL&&y.revokeObjectURL(this.value.objectURL)}}}}function b(g){if(!(this instanceof b))return new b(g);this.options=h({},E,g||{});var y="lk_".concat(this.options.concurrency);this.__limit=_[y]||m.limiter(this.options.concurrency),_[y]||(_[y]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}b.prototype.init=function(){var g=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData!="undefined"&&typeof Uint8ClampedArray!="undefined")try{new ImageData(new Uint8ClampedArray(400),10,10),R=!0}catch(O){}typeof ImageBitmap!="undefined"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?$=!0:this.debug("ImageBitmap does not support .close(), disabled"));var y=this.options.features.slice();if(y.indexOf("all")>=0&&(y=["cib","wasm","js","ww"]),this.__requested_features=y,this.__mathlib=new u(y),y.indexOf("ww")>=0&&typeof window!="undefined"&&"Worker"in window)try{var I=n("webworkify")(function(){});I.terminate(),this.features.ww=!0;var C="wp_".concat(JSON.stringify(this.options));_[C]?this.__workersPool=_[C]:(this.__workersPool=new v(B,this.options.idle),_[C]=this.__workersPool)}catch(O){}var k=this.__mathlib.init().then(function(O){h(g.features,O.features)}),z;$?z=m.cib_support(this.options.createCanvas).then(function(O){if(g.features.cib&&y.indexOf("cib")<0){g.debug("createImageBitmap() resize supported, but disabled by config");return}y.indexOf("cib")>=0&&(g.features.cib=O)}):z=Promise.resolve(!1),N=m.can_use_canvas(this.options.createCanvas);var D;$&&R&&y.indexOf("ww")!==-1?D=m.worker_offscreen_canvas_support():D=Promise.resolve(!1),D=D.then(function(O){S=O});var P=m.cib_can_use_region().then(function(O){T=O});return this.__initPromise=Promise.all([k,z,D,P]).then(function(){return g}),this.__initPromise},b.prototype.__invokeResize=function(g,y){var I=this;return y.__mathCache=y.__mathCache||{},Promise.resolve().then(function(){return I.features.ww?new Promise(function(C,k){var z=I.__workersPool.acquire();y.cancelToken&&y.cancelToken.catch(function(P){return k(P)}),z.value.onmessage=function(P){z.release(),P.data.err?k(P.data.err):C(P.data)};var D=[];g.src&&D.push(g.src.buffer),g.srcBitmap&&D.push(g.srcBitmap),z.value.postMessage({opts:g,features:I.__requested_features,preload:{wasm_nodule:I.__mathlib.__}},D)}):{data:I.__mathlib.resizeAndUnsharp(g,y.__mathCache)}})},b.prototype.__extractTileData=function(g,y,I,C,k){if(this.features.ww&&S&&(m.isCanvas(y)||T))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(C.srcImageBitmap||y,g.x,g.y,g.width,g.height).then(function(P){return k.srcBitmap=P,k});if(m.isCanvas(y))return C.srcCtx||(C.srcCtx=y.getContext("2d",{alpha:Boolean(I.alpha)})),this.debug("Get tile pixel data"),k.src=C.srcCtx.getImageData(g.x,g.y,g.width,g.height).data,k;this.debug("Draw tile imageBitmap/image to temporary canvas");var z=this.options.createCanvas(g.width,g.height),D=z.getContext("2d",{alpha:Boolean(I.alpha)});return D.globalCompositeOperation="copy",D.drawImage(C.srcImageBitmap||y,g.x,g.y,g.width,g.height,0,0,g.width,g.height),this.debug("Get tile pixel data"),k.src=D.getImageData(0,0,g.width,g.height).data,z.width=z.height=0,k},b.prototype.__landTileData=function(g,y,I){var C;if(this.debug("Convert raw rgba tile result to ImageData"),y.bitmap)return I.toCtx.drawImage(y.bitmap,g.toX,g.toY),null;if(R)C=new ImageData(new Uint8ClampedArray(y.data),g.toWidth,g.toHeight);else if(C=I.toCtx.createImageData(g.toWidth,g.toHeight),C.data.set)C.data.set(y.data);else for(var k=C.data.length-1;k>=0;k--)C.data[k]=y.data[k];return this.debug("Draw tile"),w?I.toCtx.putImageData(C,g.toX,g.toY,g.toInnerX-g.toX,g.toInnerY-g.toY,g.toInnerWidth+1e-5,g.toInnerHeight+1e-5):I.toCtx.putImageData(C,g.toX,g.toY,g.toInnerX-g.toX,g.toInnerY-g.toY,g.toInnerWidth,g.toInnerHeight),null},b.prototype.__tileAndResize=function(g,y,I){var C=this,k={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},z=function(P){return C.__limit(function(){if(I.canceled)return I.cancelToken;var O={width:P.width,height:P.height,toWidth:P.toWidth,toHeight:P.toHeight,scaleX:P.scaleX,scaleY:P.scaleY,offsetX:P.offsetX,offsetY:P.offsetY,quality:I.quality,alpha:I.alpha,unsharpAmount:I.unsharpAmount,unsharpRadius:I.unsharpRadius,unsharpThreshold:I.unsharpThreshold};return C.debug("Invoke resize math"),Promise.resolve(O).then(function(q){return C.__extractTileData(P,g,I,k,q)}).then(function(q){return C.debug("Invoke resize math"),C.__invokeResize(q,I)}).then(function(q){return I.canceled?I.cancelToken:(k.srcImageData=null,C.__landTileData(P,q,k))})})};return Promise.resolve().then(function(){if(k.toCtx=y.getContext("2d",{alpha:Boolean(I.alpha)}),m.isCanvas(g))return null;if(m.isImageBitmap(g))return k.srcImageBitmap=g,k.isImageBitmapReused=!0,null;if(m.isImage(g))return $?(C.debug("Decode image via createImageBitmap"),createImageBitmap(g).then(function(D){k.srcImageBitmap=D}).catch(function(D){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(I.canceled)return I.cancelToken;C.debug("Calculate tiles");var D=x({width:I.width,height:I.height,srcTileSize:C.options.tile,toWidth:I.toWidth,toHeight:I.toHeight,destTileBorder:I.__destTileBorder}),P=D.map(function(q){return z(q)});function O(q){q.srcImageBitmap&&(q.isImageBitmapReused||q.srcImageBitmap.close(),q.srcImageBitmap=null)}return C.debug("Process tiles"),Promise.all(P).then(function(){return C.debug("Finished!"),O(k),y},function(q){throw O(k),q})})},b.prototype.__processStages=function(g,y,I,C){var k=this;if(C.canceled)return C.cancelToken;var z=g.shift(),D=a(z,2),P=D[0],O=D[1],q=g.length===0;C=h({},C,{toWidth:P,toHeight:O,quality:q?C.quality:Math.min(1,C.quality)});var H;return q||(H=this.options.createCanvas(P,O)),this.__tileAndResize(y,q?I:H,C).then(function(){return q?I:(C.width=P,C.height=O,k.__processStages(g,H,I,C))}).then(function(re){return H&&(H.width=H.height=0),re})},b.prototype.__resizeViaCreateImageBitmap=function(g,y,I){var C=this,k=y.getContext("2d",{alpha:Boolean(I.alpha)});return this.debug("Resize via createImageBitmap()"),createImageBitmap(g,{resizeWidth:I.toWidth,resizeHeight:I.toHeight,resizeQuality:m.cib_quality_name(I.quality)}).then(function(z){if(I.canceled)return I.cancelToken;if(!I.unsharpAmount)return k.drawImage(z,0,0),z.close(),k=null,C.debug("Finished!"),y;C.debug("Unsharp result");var D=C.options.createCanvas(I.toWidth,I.toHeight),P=D.getContext("2d",{alpha:Boolean(I.alpha)});P.drawImage(z,0,0),z.close();var O=P.getImageData(0,0,I.toWidth,I.toHeight);return C.__mathlib.unsharp_mask(O.data,I.toWidth,I.toHeight,I.unsharpAmount,I.unsharpRadius,I.unsharpThreshold),k.putImageData(O,0,0),D.width=D.height=0,O=P=D=k=null,C.debug("Finished!"),y})},b.prototype.resize=function(g,y,I){var C=this;this.debug("Start resize...");var k=h({},F);if(isNaN(I)?I&&(k=h(k,I)):k=h(k,{quality:I}),k.toWidth=y.width,k.toHeight=y.height,k.width=g.naturalWidth||g.width,k.height=g.naturalHeight||g.height,y.width===0||y.height===0)return Promise.reject(new Error("Invalid output size: ".concat(y.width,"x").concat(y.height)));k.unsharpRadius>2&&(k.unsharpRadius=2),k.canceled=!1,k.cancelToken&&(k.cancelToken=k.cancelToken.then(function(D){throw k.canceled=!0,D},function(D){throw k.canceled=!0,D}));var z=3;return k.__destTileBorder=Math.ceil(Math.max(z,2.5*k.unsharpRadius|0)),this.init().then(function(){if(k.canceled)return k.cancelToken;if(C.features.cib)return C.__resizeViaCreateImageBitmap(g,y,k);if(!N){var D=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw D.code="ERR_GET_IMAGE_DATA",D}var P=A(k.width,k.height,k.toWidth,k.toHeight,C.options.tile,k.__destTileBorder);return C.__processStages(P,g,y,k)})},b.prototype.resizeBuffer=function(g){var y=this,I=h({},F,g);return this.init().then(function(){return y.__mathlib.resizeAndUnsharp(I)})},b.prototype.toBlob=function(g,y,I){return y=y||"image/png",new Promise(function(C){if(g.toBlob){g.toBlob(function(O){return C(O)},y,I);return}if(g.convertToBlob){C(g.convertToBlob({type:y,quality:I}));return}for(var k=atob(g.toDataURL(y,I).split(",")[1]),z=k.length,D=new Uint8Array(z),P=0;P<z;P++)D[P]=k.charCodeAt(P);C(new Blob([D],{type:y}))})},b.prototype.debug=function(){},r.exports=b},{"./lib/mathlib":1,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":23,webworkify:24}]},{},[])("/index.js")})}),c0=N2;console.log("IMPORTING");var z2=function(){importScripts("https://cdn.jsdelivr.net/npm/d3-dispatch@3"),importScripts("https://cdn.jsdelivr.net/npm/d3-quadtree@3"),importScripts("https://cdn.jsdelivr.net/npm/d3-timer@3"),importScripts("https://cdn.jsdelivr.net/npm/d3-force@3"),importScripts("https://unpkg.com/d3-binarytree"),importScripts("https://unpkg.com/d3-octree"),importScripts("https://unpkg.com/d3-force-3d"),self.onmessage=function(e){console.log("RECEIVED:",e.data.type);let t=!1;if(e.data.type=="import")console.log("IMPORTING...");else if(e.data.type=="stop")this.simulation.stop();else if(e.data.type=="restart")this.simulation.restart();else if(e.data.type=="init"){console.log("INIT");let n=e.data.network;e.data.use2D&&(t=!0);let r=[],i=[];Object.entries(n.nodes).forEach(a=>{let[s,o]=a;o.ID=s,o.x=400*(Math.random()*1-.5),o.y=400*(Math.random()*1-.5),o.z=400*(Math.random()*1-.5),o.vz=0,o.index=n.ID2index[s],r.push(o)});for(let a=0;a<n.indexedEdges.length/2;a++){let s=n.indexedEdges[a*2],o=n.indexedEdges[a*2+1],c={source:s,target:o};i.push(c)}this.simulation=d3.forceSimulation(r).numDimensions(t?2:3).force("charge",d3.forceManyBody()).force("link",d3.forceLink(i)).force("center",d3.forceCenter()).velocityDecay(.05).on("tick",async()=>{for(let a=0;a<r.length;a++){let s=r[a];n.positions[a*3+0]=s.x/10,n.positions[a*3+1]=s.y/10,t?n.positions[a*3+2]=0:n.positions[a*3+2]=s.z/10}self.postMessage({type:"layoutStep",positions:n.positions})})}}},l0=z2.toString();console.log(l0);var h0=URL.createObjectURL(new Blob([`(${l0})()`],{type:"text/javascript"}));import.meta.env=Pe;var D2=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_t=class{constructor({elementID:t,nodes:n={},edges:r=[],use2D:i=!1,display:a=[]}){if(this.element=document.getElementById(t),this.element.innerHTML="",this.canvasElement=document.createElement("canvas"),this.element.appendChild(this.canvasElement),this.network=new Ot(n,r),this.display=a,this.rotationMatrix=W.create(),this.translatePosition=Pn.create(),this.mouseDown=!1,this.lastMouseX=null,this.lastMouseY=null,this.redrawingFromMouseWheelEvent=!1,this.fastEdges=!1,this.animate=!1,this.cameraDistance=450,this.zoomFactor=1,this.rotateLinearX=0,this.rotateLinearY=0,this.panX=0,this.panY=0,this.saveResolutionRatio=1,this.pickingResolutionRatio=.25,this._edgesIntensity=1,this._use2D=i,this._use2D)for(let o=0;o<this.network.positions.length;o++)this.network.positions[o*3+2]=0;W.identity(this.rotationMatrix);var s=[0,0,0];this.gl=Hn(this.canvasElement,{antialias:!0,powerPreference:"high-performance",desynchronized:!0}),console.log(this.gl),this.initialize(),window.onresize=o=>{this.willResizeEvent(o)},this.onNodeClickCallback=null,this.onNodeHoverStartCallback=null,this.onNodeHoverMoveCallback=null,this.onNodeHoverEndCallback=null,this.onZoomCallback=null,this.onRotationCallback=null,this.onResizeCallback=null,this.onLayoutStartCallback=null,this.onLayoutFinishCallback=null,this.onDrawCallback=null,this._backgroundColor=[.5,.5,.5,1],this.onReadyCallback=null,this.isReady=!1}async initialize(){await this._setupShaders(),await this._buildGeometry(),await this._buildPickingBuffers(),await this._buildEdgesGeometry(),await this.willResizeEvent(0),await this._setupCamera(),await this._setupEvents(),await this._setupLayout(),await this.redraw(),this.onReadyCallback?.(this),this.onReadyCallback=null,this.isReady=!0}_setupLayout(){this.layoutWorker=new Worker(h0),this.newPositions=this.network.positions.slice(0),this.positionInterpolator=null,this.layoutWorker.onmessage=t=>{if(t.data.type=="layoutStep"){if(this.newPositions=t.data.positions,this.positionInterpolator==null){let n=0;for(let r=0;r<this.network.positions.length;r++){let i=this.newPositions[r]-this.network.positions[r];n=Math.max(Math.abs(i),n)}n>1&&(this.onLayoutStartCallback?.(),this.positionInterpolator=setInterval(()=>{let r=0;for(let i=0;i<this.network.positions.length;i++){let a=this.newPositions[i]-this.network.positions[i];this.network.positions[i]+=.025*a,r=Math.max(Math.abs(a),r)}this._updateGeometry(),this._updateEdgesGeometry(),requestAnimationFrame(()=>{this.redraw()}),r<1&&(this.onLayoutFinishCallback?.(),clearInterval(this.positionInterpolator),this.positionInterpolator=null)},1e3/60))}}else console.log("Received message",t)},this.layoutWorker.postMessage({type:"import",location:import.meta.url}),this.layoutWorker.postMessage({type:"init",network:this.network,use2D:this._use2D}),this.layoutRunning=!0,document.addEventListener("keyup",t=>{t.code==="Space"&&(this.layoutRunning?(this.layoutWorker.postMessage({type:"stop"}),this.layoutRunning=!1):(this.layoutWorker.postMessage({type:"restart"}),this.layoutRunning=!0))})}_setupEvents(){this.lastMouseX=-1,this.lastMouseY=-1,this.currentHoverIndex=-1,this.canvasElement.onclick=t=>{let n=this.canvasElement.getBoundingClientRect();this.lastMouseX=t.clientX,this.lastMouseY=t.clientY;let r=this.pickPoint(this.lastMouseX-n.left,this.lastMouseY-n.top);r>=0&&this.onNodeClickCallback?.(this.network.index2Node[r],t)},this.canvasElement.addEventListener("mousemove",t=>{this.lastMouseX=t.clientX,this.lastMouseY=t.clientY,this.triggerHoverEvents(t)}),this.canvasElement.addEventListener("mouseleave",t=>{this.currentHoverIndex>=0&&(this.onNodeHoverEndCallback?.(this.network.index2Node[this.currentHoverIndex],t),this.currentHoverIndex=-1,this.lastMouseX=-1,this.lastMouseY=-1)}),document.body.addEventListener("mouseout",t=>{!t.relatedTarget&&!t.toElement&&this.currentHoverIndex>=0&&(this.onNodeHoverEndCallback?.(this.network.index2Node[this.currentHoverIndex],t),this.currentHoverIndex=-1,this.lastMouseX=-1,this.lastMouseY=-1)})}async _downloadImageData(t,n,r,i){let a=new c0({}),s=document.createElement("canvas"),o=document.createElement("canvas"),c=s.getContext("2d"),f=o.getContext("2d");o.width=t.width,o.height=t.height,s.width=t.width/r,s.height=t.height/r,c.imageSmoothingEnabled=!0,f.imageSmoothingEnabled=!0,typeof c.imageSmoothingQuality!="undefined"&&(c.imageSmoothingQuality="high"),typeof f.imageSmoothingQuality!="undefined"&&(f.imageSmoothingQuality="high"),f.putImageData(t,0,0),await a.resize(o,s,{alpha:!0});let l=document.createElement("a");D2&&(console.log("Fixing Safari bug..."),s.toDataURL()),l.setAttribute("download",n);let h=await a.toBlob(s,"image/png");if(h)if(n.endsWith("svg")){let d=`
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
				width="${s.width}" height="${s.width}"
				>
				<image
						width="${s.width}" height="${s.width}"
						xlink:href="${h}"
						/>
				</svg>`;l.setAttribute("download",n);let u=new Blob([d],{type:"image/svg+xml"}),v=URL.createObjectURL(u);l.setAttribute("href",v),l.click()}else{let d=URL.createObjectURL(h);l.setAttribute("href",d),l.click()}else window.alert("An error occured while trying to download the image. Please try again. (Error: blob is null.)");if(n.endsWith("svg")){let d=`
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
			width="${s.width}" height="${s.width}"
			>
			<image
					width="${s.width}" height="${s.width}"
					xlink:href="${s.toDataURL()}"
					/>
			</svg>`;l.setAttribute("download",n);let u=new Blob([d],{type:"image/svg+xml"}),v=URL.createObjectURL(u);l.setAttribute("href",v),l.click()}}framebufferImage(t){let n=t.size.width,r=t.size.height,i=new Uint8ClampedArray(4*n*r),a=this.gl;return a.bindFramebuffer(a.FRAMEBUFFER,t),a.readPixels(0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,i),new ImageData(i,n,r)}exportFigure(t,{scale:n=1,supersampleFactor:r=4,width:i=null,height:a=null,backgroundColor:s=null}){typeof n=="undefined"&&(n=1),typeof r=="undefined"&&(r=2);let o=this.createOffscreenFramebuffer();i==null&&a==null?(i=this.canvasElement.width,a=this.canvasElement.height):i==null?i=Math.round(a*this.canvasElement.width/this.canvasElement.height):a==null&&(a=Math.round(i*this.canvasElement.height/this.canvasElement.width)),s==null&&(s=this.backgroundColor),o.setSize(i*n*r,a*n*r),o.backgroundColor=s,this._redrawAll(o);let c=this.framebufferImage(o);this._downloadImageData(c,t,r),o.discard()}triggerHoverEvents(t){if(this.lastMouseX==-1||this.lastMouseY==-1)return;let n=this.canvasElement.getBoundingClientRect(),r=this.pickPoint(this.lastMouseX-n.left,this.lastMouseY-n.top);r>=0&&this.currentHoverIndex==-1?(this.currentHoverIndex=r,this.onNodeHoverStartCallback?.(this.network.index2Node[r],t)):r>=0&&this.currentHoverIndex==r?this.onNodeHoverMoveCallback?.(this.network.index2Node[r],t):r>=0&&this.currentHoverIndex!=r?(this.onNodeHoverEndCallback?.(this.network.index2Node[this.currentHoverIndex],t),this.currentHoverIndex=r,this.onNodeHoverStartCallback?.(this.network.index2Node[r],t)):r==-1&&this.currentHoverIndex!=r&&(this.onNodeHoverEndCallback?.(this.network.index2Node[this.currentHoverIndex],t),this.currentHoverIndex=-1)}async _setupShaders(){let t=await ke(this.gl,"edges-vertex"),n=await ke(this.gl,"edges-fragment");this.edgesShaderProgram=new Ke(t,n,["projectionViewMatrix","nearFar","linesIntensity"],["vertex","color"],this.gl);let r=await ke(this.gl,"vertices-vertex"),i=await ke(this.gl,"vertices-fragment"),a=await ke(this.gl,"vertices-fragment-picking");this.verticesShaderProgram=new Ke(r,i,["viewMatrix","projectionMatrix","normalMatrix"],["vertex","position","color","intensity","size","outlineWidth","outlineColor","encodedIndex"],this.gl),this.verticesPickingShaderProgram=new Ke(r,a,["viewMatrix","projectionMatrix","normalMatrix"],["vertex","position","color","intensity","size","outlineWidth","outlineColor","encodedIndex"],this.gl)}async _buildGeometry(){let t=this.gl,n=15;this.nodesGeometry=Wn(t,!1,!1),this.nodesPositionBuffer=t.createBuffer(),this.nodesColorBuffer=t.createBuffer(),this.nodesSizeBuffer=t.createBuffer(),this.nodesIntensityBuffer=t.createBuffer(),this.nodesOutlineWidthBuffer=t.createBuffer(),this.nodesOutlineColorBuffer=t.createBuffer(),this.nodesIndexBuffer=t.createBuffer(),this.nodesIndexArray=new Float32Array(this.network.index2Node.length*4);for(let r=0;r<this.network.index2Node.length;r++)this.nodesIndexArray[4*r]=(r+1>>0&255)/255,this.nodesIndexArray[4*r+1]=(r+1>>8&255)/255,this.nodesIndexArray[4*r+2]=(r+1>>16&255)/255,this.nodesIndexArray[4*r+3]=(r+1>>24&255)/255;t.bindBuffer(t.ARRAY_BUFFER,this.nodesIndexBuffer),t.bufferData(t.ARRAY_BUFFER,this.nodesIndexArray,t.STATIC_DRAW),console.log(this.nodesIndexArray),await this._updateGeometry()}async _buildPickingBuffers(){let t=this.gl;this.pickingFramebuffer=this.createOffscreenFramebuffer()}createOffscreenFramebuffer(){let t=this.gl,n=t.createFramebuffer();n.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n.depthBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.depthBuffer),t.bindFramebuffer(t.FRAMEBUFFER,n),n.size={width:0,height:0},n.setSize=(a,s)=>{t.bindTexture(t.TEXTURE_2D,n.texture);let o=0,c=t.RGBA,f=0,l=t.RGBA,h=t.UNSIGNED_BYTE,d=null,u=a,v=s;t.texImage2D(t.TEXTURE_2D,o,c,u,v,f,l,h,d),t.bindRenderbuffer(t.RENDERBUFFER,n.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,u,v),n.size.width=a,n.size.height=s},n.discard=()=>{t.deleteRenderbuffer(n.depthBuffer),t.deleteTexture(n.texture),t.deleteFramebuffer(n)};let r=t.COLOR_ATTACHMENT0,i=0;return t.framebufferTexture2D(t.FRAMEBUFFER,r,t.TEXTURE_2D,n.texture,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n.depthBuffer),n}async _updateGeometry(){let t=this.gl,n=this.network.positions;t.bindBuffer(t.ARRAY_BUFFER,this.nodesPositionBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.DYNAMIC_DRAW);let r=this.network.colors;t.bindBuffer(t.ARRAY_BUFFER,this.nodesColorBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW);let i=this.network.sizes;t.bindBuffer(t.ARRAY_BUFFER,this.nodesSizeBuffer),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW);let a=this.network.intensities;t.bindBuffer(t.ARRAY_BUFFER,this.nodesIntensityBuffer),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW);let s=this.network.outlineWidths;t.bindBuffer(t.ARRAY_BUFFER,this.nodesOutlineWidthBuffer),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW);let o=this.network.outlineColors;t.bindBuffer(t.ARRAY_BUFFER,this.nodesOutlineColorBuffer),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW)}async _buildEdgesGeometry(){let t=this.gl,n=this.network.indexedEdges,r=this.network.positions,i=this.network.colors,a=new Object,s;if(r.length<64e3)s=new Uint16Array(n),a.indexType=t.UNSIGNED_SHORT;else{var o=t.getExtension("OES_element_index_uint");o==null?(s=new Uint16Array(n),a.indexType=t.UNSIGNED_SHORT):(s=new Uint32Array(n),a.indexType=t.UNSIGNED_INT)}a.vertexObject=t.createBuffer(),a.colorObject=t.createBuffer(),a.numIndices=s.length,a.indexObject=t.createBuffer(),this.edgesGeometry=a,this.indicesArray=s,await this._updateEdgesGeometry()}async _updateEdgesGeometry(){let t=this.gl,n=this.network.indexedEdges,r=this.network.positions,i=this.network.colors;t.bindBuffer(t.ARRAY_BUFFER,this.edgesGeometry.vertexObject),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.edgesGeometry.colorObject),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.edgesGeometry.indexObject),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STREAM_DRAW)}async resizeGL(t,n){this.pickingFramebuffer.setSize(t*this.pickingResolutionRatio,n*this.pickingResolutionRatio),window.requestAnimationFrame(()=>this.redraw())}async _setupCamera(){this.zoom=zr().on("zoom",t=>{this.zoomFactor=t.transform.k,this.triggerHoverEvents(t),this.positionInterpolator||(this.update(),this.render())}),this.drag=Dr().on("drag",t=>{let n=W.create();if(!this._use2D)W.identity(n),W.rotate(n,n,qt(t.dx/2),[0,1,0]),W.rotate(n,n,qt(t.dy/2),[1,0,0]),W.multiply(this.rotationMatrix,n,this.rotationMatrix);else{let r=this.cameraDistance*this.zoomFactor,i=this.canvasElement.width/this.canvasElement.height;this.panX=this.panX+t.dx/r*400,this.panY=this.panY-t.dy/r*400}this.positionInterpolator||(this.update(),this.render()),this.triggerHoverEvents(t)}),G(this.canvasElement).call(this.drag).call(this.zoom).on("dblclick.zoom",null)}willResizeEvent(t){let n=window.devicePixelRatio||1;this.canvasElement.style.width=this.element.clientWidth+"px",this.canvasElement.style.height=this.element.clientHeight+"px",this.canvasElement.width=n*this.element.clientWidth,this.canvasElement.height=n*this.element.clientHeight,this.resizeGL(this.canvasElement.width,this.canvasElement.height),this.onResizeCallback?.(t)}redraw(){this._redrawAll(null,!1),this._redrawAll(this.pickingFramebuffer,!0),this.onDrawCallback?.(),this.triggerHoverEvents(null)}update(){this.positionInterpolator||(this._updateGeometry(),this._updateEdgesGeometry())}render(){this.positionInterpolator||window.requestAnimationFrame(()=>this.redraw())}_redrawPrepare(t,n,r){let i=this.gl,a=t?.size.width||this.canvasElement.width,s=t?.size.height||this.canvasElement.height;t==null?(i.bindFramebuffer(i.FRAMEBUFFER,null),i.clearColor(...this._backgroundColor)):n?(i.bindFramebuffer(i.FRAMEBUFFER,t),i.clearColor(0,0,0,0)):(i.bindFramebuffer(i.FRAMEBUFFER,t),typeof t.backgroundColor=="undefined"?i.clearColor(...this._backgroundColor):i.clearColor(...t.backgroundColor)),typeof r=="undefined"?i.viewport(0,0,a,s):i.viewport(...r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.depthFunc(i.LEQUAL),this.projectionMatrix=W.create(),this.viewMatrix=W.create(),W.perspective(this.projectionMatrix,Math.PI*2/360*70,a/s,1,3e3),W.identity(this.viewMatrix),W.translate(this.viewMatrix,this.viewMatrix,[this.panX,this.panY,-this.cameraDistance/this.zoomFactor]),W.multiply(this.viewMatrix,this.viewMatrix,this.rotationMatrix),W.translate(this.viewMatrix,this.viewMatrix,this.translatePosition)}_redrawNodes(t,n){let r=this.gl,i=r.getExtension("ANGLE_instanced_arrays"),a;n?(r.disable(r.BLEND),a=this.verticesPickingShaderProgram):(r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),a=this.verticesShaderProgram),a.use(r),a.attributes.enable("vertex"),a.attributes.enable("position"),a.attributes.enable("size"),a.attributes.enable("intensity"),a.attributes.enable("outlineWidth"),a.attributes.enable("outlineColor"),a.attributes.enable("encodedIndex"),r.bindBuffer(r.ARRAY_BUFFER,this.nodesGeometry.vertexObject),r.vertexAttribPointer(a.attributes.vertex,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.vertex,0),this.nodesGeometry.indexObject&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.nodesGeometry.indexObject),r.uniformMatrix4fv(a.uniforms.projectionMatrix,!1,this.projectionMatrix),r.uniformMatrix4fv(a.uniforms.viewMatrix,!1,this.viewMatrix);let s=Nt.create();Nt.normalFromMat4(s,this.viewMatrix),r.uniformMatrix3fv(a.uniforms.normalMatrix,!1,s);let o=this.network.colors,c=this.network.positions,f=this.network.sizes,l=this.network.intensities,h=this.network.outlineWidths;r.bindBuffer(r.ARRAY_BUFFER,this.nodesPositionBuffer),r.enableVertexAttribArray(a.attributes.position),r.vertexAttribPointer(a.attributes.position,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.position,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesColorBuffer),r.enableVertexAttribArray(a.attributes.color),r.vertexAttribPointer(a.attributes.color,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.color,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesSizeBuffer),r.enableVertexAttribArray(a.attributes.size),r.vertexAttribPointer(a.attributes.size,1,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.size,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesOutlineColorBuffer),r.enableVertexAttribArray(a.attributes.outlineColor),r.vertexAttribPointer(a.attributes.outlineColor,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.outlineColor,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesOutlineWidthBuffer),r.enableVertexAttribArray(a.attributes.outlineWidth),r.vertexAttribPointer(a.attributes.outlineWidth,1,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.outlineWidth,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesIntensityBuffer),r.enableVertexAttribArray(a.attributes.intensity),r.vertexAttribPointer(a.attributes.intensity,1,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.intensity,1),r.bindBuffer(r.ARRAY_BUFFER,this.nodesIndexBuffer),r.enableVertexAttribArray(a.attributes.encodedIndex),r.vertexAttribPointer(a.attributes.encodedIndex,4,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(a.attributes.encodedIndex,1),this.nodesGeometry.indexObject?i.drawElementsInstancedANGLE(r.TRIANGLES,this.nodesGeometry.numIndices,this.nodesGeometry.indexType,0,this.network.positions.length/3):i.drawArraysInstancedANGLE(r.TRIANGLE_STRIP,0,this.nodesGeometry.numIndices,this.network.positions.length/3),a.attributes.disable("vertex"),a.attributes.disable("position"),a.attributes.disable("size"),a.attributes.disable("intensity"),a.attributes.disable("outlineWidth"),a.attributes.disable("outlineColor"),a.attributes.disable("encodedIndex")}_redrawEdges(t,n){let r=this.gl,i=r.getExtension("ANGLE_instanced_arrays");!n&&!((this.mouseDown||this.redrawingFromMouseWheelEvent)&&this.fastEdges)&&(this.edgesShaderProgram.use(r),this.edgesShaderProgram.attributes.enable("vertex"),this.edgesShaderProgram.attributes.enable("color"),r.enable(r.BLEND),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE),this.projectionViewMatrix=W.create(),W.multiply(this.projectionViewMatrix,this.projectionMatrix,this.viewMatrix),r.bindBuffer(r.ARRAY_BUFFER,this.edgesGeometry.vertexObject),r.vertexAttribPointer(this.edgesShaderProgram.attributes.vertex,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(this.edgesShaderProgram.attributes.vertex,0),r.bindBuffer(r.ARRAY_BUFFER,this.edgesGeometry.colorObject),r.vertexAttribPointer(this.edgesShaderProgram.attributes.color,3,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(this.edgesShaderProgram.attributes.color,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.edgesGeometry.indexObject),r.uniformMatrix4fv(this.edgesShaderProgram.uniforms.projectionViewMatrix,!1,this.projectionViewMatrix),r.uniform1f(this.edgesShaderProgram.uniforms.linesIntensity,this._edgesIntensity),r.drawElements(r.LINES,this.edgesGeometry.numIndices,this.edgesGeometry.indexType,0),this.edgesShaderProgram.attributes.disable("vertex"),this.edgesShaderProgram.attributes.disable("color"))}_redrawAll(t,n){typeof n=="undefined"&&(n=!1);let r=this.gl;this._redrawPrepare(t,n),r.depthMask(!0),this._use2D?(r.disable(r.DEPTH_TEST),r.depthMask(!1),this._redrawEdges(t,n),this._redrawNodes(t,n)):(r.enable(r.DEPTH_TEST),this._redrawNodes(t,n),r.depthMask(!1),this._redrawEdges(t,n),r.depthMask(!0))}onResize(t){return this.onResizeCallback=t,this}onNodeClick(t){return this.onNodeClickCallback=t,this}onNodeHoverStart(t){return this.onNodeHoverStartCallback=t,this}onNodeHoverEnd(t){return this.onNodeHoverEndCallback=t,this}onNodeHoverMove(t){return this.onNodeHoverMoveCallback=t,this}onZoom(t){return this.onZoomCallback=t,this}onRotation(t){return this.onRotationCallback=t,this}onLayoutStart(t){return this.onLayoutStartCallback=t,this}onLayoutFinish(t){return this.onLayoutFinishCallback=t,this}onDraw(t){return this.onDrawCallback=t,this}onReady(t){this.isReady?t?.(this):this.onReadyCallback=t}backgroundColor(t){return typeof t=="undefined"?this._backgroundColor:(this._backgroundColor=t,this)}nodeColor(t,n){if(typeof n=="undefined"){if(typeof t=="undefined")return this.network.colors;if(typeof t=="function")for(let[r,i]of Object.entries(this.network.nodes)){let a=this.network.ID2index[r],s=t(i,a,this.network);this.network.colors[a*3+0]=s[0],this.network.colors[a*3+1]=s[1],this.network.colors[a*3+2]=s[2]}else{if(typeof t=="number")return this.network.colors[this.network.ID2index[t]];for(let[r,i]of Object.entries(this.network.nodes)){let a=this.network.ID2index[r];this.network.colors[a*3+0]=t[0],this.network.colors[a*3+1]=t[1],this.network.colors[a*3+2]=t[2]}}}else if(typeof t=="function"){let r=this.network.ID2index[n],i=t(n,r,this.network);this.network.colors[r*3+0]=i[0],this.network.colors[r*3+1]=i[1],this.network.colors[r*3+2]=i[2]}else{let r=this.network.ID2index[n];this.network.colors[r*3+0]=t[0],this.network.colors[r*3+1]=t[1],this.network.colors[r*3+2]=t[2]}return this}nodeSize(t,n){if(typeof n=="undefined"){if(typeof t=="undefined")return this.network.sizes;if(typeof t=="function")for(let[r,i]of Object.entries(this.network.nodes)){let a=t(i,this.network);this.network.sizes[i.index]=a}else for(let[r,i]of Object.entries(this.network.nodes))this.network.sizes[i.index]=t}else if(typeof t=="function"){let r=t(n,this.network),i=this.network.ID2index[n];this.network.sizes[i]=r}else{let r=this.network.ID2index[n];this.network.sizes[r]=t}return this}nodeOutlineColor(t,n){if(typeof n=="undefined"){if(typeof t=="undefined")return this.network.outlineColors;if(typeof t=="function")for(let[r,i]of Object.entries(this.network.nodes)){let a=this.network.ID2index[r],s=t(i,a,this.network);this.network.outlineColors[a*3+0]=s[0],this.network.outlineColors[a*3+1]=s[1],this.network.outlineColors[a*3+2]=s[2]}else{if(typeof t=="number")return this.network.outlineColors[this.network.ID2index[t]];for(let[r,i]of Object.entries(this.network.nodes)){let a=this.network.ID2index[r];this.network.outlineColors[a*3+0]=t[0],this.network.outlineColors[a*3+1]=t[1],this.network.outlineColors[a*3+2]=t[2]}}}else if(typeof t=="function"){let r=this.network.ID2index[n],i=t(n,r,this.network);this.network.outlineColors[r*3+0]=i[0],this.network.outlineColors[r*3+1]=i[1],this.network.outlineColors[r*3+2]=i[2]}else{let r=this.network.ID2index[n];this.network.outlineColors[r*3+0]=t[0],this.network.outlineColors[r*3+1]=t[1],this.network.outlineColors[r*3+2]=t[2]}return this}nodeOutlineWidth(t,n){if(typeof n=="undefined"){if(typeof t=="undefined")return this.network.outlineWidths;if(typeof t=="function")for(let[r,i]of Object.entries(this.network.nodes)){let a=t(i,this.network);this.network.outlineWidths[i.index]=a}else for(let[r,i]of Object.entries(this.network.nodes))this.network.outlineWidths[i.index]=t}else if(typeof t=="function"){let r=t(n,this.network),i=this.network.ID2index[n];this.network.outlineWidths[i]=r}else{let r=this.network.ID2index[n];this.network.outlineWidths[r]=t}return this}pickPoint(t,n){let r=this.canvasElement.width*this.pickingResolutionRatio,i=this.canvasElement.height*this.pickingResolutionRatio,a=t*r/this.canvasElement.clientWidth,s=i-n*i/this.canvasElement.clientHeight-1,o=new Uint8Array(4),c=this.gl;return c.bindFramebuffer(c.FRAMEBUFFER,this.pickingFramebuffer),c.readPixels(a,s,1,1,c.RGBA,c.UNSIGNED_BYTE,o),o[0]+(o[1]<<8)+(o[2]<<16)+(o[3]<<24)-1}edgesIntensity(t){return typeof t=="undefined"?this._edgesIntensity:(this._edgesIntensity=t,this)}};var De={};$t(De,{interpolateBlues:()=>gl,interpolateBrBG:()=>X2,interpolateBuGn:()=>il,interpolateBuPu:()=>al,interpolateCividis:()=>xl,interpolateCool:()=>Il,interpolateCubehelixDefault:()=>_l,interpolateGnBu:()=>sl,interpolateGreens:()=>ml,interpolateGreys:()=>bl,interpolateInferno:()=>$l,interpolateMagma:()=>Fl,interpolateOrRd:()=>ol,interpolateOranges:()=>wl,interpolatePRGn:()=>V2,interpolatePiYG:()=>Z2,interpolatePlasma:()=>Nl,interpolatePuBu:()=>cl,interpolatePuBuGn:()=>fl,interpolatePuOr:()=>K2,interpolatePuRd:()=>ll,interpolatePurples:()=>yl,interpolateRainbow:()=>El,interpolateRdBu:()=>J2,interpolateRdGy:()=>el,interpolateRdPu:()=>hl,interpolateRdYlBu:()=>tl,interpolateRdYlGn:()=>nl,interpolateReds:()=>Al,interpolateSinebow:()=>kl,interpolateSpectral:()=>rl,interpolateTurbo:()=>Rl,interpolateViridis:()=>Sl,interpolateWarm:()=>Ml,interpolateYlGn:()=>ul,interpolateYlGnBu:()=>dl,interpolateYlOrBr:()=>vl,interpolateYlOrRd:()=>pl,schemeAccent:()=>O2,schemeBlues:()=>L0,schemeBrBG:()=>b0,schemeBuGn:()=>B0,schemeBuPu:()=>C0,schemeCategory10:()=>m0,schemeDark2:()=>q2,schemeGnBu:()=>k0,schemeGreens:()=>O0,schemeGreys:()=>q0,schemeOrRd:()=>R0,schemeOranges:()=>U0,schemePRGn:()=>y0,schemePaired:()=>Q2,schemePastel1:()=>j2,schemePastel2:()=>U2,schemePiYG:()=>A0,schemePuBu:()=>F0,schemePuBuGn:()=>S0,schemePuOr:()=>w0,schemePuRd:()=>$0,schemePurples:()=>Q0,schemeRdBu:()=>x0,schemeRdGy:()=>_0,schemeRdPu:()=>N0,schemeRdYlBu:()=>M0,schemeRdYlGn:()=>I0,schemeReds:()=>j0,schemeSet1:()=>G2,schemeSet2:()=>Y2,schemeSet3:()=>H2,schemeSpectral:()=>E0,schemeTableau10:()=>W2,schemeYlGn:()=>D0,schemeYlGnBu:()=>z0,schemeYlOrBr:()=>T0,schemeYlOrRd:()=>P0});var T2=Math.PI/180,P2=180/Math.PI,d0=-.14861,ln=1.78277,hn=-.29227,Mt=-.90649,Ve=1.97294,u0=Ve*Mt,v0=Ve*ln,p0=ln*hn-Mt*d0;function L2(e){if(e instanceof Ce)return new Ce(e.h,e.s,e.l,e.opacity);e instanceof X||(e=Xt(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(p0*r+u0*t-v0*n)/(p0+u0-v0),a=r-i,s=(Ve*(n-i)-hn*a)/Mt,o=Math.sqrt(s*s+a*a)/(Ve*i*(1-i)),c=o?Math.atan2(s,a)*P2-120:NaN;return new Ce(c<0?c+360:c,o,i,e.opacity)}function le(e,t,n,r){return arguments.length===1?L2(e):new Ce(e,t,n,r??1)}function Ce(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ye(Ce,le,ft(_e,{brighter:function(e){return e=e==null?Me:Math.pow(Me,e),new Ce(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ye:Math.pow(ye,e),new Ce(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*T2,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new X(255*(t+n*(d0*r+ln*i)),255*(t+n*(hn*r+Mt*i)),255*(t+n*(Ve*r)),this.opacity)}}));function g0(e){return function t(n){n=+n;function r(i,a){var s=e((i=le(i)).h,(a=le(a)).h),o=Ie(i.s,a.s),c=Ie(i.l,a.l),f=Ie(i.opacity,a.opacity);return function(l){return i.h=s(l),i.s=o(l),i.l=c(Math.pow(l,n)),i.opacity=f(l),i+""}}return r.gamma=t,r}(1)}g0(Ar);var dn=g0(Ie);function L(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var m0=L("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),O2=L("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),q2=L("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Q2=L("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),j2=L("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),U2=L("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),G2=L("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Y2=L("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),H2=L("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),W2=L("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),U=e=>wr(e[e.length-1]),b0=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(L),X2=U(b0),y0=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(L),V2=U(y0),A0=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(L),Z2=U(A0),w0=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(L),K2=U(w0),x0=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(L),J2=U(x0),_0=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(L),el=U(_0),M0=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(L),tl=U(M0),I0=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(L),nl=U(I0),E0=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(L),rl=U(E0),B0=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(L),il=U(B0),C0=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(L),al=U(C0),k0=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(L),sl=U(k0),R0=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(L),ol=U(R0),S0=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(L),fl=U(S0),F0=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(L),cl=U(F0),$0=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(L),ll=U($0),N0=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(L),hl=U(N0),z0=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(L),dl=U(z0),D0=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(L),ul=U(D0),T0=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(L),vl=U(T0),P0=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(L),pl=U(P0),L0=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(L),gl=U(L0),O0=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(L),ml=U(O0),q0=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(L),bl=U(q0),Q0=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(L),yl=U(Q0),j0=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(L),Al=U(j0),U0=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(L),wl=U(U0);function xl(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var _l=dn(le(300,.5,0),le(-240,.5,1)),Ml=dn(le(-100,.75,.35),le(80,1.5,.8)),Il=dn(le(260,.75,.35),le(80,1.5,.8)),It=le();function El(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return It.h=360*e-100,It.s=1.5-1.5*t,It.l=.8-.9*t,It+""}var Et=ne(),Bl=Math.PI/3,Cl=Math.PI*2/3;function kl(e){var t;return e=(.5-e)*Math.PI,Et.r=255*(t=Math.sin(e))*t,Et.g=255*(t=Math.sin(e+Bl))*t,Et.b=255*(t=Math.sin(e+Cl))*t,Et+""}function Rl(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Bt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var Sl=Bt(L("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Fl=Bt(L("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$l=Bt(L("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Nl=Bt(L("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var un=class extends Map{constructor(t,n=Tl){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(let[r,i]of t)this.set(r,i)}get(t){return super.get(G0(this,t))}has(t){return super.has(G0(this,t))}set(t,n){return super.set(zl(this,t),n)}delete(t){return super.delete(Dl(this,t))}};function G0({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function zl({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Dl({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}function Tl(e){return e!==null&&typeof e=="object"?e.valueOf():e}var vn=Math.sqrt(50),pn=Math.sqrt(10),gn=Math.sqrt(2);function Pl(e,t,n){var r,i=-1,a,s,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(o=Y0(e,t,n))===0||!isFinite(o))return[];if(o>0){let c=Math.round(e/o),f=Math.round(t/o);for(c*o<e&&++c,f*o>t&&--f,s=new Array(a=f-c+1);++i<a;)s[i]=(c+i)*o}else{o=-o;let c=Math.round(e*o),f=Math.round(t*o);for(c/o<e&&++c,f/o>t&&--f,s=new Array(a=f-c+1);++i<a;)s[i]=(c+i)/o}return r&&s.reverse(),s}function Y0(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=vn?10:a>=pn?5:a>=gn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=vn?10:a>=pn?5:a>=gn?2:1)}function Ll(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=vn?i*=10:a>=pn?i*=5:a>=gn&&(i*=2),t<e?-i:i}function Ol(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ql(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var H0=Symbol("implicit");function Ct(){var e=new un,t=[],n=[],r=H0;function i(a){let s=e.get(a);if(s===void 0){if(r!==H0)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new un;for(let s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ct(t,n).unknown(r)},Ol.apply(i,arguments),i}function Ql(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function jl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ul(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=mn(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Gl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Yl(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=mn(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}function mn(e,t){var n=typeof t,r;return t==null||n==="boolean"?We(t):(n==="number"?te:n==="string"?(r=de(t))?(t=r,$e):ot:t instanceof de?$e:t instanceof Date?Gl:jl(t)?Ql:Array.isArray(t)?Ul:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yl:te)(e,t)}function Hl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function W0(e){return e}function Wl(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Te(e){return e=kt(Math.abs(e)),e?e[1]:NaN}function Xl(e,t){return function(n,r){for(var i=n.length,a=[],s=0,o=e[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Vl(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rt(e){if(!(t=Zl.exec(e)))throw new Error("invalid format: "+e);var t;return new bn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rt.prototype=bn.prototype;function bn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kl(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var X0;function Jl(e,t){var n=kt(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(X0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+kt(e,Math.max(0,t+a-1))[0]}function V0(e,t){var n=kt(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Z0={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Wl,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>V0(e*100,t),r:V0,s:Jl,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K0(e){return e}var J0=Array.prototype.map,ei=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function eh(e){var t=e.grouping===void 0||e.thousands===void 0?K0:Xl(J0.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?K0:Vl(J0.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Rt(h);var d=h.fill,u=h.align,v=h.sign,m=h.symbol,p=h.zero,A=h.width,x=h.comma,_=h.precision,w=h.trim,M=h.type;M==="n"?(x=!0,M="g"):Z0[M]||(_===void 0&&(_=12),w=!0,M="g"),(p||d==="0"&&u==="=")&&(p=!0,d="0",u="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",F=m==="$"?r:/[%p]/.test(M)?s:"",R=Z0[M],$=/[defgprs%]/.test(M);_=_===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function N(S){var T=E,B=F,b,g,y;if(M==="c")B=R(S)+B,S="";else{S=+S;var I=S<0||1/S<0;if(S=isNaN(S)?c:R(Math.abs(S),_),w&&(S=Kl(S)),I&&+S==0&&v!=="+"&&(I=!1),T=(I?v==="("?v:o:v==="-"||v==="("?"":v)+T,B=(M==="s"?ei[8+X0/3]:"")+B+(I&&v==="("?")":""),$){for(b=-1,g=S.length;++b<g;)if(y=S.charCodeAt(b),48>y||y>57){B=(y===46?i+S.slice(b+1):S.slice(b))+B,S=S.slice(0,b);break}}}x&&!p&&(S=t(S,Infinity));var C=T.length+S.length+B.length,k=C<A?new Array(A-C+1).join(d):"";switch(x&&p&&(S=t(k+S,k.length?A-B.length:Infinity),k=""),u){case"<":S=T+S+B+k;break;case"=":S=T+k+S+B;break;case"^":S=k.slice(0,C=k.length>>1)+T+S+B+k.slice(C);break;default:S=k+T+S+B;break}return a(S)}return N.toString=function(){return h+""},N}function l(h,d){var u=f((h=Rt(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Te(d)/3)))*3,m=Math.pow(10,-v),p=ei[8+v/3];return function(A){return u(m*A)+p}}return{format:f,formatPrefix:l}}var St,ti,ni;th({thousands:",",grouping:[3],currency:["$",""]});function th(e){return St=eh(e),ti=St.format,ni=St.formatPrefix,St}function nh(e){return Math.max(0,-Te(Math.abs(e)))}function rh(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Te(t)/3)))*3-Te(Math.abs(e)))}function ih(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Te(t)-Te(e))+1}function ah(e,t,n,r){var i=Ll(e,t,n),a;switch(r=Rt(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=rh(i,s))&&(r.precision=a),ni(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ih(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=nh(i))&&(r.precision=a-(r.type==="%")*2);break}}return ti(r)}function sh(e){var t=e.domain;return e.ticks=function(n){var r=t();return Pl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ah(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],o=r[a],c,f,l=10;for(o<s&&(f=s,s=o,o=f,f=i,i=a,a=f);l-- >0;){if(f=Y0(s,o,n),f===c)return r[i]=s,r[a]=o,t(r);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;c=f}return e},e}function oh(){var e=0,t=1,n,r,i,a,s=W0,o=!1,c;function f(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function l(h){return function(d){var u,v;return arguments.length?([u,v]=d,s=h(u,v),f):[s(0),s(1)]}}return f.range=l(mn),f.rangeRound=l(Hl),f.unknown=function(h){return arguments.length?(c=h,f):c},function(h){return a=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),f}}function fh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yn(){var e=sh(oh()(W0));return e.copy=function(){return fh(e,yn())},ql.apply(e,arguments)}function ch(e){let t=e.reduce((r,i)=>(r.set(i,(r.get(i)||0)+1),r),new Map);return Array.from(t.keys()).sort((r,i)=>t.get(i)-t.get(r))}var ri="WS_10000_10_001";Le.loadXNETFile(ri+".xnet").then(async e=>{let t="index",n="interpolateInferno",r="schemeCategory10",i=!1,a=.2;console.log(e);let s=e.nodesCount,o={},c=[];for(let x=0;x<s;x++)o[""+x]={ID:""+x,rand:""+Math.round(Math.random()*10)},e.labels&&(o[""+x].label=e.labels[x]);for(let[x,_]of Object.entries(e.verticesProperties))for(let w=0;w<s;w++)o[""+w][x.toLowerCase()]=_[w];for(let x=0;x<e.edges.length;x++){let _,w;c.push({source:""+e.edges[x][0],target:""+e.edges[x][1]})}let f=document.getElementById("tooltip");console.log(Object.entries(De));let l=Ct(m0),h=new _t({elementID:"netviz",nodes:o,edges:c,use2D:!1}).onNodeHoverStart((x,_)=>{_&&(f.style.left=_.pageX+"px",f.style.top=_.pageY+"px"),x?(f.style.display="block",f.style.color=ne(x.color[0]*255,x.color[1]*255,x.color[2]*255).darker(1).formatRgb(),f.textContent=x.ID,x.originalSize=x.size,x.size=2*x.originalSize,x.outlineWidth=.25*x.originalSize,h.update(),h.render()):f.style.display="none"}).onNodeHoverMove((x,_)=>{_&&(f.style.left=_.pageX+"px",f.style.top=_.pageY+"px"),x?f.textContent=x.ID:f.style.display="none"}).onNodeHoverEnd((x,_)=>{_&&(f.style.left=_.pageX+"px",f.style.top=_.pageY+"px"),x&&(x.size=1*x.originalSize,x.outlineWidth=a*x.originalSize,h.update(),h.render()),f.style.display="none"}).onNodeClick((x,_)=>{}).backgroundColor([1,1,1,1]).edgesIntensity(1).nodeOutlineWidth(x=>x.size*a),d={Export:{name:"Export",mapColor:"#B1C3B6",color:"#008758",action:x=>{console.log("Action!");let _=window.devicePixelRatio||1;h.exportFigure(ri+".png",{scale:2,supersampleFactor:2,backgroundColor:[1,1,1,1]})},extra:x=>{}},Size:{name:"Size",mapColor:"#AFB9C9",color:"#1E6099",action:null,extra:x=>{x.append("input").attr("type","range").attr("min","-1").attr("max","1").attr("step","0.1").attr("value","0").attr("id","nodeSizeSlider").classed("slider",!0).style("min-width","60px").on("input",(_,w)=>{h.nodeSize(Math.pow(10,parseFloat(G("#nodeSizeSlider").property("value")))),h.nodeOutlineWidth(M=>M.size*a),h.update(),h.render(),_.stopPropagation()})}},Color:{name:"Color",mapColor:"#AFB9C9",color:"#1E6099",action:null,extra:x=>{x.append("select").attr("id","colorSelector").classed("selector",!0).style("min-width","60px").on("change",(_,w)=>{p()}).selectAll("option").data(Object.entries(h.network.index2Node[0])).enter().filter(_=>!_[0].startsWith("_")).filter(_=>_[0]!="ID").append("option").attr("value",_=>_[0]).property("selected",_=>_[0]==t).text(_=>_[0]),x.append("select").attr("id","colormapSelector").classed("selector",!0).style("min-width","60px")}},Edges:{name:"Edges",mapColor:"#B1A58C",color:"#903C22",action:null,extra:x=>{console.log("CALLED"),x.append("input").attr("type","range").attr("min","0").attr("max","1").attr("step",1/255+"").attr("value","1").attr("id","edgeOpacitySlider").classed("slider",!0).style("min-width","60px").on("input",(_,w)=>{h.edgesIntensity(parseFloat(G("#edgeOpacitySlider").property("value"))),h.update(),h.render(),_.stopPropagation()})}}};function u(){let x=[];for(let[R,$]of Object.entries(h.network.nodes))x.push($[t]);let _=ch(x);console.log(_);let w=De[r];if(w.filter(Array.isArray).length>0){let R=w.findIndex($=>typeof $!="undefined");typeof w[_.length-1]!="undefined"?w=w[_.length-1]:_.length-1<R?w=w[R]:w=w[w.length-1]}let E=Ct(w),F=new Map;_.forEach((R,$)=>{$<w.length?F.set(R,E(R)):F.set(R,"#bbbbbb")}),h.nodeColor(R=>{let $=ne(F.get(R[t]));return[$.r/255,$.g/255,$.b/255]}),h.update(),h.render()}function v(){let x=[],_=-Infinity,w=Infinity;for(let[F,R]of Object.entries(h.network.nodes))x.push(R[t]),_=Math.max(_,R[t]),w=Math.min(w,R[t]);let M=De[n],E=yn(M).domain([w,_]);h.nodeColor(F=>{let R=ne(E(F[t]));return[R.r/255,R.g/255,R.b/255]}),h.update(),h.render()}let m=()=>{i?(r=G("#colormapSelector").property("value"),u()):(n=G("#colormapSelector").property("value"),v())},p=()=>{t=G("#colorSelector").property("value");let x=!1;for(let[w,M]of Object.entries(h.network.nodes))if(typeof M[t]!="number"){x=!0;break}i=x,console.log(x?"categorical":"continuous");let _=G("#colormapSelector").classed("selector",!0).style("min-width","60px").on("change",(w,M)=>{m()}).selectAll("option").data(Object.entries(De).filter(w=>w[0].startsWith(x?"scheme":"interpolate"))).join("option").attr("value",w=>w[0]).property("selected",w=>w[0]==(x?r:n)).text(w=>w[0].replace("interpolate","").replace("scheme",""));m()},A=["Export","Size","Color","Edges"];G("#selectionmenu").selectAll("span.menuEntry").data(A).enter().append("span").classed("menuEntry",!0).style("--color",x=>d[x].color).text(x=>d[x].name).each(function(x){G(this).call(d[x].extra)}),G("#selectionmenu").selectAll("span.menuEntry").filter(x=>d[x].action!=null).on("click",(x,_)=>{d[_].action&&d[_].action(G(void 0),_)}).classed("hasAction",!0),h.onReady(()=>p())});
/*!

pica
https://github.com/nodeca/pica

*/
//# sourceMappingURL=script.js.map
